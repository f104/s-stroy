/*! svg.js v2.6.6 MIT*/;!function(t,e){"function"==typeof define&&define.amd?define(function(){return e(t,t.document)}):"object"==typeof exports?module.exports=t.document?e(t,t.document):function(t){return e(t,t.document)}:t.SVG=e(t,t.document)}("undefined"!=typeof window?window:this,function(t,e){function i(t,e,i,n){return i+n.replace(b.regex.dots," .")}function n(t){for(var e=t.slice(0),i=e.length;i--;)Array.isArray(e[i])&&(e[i]=n(e[i]));return e}function r(t,e){return t instanceof e}function s(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector).call(t,e)}function o(t){return t.toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()})}function a(t){return t.charAt(0).toUpperCase()+t.slice(1)}function h(t){return 4==t.length?["#",t.substring(1,2),t.substring(1,2),t.substring(2,3),t.substring(2,3),t.substring(3,4),t.substring(3,4)].join(""):t}function u(t){var e=t.toString(16);return 1==e.length?"0"+e:e}function l(t,e,i){if(null==e||null==i){var n=t.bbox();null==e?e=n.width/n.height*i:null==i&&(i=n.height/n.width*e)}return{width:e,height:i}}function c(t,e,i){return{x:e*t.a+i*t.c+0,y:e*t.b+i*t.d+0}}function f(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}function d(t){return t instanceof b.Matrix||(t=new b.Matrix(t)),t}function p(t,e){t.cx=null==t.cx?e.bbox().cx:t.cx,t.cy=null==t.cy?e.bbox().cy:t.cy}function m(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e][0],null!=t[e][1]&&(n+=t[e][1],null!=t[e][2]&&(n+=" ",n+=t[e][2],null!=t[e][3]&&(n+=" ",n+=t[e][3],n+=" ",n+=t[e][4],null!=t[e][5]&&(n+=" ",n+=t[e][5],n+=" ",n+=t[e][6],null!=t[e][7]&&(n+=" ",n+=t[e][7])))));return n+" "}function x(e){for(var i=e.childNodes.length-1;i>=0;i--)e.childNodes[i]instanceof t.SVGElement&&x(e.childNodes[i]);return b.adopt(e).id(b.eid(e.nodeName))}function y(t){return null==t.x&&(t.x=0,t.y=0,t.width=0,t.height=0),t.w=t.width,t.h=t.height,t.x2=t.x+t.width,t.y2=t.y+t.height,t.cx=t.x+t.width/2,t.cy=t.y+t.height/2,t}function v(t){var e=(t||"").toString().match(b.regex.reference);if(e)return e[1]}function g(t){return Math.abs(t)>1e-37?t:0}var w=void 0!==this?this:t,b=w.SVG=function(t){if(b.supported)return t=new b.Doc(t),b.parser.draw||b.prepare(),t};if(b.ns="http://www.w3.org/2000/svg",b.xmlns="http://www.w3.org/2000/xmlns/",b.xlink="http://www.w3.org/1999/xlink",b.svgjs="http://svgjs.com/svgjs",b.supported=function(){return!!e.createElementNS&&!!e.createElementNS(b.ns,"svg").createSVGRect}(),!b.supported)return!1;b.did=1e3,b.eid=function(t){return"Svgjs"+a(t)+b.did++},b.create=function(t){var i=e.createElementNS(this.ns,t);return i.setAttribute("id",this.eid(t)),i},b.extend=function(){var t,e,i,n;for(t=[].slice.call(arguments),e=t.pop(),n=t.length-1;n>=0;n--)if(t[n])for(i in e)t[n].prototype[i]=e[i];b.Set&&b.Set.inherit&&b.Set.inherit()},b.invent=function(t){var e="function"==typeof t.create?t.create:function(){this.constructor.call(this,b.create(t.create))};return t.inherit&&(e.prototype=new t.inherit),t.extend&&b.extend(e,t.extend),t.construct&&b.extend(t.parent||b.Container,t.construct),e},b.adopt=function(e){if(!e)return null;if(e.instance)return e.instance;var i;return i="svg"==e.nodeName?e.parentNode instanceof t.SVGElement?new b.Nested:new b.Doc:"linearGradient"==e.nodeName?new b.Gradient("linear"):"radialGradient"==e.nodeName?new b.Gradient("radial"):b[a(e.nodeName)]?new(b[a(e.nodeName)]):new b.Element(e),i.type=e.nodeName,i.node=e,e.instance=i,i instanceof b.Doc&&i.namespace().defs(),i.setData(JSON.parse(e.getAttribute("svgjs:data"))||{}),i},b.prepare=function(){var t=e.getElementsByTagName("body")[0],i=(t?new b.Doc(t):b.adopt(e.documentElement).nested()).size(2,0);b.parser={body:t||e.documentElement,draw:i.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:i.polyline().node,path:i.path().node,native:b.create("svg")}},b.parser={native:b.create("svg")},e.addEventListener("DOMContentLoaded",function(){b.parser.draw||b.prepare()},!1),b.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},b.utils={map:function(t,e){var i,n=t.length,r=[];for(i=0;i<n;i++)r.push(e(t[i]));return r},filter:function(t,e){var i,n=t.length,r=[];for(i=0;i<n;i++)e(t[i])&&r.push(t[i]);return r},radians:function(t){return t%360*Math.PI/180},degrees:function(t){return 180*t/Math.PI%360},filterSVGElements:function(e){return this.filter(e,function(e){return e instanceof t.SVGElement})}},b.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},b.Color=function(t){var e;this.r=0,this.g=0,this.b=0,t&&("string"==typeof t?b.regex.isRgb.test(t)?(e=b.regex.rgb.exec(t.replace(b.regex.whitespace,"")),this.r=parseInt(e[1]),this.g=parseInt(e[2]),this.b=parseInt(e[3])):b.regex.isHex.test(t)&&(e=b.regex.hex.exec(h(t)),this.r=parseInt(e[1],16),this.g=parseInt(e[2],16),this.b=parseInt(e[3],16)):"object"==typeof t&&(this.r=t.r,this.g=t.g,this.b=t.b))},b.extend(b.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+u(this.r)+u(this.g)+u(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(t){return this.destination=new b.Color(t),this},at:function(t){return this.destination?(t=t<0?0:t>1?1:t,new b.Color({r:~~(this.r+(this.destination.r-this.r)*t),g:~~(this.g+(this.destination.g-this.g)*t),b:~~(this.b+(this.destination.b-this.b)*t)})):this}}),b.Color.test=function(t){return t+="",b.regex.isHex.test(t)||b.regex.isRgb.test(t)},b.Color.isRgb=function(t){return t&&"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b},b.Color.isColor=function(t){return b.Color.isRgb(t)||b.Color.test(t)},b.Array=function(t,e){t=(t||[]).valueOf(),0==t.length&&e&&(t=e.valueOf()),this.value=this.parse(t)},b.extend(b.Array,{morph:function(t){if(this.destination=this.parse(t),this.value.length!=this.destination.length){for(var e=this.value[this.value.length-1],i=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push(i);for(;this.value.length<this.destination.length;)this.value.push(e)}return this},settle:function(){for(var t=0,e=this.value.length,i=[];t<e;t++)-1==i.indexOf(this.value[t])&&i.push(this.value[t]);return this.value=i},at:function(t){if(!this.destination)return this;for(var e=0,i=this.value.length,n=[];e<i;e++)n.push(this.value[e]+(this.destination[e]-this.value[e])*t);return new b.Array(n)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(t){return t=t.valueOf(),Array.isArray(t)?t:this.split(t)},split:function(t){return t.trim().split(b.regex.delimiter).map(parseFloat)},reverse:function(){return this.value.reverse(),this},clone:function(){var t=new this.constructor;return t.value=n(this.value),t}}),b.PointArray=function(t,e){b.Array.call(this,t,e||[[0,0]])},b.PointArray.prototype=new b.Array,b.PointArray.prototype.constructor=b.PointArray,b.extend(b.PointArray,{toString:function(){for(var t=0,e=this.value.length,i=[];t<e;t++)i.push(this.value[t].join(","));return i.join(" ")},toLine:function(){return{x1:this.value[0][0],y1:this.value[0][1],x2:this.value[1][0],y2:this.value[1][1]}},at:function(t){if(!this.destination)return this;for(var e=0,i=this.value.length,n=[];e<i;e++)n.push([this.value[e][0]+(this.destination[e][0]-this.value[e][0])*t,this.value[e][1]+(this.destination[e][1]-this.value[e][1])*t]);return new b.PointArray(n)},parse:function(t){var e=[];if(t=t.valueOf(),Array.isArray(t)){if(Array.isArray(t[0]))return t.map(function(t){return t.slice()});if(null!=t[0].x)return t.map(function(t){return[t.x,t.y]})}else t=t.trim().split(b.regex.delimiter).map(parseFloat);t.length%2!=0&&t.pop();for(var i=0,n=t.length;i<n;i+=2)e.push([t[i],t[i+1]]);return e},move:function(t,e){var i=this.bbox();if(t-=i.x,e-=i.y,!isNaN(t)&&!isNaN(e))for(var n=this.value.length-1;n>=0;n--)this.value[n]=[this.value[n][0]+t,this.value[n][1]+e];return this},size:function(t,e){var i,n=this.bbox();for(i=this.value.length-1;i>=0;i--)n.width&&(this.value[i][0]=(this.value[i][0]-n.x)*t/n.width+n.x),n.height&&(this.value[i][1]=(this.value[i][1]-n.y)*e/n.height+n.y);return this},bbox:function(){return b.parser.poly.setAttribute("points",this.toString()),b.parser.poly.getBBox()}});for(var C={M:function(t,e,i){return e.x=i.x=t[0],e.y=i.y=t[1],["M",e.x,e.y]},L:function(t,e){return e.x=t[0],e.y=t[1],["L",t[0],t[1]]},H:function(t,e){return e.x=t[0],["H",t[0]]},V:function(t,e){return e.y=t[0],["V",t[0]]},C:function(t,e){return e.x=t[4],e.y=t[5],["C",t[0],t[1],t[2],t[3],t[4],t[5]]},S:function(t,e){return e.x=t[2],e.y=t[3],["S",t[0],t[1],t[2],t[3]]},Q:function(t,e){return e.x=t[2],e.y=t[3],["Q",t[0],t[1],t[2],t[3]]},T:function(t,e){return e.x=t[0],e.y=t[1],["T",t[0],t[1]]},Z:function(t,e,i){return e.x=i.x,e.y=i.y,["Z"]},A:function(t,e){return e.x=t[5],e.y=t[6],["A",t[0],t[1],t[2],t[3],t[4],t[5],t[6]]}},N="mlhvqtcsaz".split(""),A=0,M=N.length;A<M;++A)C[N[A]]=function(t){return function(e,i,n){if("H"==t)e[0]=e[0]+i.x;else if("V"==t)e[0]=e[0]+i.y;else if("A"==t)e[5]=e[5]+i.x,e[6]=e[6]+i.y;else for(var r=0,s=e.length;r<s;++r)e[r]=e[r]+(r%2?i.y:i.x);return C[t](e,i,n)}}(N[A].toUpperCase());b.PathArray=function(t,e){b.Array.call(this,t,e||[["M",0,0]])},b.PathArray.prototype=new b.Array,b.PathArray.prototype.constructor=b.PathArray,b.extend(b.PathArray,{toString:function(){return m(this.value)},move:function(t,e){var i=this.bbox();if(t-=i.x,e-=i.y,!isNaN(t)&&!isNaN(e))for(var n,r=this.value.length-1;r>=0;r--)n=this.value[r][0],"M"==n||"L"==n||"T"==n?(this.value[r][1]+=t,this.value[r][2]+=e):"H"==n?this.value[r][1]+=t:"V"==n?this.value[r][1]+=e:"C"==n||"S"==n||"Q"==n?(this.value[r][1]+=t,this.value[r][2]+=e,this.value[r][3]+=t,this.value[r][4]+=e,"C"==n&&(this.value[r][5]+=t,this.value[r][6]+=e)):"A"==n&&(this.value[r][6]+=t,this.value[r][7]+=e);return this},size:function(t,e){var i,n,r=this.bbox();for(i=this.value.length-1;i>=0;i--)n=this.value[i][0],"M"==n||"L"==n||"T"==n?(this.value[i][1]=(this.value[i][1]-r.x)*t/r.width+r.x,this.value[i][2]=(this.value[i][2]-r.y)*e/r.height+r.y):"H"==n?this.value[i][1]=(this.value[i][1]-r.x)*t/r.width+r.x:"V"==n?this.value[i][1]=(this.value[i][1]-r.y)*e/r.height+r.y:"C"==n||"S"==n||"Q"==n?(this.value[i][1]=(this.value[i][1]-r.x)*t/r.width+r.x,this.value[i][2]=(this.value[i][2]-r.y)*e/r.height+r.y,this.value[i][3]=(this.value[i][3]-r.x)*t/r.width+r.x,this.value[i][4]=(this.value[i][4]-r.y)*e/r.height+r.y,"C"==n&&(this.value[i][5]=(this.value[i][5]-r.x)*t/r.width+r.x,this.value[i][6]=(this.value[i][6]-r.y)*e/r.height+r.y)):"A"==n&&(this.value[i][1]=this.value[i][1]*t/r.width,this.value[i][2]=this.value[i][2]*e/r.height,this.value[i][6]=(this.value[i][6]-r.x)*t/r.width+r.x,this.value[i][7]=(this.value[i][7]-r.y)*e/r.height+r.y);return this},equalCommands:function(t){var e,i,n;for(t=new b.PathArray(t),n=this.value.length===t.value.length,e=0,i=this.value.length;n&&e<i;e++)n=this.value[e][0]===t.value[e][0];return n},morph:function(t){return t=new b.PathArray(t),this.equalCommands(t)?this.destination=t:this.destination=null,this},at:function(t){if(!this.destination)return this;var e,i,n,r,s=this.value,o=this.destination.value,a=[],h=new b.PathArray;for(e=0,i=s.length;e<i;e++){for(a[e]=[s[e][0]],n=1,r=s[e].length;n<r;n++)a[e][n]=s[e][n]+(o[e][n]-s[e][n])*t;"A"===a[e][0]&&(a[e][4]=+(0!=a[e][4]),a[e][5]=+(0!=a[e][5]))}return h.value=a,h},parse:function(t){if(t instanceof b.PathArray)return t.valueOf();var e,n,r={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};t="string"==typeof t?t.replace(b.regex.numbersWithDots,i).replace(b.regex.pathLetters," $& ").replace(b.regex.hyphen,"$1 -").trim().split(b.regex.delimiter):t.reduce(function(t,e){return[].concat.call(t,e)},[]);var n=[],s=new b.Point,o=new b.Point,a=0,h=t.length;do{b.regex.isPathLetter.test(t[a])?(e=t[a],++a):"M"==e?e="L":"m"==e&&(e="l"),n.push(C[e].call(null,t.slice(a,a+=r[e.toUpperCase()]).map(parseFloat),s,o))}while(h>a);return n},bbox:function(){return b.parser.path.setAttribute("d",this.toString()),b.parser.path.getBBox()}}),b.Number=b.invent({create:function(t,e){this.value=0,this.unit=e||"","number"==typeof t?this.value=isNaN(t)?0:isFinite(t)?t:t<0?-3.4e38:3.4e38:"string"==typeof t?(e=t.match(b.regex.numberAndUnit))&&(this.value=parseFloat(e[1]),"%"==e[5]?this.value/=100:"s"==e[5]&&(this.value*=1e3),this.unit=e[5]):t instanceof b.Number&&(this.value=t.valueOf(),this.unit=t.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(t){return t=new b.Number(t),new b.Number(this+t,this.unit||t.unit)},minus:function(t){return t=new b.Number(t),new b.Number(this-t,this.unit||t.unit)},times:function(t){return t=new b.Number(t),new b.Number(this*t,this.unit||t.unit)},divide:function(t){return t=new b.Number(t),new b.Number(this/t,this.unit||t.unit)},to:function(t){var e=new b.Number(this);return"string"==typeof t&&(e.unit=t),e},morph:function(t){return this.destination=new b.Number(t),t.relative&&(this.destination.value+=this.value),this},at:function(t){return this.destination?new b.Number(this.destination).minus(this).times(t).plus(this):this}}}),b.Element=b.invent({create:function(t){this._stroke=b.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=t)&&(this.type=t.nodeName,this.node.instance=this,this._stroke=t.getAttribute("stroke")||this._stroke)},extend:{x:function(t){return this.attr("x",t)},y:function(t){return this.attr("y",t)},cx:function(t){return null==t?this.x()+this.width()/2:this.x(t-this.width()/2)},cy:function(t){return null==t?this.y()+this.height()/2:this.y(t-this.height()/2)},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},width:function(t){return this.attr("width",t)},height:function(t){return this.attr("height",t)},size:function(t,e){var i=l(this,t,e);return this.width(new b.Number(i.width)).height(new b.Number(i.height))},clone:function(t){this.writeDataToDom();var e=x(this.node.cloneNode(!0));return t?t.add(e):this.after(e),e},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(t){return this.after(t).remove(),t},addTo:function(t){return t.put(this)},putIn:function(t){return t.add(this)},id:function(t){return this.attr("id",t)},inside:function(t,e){var i=this.bbox();return t>i.x&&e>i.y&&t<i.x+i.width&&e<i.y+i.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var t=this.attr("class");return null==t?[]:t.trim().split(b.regex.delimiter)},hasClass:function(t){return-1!=this.classes().indexOf(t)},addClass:function(t){if(!this.hasClass(t)){var e=this.classes();e.push(t),this.attr("class",e.join(" "))}return this},removeClass:function(t){return this.hasClass(t)&&this.attr("class",this.classes().filter(function(e){return e!=t}).join(" ")),this},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)},reference:function(t){return b.get(this.attr(t))},parent:function(e){var i=this;if(!i.node.parentNode)return null;if(i=b.adopt(i.node.parentNode),!e)return i;for(;i&&i.node instanceof t.SVGElement;){if("string"==typeof e?i.matches(e):i instanceof e)return i;if(!i.node.parentNode||"#document"==i.node.parentNode.nodeName)return null;i=b.adopt(i.node.parentNode)}},doc:function(){return this instanceof b.Doc?this:this.parent(b.Doc)},parents:function(t){var e=[],i=this;do{if(!(i=i.parent(t))||!i.node)break;e.push(i)}while(i.parent);return e},matches:function(t){return s(this.node,t)},native:function(){return this.node},svg:function(t){var i=e.createElement("svg");if(!(t&&this instanceof b.Parent))return i.appendChild(t=e.createElement("svg")),this.writeDataToDom(),t.appendChild(this.node.cloneNode(!0)),i.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");i.innerHTML="<svg>"+t.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var n=0,r=i.firstChild.childNodes.length;n<r;n++)this.node.appendChild(i.firstChild.firstChild);return this},writeDataToDom:function(){if(this.each||this.lines){(this.each?this:this.lines()).each(function(){this.writeDataToDom()})}return this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(t){return this.dom=t,this},is:function(t){return r(this,t)}}}),b.easing={"-":function(t){return t},"<>":function(t){return-Math.cos(t*Math.PI)/2+.5},">":function(t){return Math.sin(t*Math.PI/2)},"<":function(t){return 1-Math.cos(t*Math.PI/2)}},b.morph=function(t){return function(e,i){return new b.MorphObj(e,i).at(t)}},b.Situation=b.invent({create:function(t){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new b.Number(t.duration).valueOf(),this.delay=new b.Number(t.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=t.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),b.FX=b.invent({create:function(t){this._target=t,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(t,e,i){"object"==typeof t&&(e=t.ease,i=t.delay,t=t.duration);var n=new b.Situation({duration:t||1e3,delay:i||0,ease:b.easing[e||"-"]||e});return this.queue(n),this},delay:function(t){var e=new b.Situation({duration:t,delay:0,ease:b.easing["-"]});return this.queue(e)},target:function(t){return t&&t instanceof b.Element?(this._target=t,this):this._target},timeToAbsPos:function(t){return(t-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(t){return this.situation.duration/this._speed*t+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=t.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){t.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(t){return("function"==typeof t||t instanceof b.Situation)&&this.situations.push(t),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof b.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var t,e,i,n=this.situation;if(n.init)return this;for(t in n.animations)for(i=this.target()[t](),Array.isArray(i)||(i=[i]),Array.isArray(n.animations[t])||(n.animations[t]=[n.animations[t]]),e=i.length;e--;)n.animations[t][e]instanceof b.Number&&(i[e]=new b.Number(i[e])),n.animations[t][e]=i[e].morph(n.animations[t][e]);for(t in n.attrs)n.attrs[t]=new b.MorphObj(this.target().attr(t),n.attrs[t]);for(t in n.styles)n.styles[t]=new b.MorphObj(this.target().style(t),n.styles[t]);return n.initialTransformation=this.target().matrixify(),n.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(t,e){var i=this.active;return this.active=!1,e&&this.clearQueue(),t&&this.situation&&(!i&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},reset:function(){if(this.situation){var t=this.situation;this.stop(),this.situation=t,this.atStart()}return this},finish:function(){for(this.stop(!0,!1);this.dequeue().situation&&this.stop(!0,!1););return this.clearQueue().clearCurrent(),this},atStart:function(){return this.at(0,!0)},atEnd:function(){return!0===this.situation.loops&&(this.situation.loops=this.situation.loop+1),"number"==typeof this.situation.loops?this.at(this.situation.loops,!0):this.at(1,!0)},at:function(t,e){var i=this.situation.duration/this._speed;return this.absPos=t,e||(this.situation.reversed&&(this.absPos=1-this.absPos),this.absPos+=this.situation.loop),this.situation.start=+new Date-this.absPos*i,this.situation.finish=this.situation.start+i,this.step(!0)},speed:function(t){return 0===t?this.pause():t?(this._speed=t,this.at(this.absPos,!0)):this._speed},loop:function(t,e){var i=this.last();return i.loops=null==t||t,i.loop=0,e&&(i.reversing=!0),this},pause:function(){return this.paused=!0,this.stopAnimFrame(),this},play:function(){return this.paused?(this.paused=!1,this.at(this.absPos,!0)):this},reverse:function(t){var e=this.last();return e.reversed=void 0===t?!e.reversed:t,this},progress:function(t){return t?this.situation.ease(this.pos):this.pos},after:function(t){var e=this.last(),i=function i(n){n.detail.situation==e&&(t.call(this,e),this.off("finished.fx",i))};return this.target().on("finished.fx",i),this._callStart()},during:function(t){var e=this.last(),i=function(i){i.detail.situation==e&&t.call(this,i.detail.pos,b.morph(i.detail.pos),i.detail.eased,e)};return this.target().off("during.fx",i).on("during.fx",i),this.after(function(){this.off("during.fx",i)}),this._callStart()},afterAll:function(t){var e=function e(i){t.call(this),this.off("allfinished.fx",e)};return this.target().off("allfinished.fx",e).on("allfinished.fx",e),this._callStart()},duringAll:function(t){var e=function(e){t.call(this,e.detail.pos,b.morph(e.detail.pos),e.detail.eased,e.detail.situation)};return this.target().off("during.fx",e).on("during.fx",e),this.afterAll(function(){this.off("during.fx",e)}),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(t,e,i){return this.last()[i||"animations"][t]=e,this._callStart()},step:function(t){if(t||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops){var e,i,n;e=Math.max(this.absPos,0),i=Math.floor(e),!0===this.situation.loops||i<this.situation.loops?(this.pos=e-i,n=this.situation.loop,this.situation.loop=i):(this.absPos=this.situation.loops,this.pos=1,n=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=Boolean((this.situation.loop-n)%2))}else this.absPos=Math.min(this.absPos,1),this.pos=this.absPos;this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var r=this.situation.ease(this.pos);for(var s in this.situation.once)s>this.lastPos&&s<=r&&(this.situation.once[s].call(this.target(),this.pos,r),delete this.situation.once[s]);return this.active&&this.target().fire("during",{pos:this.pos,eased:r,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=r,this):this},eachAt:function(){var t,e,i,n=this,r=this.target(),s=this.situation;for(t in s.animations)i=[].concat(s.animations[t]).map(function(t){return"string"!=typeof t&&t.at?t.at(s.ease(n.pos),n.pos):t}),r[t].apply(r,i);for(t in s.attrs)i=[t].concat(s.attrs[t]).map(function(t){return"string"!=typeof t&&t.at?t.at(s.ease(n.pos),n.pos):t}),r.attr.apply(r,i);for(t in s.styles)i=[t].concat(s.styles[t]).map(function(t){return"string"!=typeof t&&t.at?t.at(s.ease(n.pos),n.pos):t}),r.style.apply(r,i);if(s.transforms.length){for(i=s.initialTransformation,t=0,e=s.transforms.length;t<e;t++){var o=s.transforms[t];o instanceof b.Matrix?i=o.relative?i.multiply((new b.Matrix).morph(o).at(s.ease(this.pos))):i.morph(o).at(s.ease(this.pos)):(o.relative||o.undo(i.extract()),i=i.multiply(o.at(s.ease(this.pos))))}r.matrix(i)}return this},once:function(t,e,i){var n=this.last();return i||(t=n.ease(t)),n.once[t]=e,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:b.Element,construct:{animate:function(t,e,i){return(this.fx||(this.fx=new b.FX(this))).animate(t,e,i)},delay:function(t){return(this.fx||(this.fx=new b.FX(this))).delay(t)},stop:function(t,e){return this.fx&&this.fx.stop(t,e),this},finish:function(){return this.fx&&this.fx.finish(),this},pause:function(){return this.fx&&this.fx.pause(),this},play:function(){return this.fx&&this.fx.play(),this},speed:function(t){if(this.fx){if(null==t)return this.fx.speed();this.fx.speed(t)}return this}}}),b.MorphObj=b.invent({create:function(t,e){return b.Color.isColor(e)?new b.Color(t).morph(e):b.regex.delimiter.test(t)?b.regex.pathLetters.test(t)?new b.PathArray(t).morph(e):new b.Array(t).morph(e):b.regex.numberAndUnit.test(e)?new b.Number(t).morph(e):(this.value=t,void(this.destination=e))},extend:{at:function(t,e){return e<1?this.value:this.destination},valueOf:function(){return this.value}}}),b.extend(b.FX,{attr:function(t,e,i){if("object"==typeof t)for(var n in t)this.attr(n,t[n]);else this.add(t,e,"attrs");return this},style:function(t,e){if("object"==typeof t)for(var i in t)this.style(i,t[i]);else this.add(t,e,"styles");return this},x:function(t,e){if(this.target()instanceof b.G)return this.transform({x:t},e),this;var i=new b.Number(t);return i.relative=e,this.add("x",i)},y:function(t,e){if(this.target()instanceof b.G)return this.transform({y:t},e),this;var i=new b.Number(t);return i.relative=e,this.add("y",i)},cx:function(t){return this.add("cx",new b.Number(t))},cy:function(t){return this.add("cy",new b.Number(t))},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},size:function(t,e){if(this.target()instanceof b.Text)this.attr("font-size",t);else{var i;t&&e||(i=this.target().bbox()),t||(t=i.width/i.height*e),e||(e=i.height/i.width*t),this.add("width",new b.Number(t)).add("height",new b.Number(e))}return this},width:function(t){return this.add("width",new b.Number(t))},height:function(t){return this.add("height",new b.Number(t))},plot:function(t,e,i,n){return 4==arguments.length?this.plot([t,e,i,n]):this.add("plot",new(this.target().morphArray)(t))},leading:function(t){return this.target().leading?this.add("leading",new b.Number(t)):this},viewbox:function(t,e,i,n){return this.target()instanceof b.Container&&this.add("viewbox",new b.ViewBox(t,e,i,n)),this},update:function(t){if(this.target()instanceof b.Stop){if("number"==typeof t||t instanceof b.Number)return this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]});null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",t.offset)}return this}}),b.Box=b.invent({create:function(t,e,i,n){if(!("object"!=typeof t||t instanceof b.Element))return b.Box.call(this,null!=t.left?t.left:t.x,null!=t.top?t.top:t.y,t.width,t.height);4==arguments.length&&(this.x=t,this.y=e,this.width=i,this.height=n),y(this)},extend:{merge:function(t){var e=new this.constructor;return e.x=Math.min(this.x,t.x),e.y=Math.min(this.y,t.y),e.width=Math.max(this.x+this.width,t.x+t.width)-e.x,e.height=Math.max(this.y+this.height,t.y+t.height)-e.y,y(e)},transform:function(t){var e,i=1/0,n=-1/0,r=1/0,s=-1/0;return[new b.Point(this.x,this.y),new b.Point(this.x2,this.y),new b.Point(this.x,this.y2),new b.Point(this.x2,this.y2)].forEach(function(e){e=e.transform(t),i=Math.min(i,e.x),n=Math.max(n,e.x),r=Math.min(r,e.y),s=Math.max(s,e.y)}),e=new this.constructor,e.x=i,e.width=n-i,e.y=r,e.height=s-r,y(e),e}}}),b.BBox=b.invent({create:function(t){if(b.Box.apply(this,[].slice.call(arguments)),t instanceof b.Element){var i;try{if(e.documentElement.contains){if(!e.documentElement.contains(t.node))throw new Exception("Element not in the dom")}else{for(var n=t.node;n.parentNode;)n=n.parentNode;if(n!=e)throw new Exception("Element not in the dom")}i=t.node.getBBox()}catch(e){if(t instanceof b.Shape){var r=t.clone(b.parser.draw.instance).show();i=r.node.getBBox(),r.remove()}else i={x:t.node.clientLeft,y:t.node.clientTop,width:t.node.clientWidth,height:t.node.clientHeight}}b.Box.call(this,i)}},inherit:b.Box,parent:b.Element,construct:{bbox:function(){return new b.BBox(this)}}}),b.BBox.prototype.constructor=b.BBox,b.extend(b.Element,{tbox:function(){return console.warn("Use of TBox is deprecated and mapped to RBox. Use .rbox() instead."),this.rbox(this.doc())}}),b.RBox=b.invent({create:function(t){b.Box.apply(this,[].slice.call(arguments)),t instanceof b.Element&&b.Box.call(this,t.node.getBoundingClientRect())},inherit:b.Box,parent:b.Element,extend:{addOffset:function(){return this.x+=t.pageXOffset,this.y+=t.pageYOffset,this}},construct:{rbox:function(t){return t?new b.RBox(this).transform(t.screenCTM().inverse()):new b.RBox(this).addOffset()}}}),b.RBox.prototype.constructor=b.RBox,b.Matrix=b.invent({create:function(t){var e,i=f([1,0,0,1,0,0]);for(t=t instanceof b.Element?t.matrixify():"string"==typeof t?f(t.split(b.regex.delimiter).map(parseFloat)):6==arguments.length?f([].slice.call(arguments)):Array.isArray(t)?f(t):"object"==typeof t?t:i,e=k.length-1;e>=0;--e)this[k[e]]=null!=t[k[e]]?t[k[e]]:i[k[e]]},extend:{extract:function(){var t=c(this,0,1),e=c(this,1,0),i=180/Math.PI*Math.atan2(t.y,t.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(i*Math.PI/180)+this.f*Math.sin(i*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(i*Math.PI/180)+this.e*Math.sin(-i*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),skewX:-i,skewY:180/Math.PI*Math.atan2(e.y,e.x),scaleX:Math.sqrt(this.a*this.a+this.b*this.b),scaleY:Math.sqrt(this.c*this.c+this.d*this.d),rotation:i,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new b.Matrix(this)}},clone:function(){return new b.Matrix(this)},morph:function(t){return this.destination=new b.Matrix(t),this},at:function(t){return this.destination?new b.Matrix({a:this.a+(this.destination.a-this.a)*t,b:this.b+(this.destination.b-this.b)*t,c:this.c+(this.destination.c-this.c)*t,d:this.d+(this.destination.d-this.d)*t,e:this.e+(this.destination.e-this.e)*t,f:this.f+(this.destination.f-this.f)*t}):this},multiply:function(t){return new b.Matrix(this.native().multiply(d(t).native()))},inverse:function(){return new b.Matrix(this.native().inverse())},translate:function(t,e){return new b.Matrix(this.native().translate(t||0,e||0))},scale:function(t,e,i,n){return 1==arguments.length?e=t:3==arguments.length&&(n=i,i=e,e=t),this.around(i,n,new b.Matrix(t,0,0,e,0,0))},rotate:function(t,e,i){return t=b.utils.radians(t),this.around(e,i,new b.Matrix(Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0))},flip:function(t,e){return"x"==t?this.scale(-1,1,e,0):"y"==t?this.scale(1,-1,0,e):this.scale(-1,-1,t,null!=e?e:t)},skew:function(t,e,i,n){return 1==arguments.length?e=t:3==arguments.length&&(n=i,i=e,e=t),t=b.utils.radians(t),e=b.utils.radians(e),
this.around(i,n,new b.Matrix(1,Math.tan(e),Math.tan(t),1,0,0))},skewX:function(t,e,i){return this.skew(t,0,e,i)},skewY:function(t,e,i){return this.skew(0,t,e,i)},around:function(t,e,i){return this.multiply(new b.Matrix(1,0,0,1,t||0,e||0)).multiply(i).multiply(new b.Matrix(1,0,0,1,-t||0,-e||0))},native:function(){for(var t=b.parser.native.createSVGMatrix(),e=k.length-1;e>=0;e--)t[k[e]]=this[k[e]];return t},toString:function(){return"matrix("+g(this.a)+","+g(this.b)+","+g(this.c)+","+g(this.d)+","+g(this.e)+","+g(this.f)+")"}},parent:b.Element,construct:{ctm:function(){return new b.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof b.Nested){var t=this.rect(1,1),e=t.node.getScreenCTM();return t.remove(),new b.Matrix(e)}return new b.Matrix(this.node.getScreenCTM())}}}),b.Point=b.invent({create:function(t,e){var i,n={x:0,y:0};i=Array.isArray(t)?{x:t[0],y:t[1]}:"object"==typeof t?{x:t.x,y:t.y}:null!=t?{x:t,y:null!=e?e:t}:n,this.x=i.x,this.y=i.y},extend:{clone:function(){return new b.Point(this)},morph:function(t,e){return this.destination=new b.Point(t,e),this},at:function(t){return this.destination?new b.Point({x:this.x+(this.destination.x-this.x)*t,y:this.y+(this.destination.y-this.y)*t}):this},native:function(){var t=b.parser.native.createSVGPoint();return t.x=this.x,t.y=this.y,t},transform:function(t){return new b.Point(this.native().matrixTransform(t.native()))}}}),b.extend(b.Element,{point:function(t,e){return new b.Point(t,e).transform(this.screenCTM().inverse())}}),b.extend(b.Element,{attr:function(t,e,i){if(null==t){for(t={},e=this.node.attributes,i=e.length-1;i>=0;i--)t[e[i].nodeName]=b.regex.isNumber.test(e[i].nodeValue)?parseFloat(e[i].nodeValue):e[i].nodeValue;return t}if("object"==typeof t)for(e in t)this.attr(e,t[e]);else if(null===e)this.node.removeAttribute(t);else{if(null==e)return e=this.node.getAttribute(t),null==e?b.defaults.attrs[t]:b.regex.isNumber.test(e)?parseFloat(e):e;"stroke-width"==t?this.attr("stroke",parseFloat(e)>0?this._stroke:null):"stroke"==t&&(this._stroke=e),"fill"!=t&&"stroke"!=t||(b.regex.isImage.test(e)&&(e=this.doc().defs().image(e,0,0)),e instanceof b.Image&&(e=this.doc().defs().pattern(0,0,function(){this.add(e)}))),"number"==typeof e?e=new b.Number(e):b.Color.isColor(e)?e=new b.Color(e):Array.isArray(e)&&(e=new b.Array(e)),"leading"==t?this.leading&&this.leading(e):"string"==typeof i?this.node.setAttributeNS(i,t,e.toString()):this.node.setAttribute(t,e.toString()),!this.rebuild||"font-size"!=t&&"x"!=t||this.rebuild(t,e)}return this}}),b.extend(b.Element,{transform:function(t,e){var i,n,r=this;if("object"!=typeof t)return i=new b.Matrix(r).extract(),"string"==typeof t?i[t]:i;if(i=new b.Matrix(r),e=!!e||!!t.relative,null!=t.a)i=e?i.multiply(new b.Matrix(t)):new b.Matrix(t);else if(null!=t.rotation)p(t,r),i=e?i.rotate(t.rotation,t.cx,t.cy):i.rotate(t.rotation-i.extract().rotation,t.cx,t.cy);else if(null!=t.scale||null!=t.scaleX||null!=t.scaleY){if(p(t,r),t.scaleX=null!=t.scale?t.scale:null!=t.scaleX?t.scaleX:1,t.scaleY=null!=t.scale?t.scale:null!=t.scaleY?t.scaleY:1,!e){var s=i.extract();t.scaleX=1*t.scaleX/s.scaleX,t.scaleY=1*t.scaleY/s.scaleY}i=i.scale(t.scaleX,t.scaleY,t.cx,t.cy)}else if(null!=t.skew||null!=t.skewX||null!=t.skewY){if(p(t,r),t.skewX=null!=t.skew?t.skew:null!=t.skewX?t.skewX:0,t.skewY=null!=t.skew?t.skew:null!=t.skewY?t.skewY:0,!e){var s=i.extract();i=i.multiply((new b.Matrix).skew(s.skewX,s.skewY,t.cx,t.cy).inverse())}i=i.skew(t.skewX,t.skewY,t.cx,t.cy)}else t.flip?("x"==t.flip||"y"==t.flip?t.offset=null==t.offset?r.bbox()["c"+t.flip]:t.offset:null==t.offset?(n=r.bbox(),t.flip=n.cx,t.offset=n.cy):t.flip=t.offset,i=(new b.Matrix).flip(t.flip,t.offset)):null==t.x&&null==t.y||(e?i=i.translate(t.x,t.y):(null!=t.x&&(i.e=t.x),null!=t.y&&(i.f=t.y)));return this.attr("transform",i)}}),b.extend(b.FX,{transform:function(t,e){var i,n,r=this.target();return"object"!=typeof t?(i=new b.Matrix(r).extract(),"string"==typeof t?i[t]:i):(e=!!e||!!t.relative,null!=t.a?i=new b.Matrix(t):null!=t.rotation?(p(t,r),i=new b.Rotate(t.rotation,t.cx,t.cy)):null!=t.scale||null!=t.scaleX||null!=t.scaleY?(p(t,r),t.scaleX=null!=t.scale?t.scale:null!=t.scaleX?t.scaleX:1,t.scaleY=null!=t.scale?t.scale:null!=t.scaleY?t.scaleY:1,i=new b.Scale(t.scaleX,t.scaleY,t.cx,t.cy)):null!=t.skewX||null!=t.skewY?(p(t,r),t.skewX=null!=t.skewX?t.skewX:0,t.skewY=null!=t.skewY?t.skewY:0,i=new b.Skew(t.skewX,t.skewY,t.cx,t.cy)):t.flip?("x"==t.flip||"y"==t.flip?t.offset=null==t.offset?r.bbox()["c"+t.flip]:t.offset:null==t.offset?(n=r.bbox(),t.flip=n.cx,t.offset=n.cy):t.flip=t.offset,i=(new b.Matrix).flip(t.flip,t.offset)):null==t.x&&null==t.y||(i=new b.Translate(t.x,t.y)),i?(i.relative=e,this.last().transforms.push(i),this._callStart()):this)}}),b.extend(b.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(b.regex.transforms).slice(0,-1).map(function(t){var e=t.trim().split("(");return[e[0],e[1].split(b.regex.delimiter).map(function(t){return parseFloat(t)})]}).reduce(function(t,e){return"matrix"==e[0]?t.multiply(f(e[1])):t[e[0]].apply(t,e[1])},new b.Matrix)},toParent:function(t){if(this==t)return this;var e=this.screenCTM(),i=t.screenCTM().inverse();return this.addTo(t).untransform().transform(i.multiply(e)),this},toDoc:function(){return this.toParent(this.doc())}}),b.Transformation=b.invent({create:function(t,e){if(arguments.length>1&&"boolean"!=typeof e)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(t))for(var i=0,n=this.arguments.length;i<n;++i)this[this.arguments[i]]=t[i];else if("object"==typeof t)for(var i=0,n=this.arguments.length;i<n;++i)this[this.arguments[i]]=t[this.arguments[i]];this.inversed=!1,!0===e&&(this.inversed=!0)},extend:{arguments:[],method:"",at:function(t){for(var e=[],i=0,n=this.arguments.length;i<n;++i)e.push(this[this.arguments[i]]);var r=this._undo||new b.Matrix;return r=(new b.Matrix).morph(b.Matrix.prototype[this.method].apply(r,e)).at(t),this.inversed?r.inverse():r},undo:function(t){for(var e=0,i=this.arguments.length;e<i;++e)t[this.arguments[e]]=void 0===this[this.arguments[e]]?0:t[this.arguments[e]];return t.cx=this.cx,t.cy=this.cy,this._undo=new(b[a(this.method)])(t,!0).at(1),this}}}),b.Translate=b.invent({parent:b.Matrix,inherit:b.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),b.Rotate=b.invent({parent:b.Matrix,inherit:b.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["rotation","cx","cy"],method:"rotate",at:function(t){var e=(new b.Matrix).rotate((new b.Number).morph(this.rotation-(this._undo?this._undo.rotation:0)).at(t),this.cx,this.cy);return this.inversed?e.inverse():e},undo:function(t){return this._undo=t,this}}}),b.Scale=b.invent({parent:b.Matrix,inherit:b.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["scaleX","scaleY","cx","cy"],method:"scale"}}),b.Skew=b.invent({parent:b.Matrix,inherit:b.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["skewX","skewY","cx","cy"],method:"skew"}}),b.extend(b.Element,{style:function(t,e){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"==typeof t)for(e in t)this.style(e,t[e]);else{if(!b.regex.isCss.test(t))return this.node.style[o(t)];for(t=t.split(/\s*;\s*/).filter(function(t){return!!t}).map(function(t){return t.split(/\s*:\s*/)});e=t.pop();)this.style(e[0],e[1])}else this.node.style[o(t)]=null===e||b.regex.isBlank.test(e)?"":e;return this}}),b.Parent=b.invent({create:function(t){this.constructor.call(this,t)},inherit:b.Element,extend:{children:function(){return b.utils.map(b.utils.filterSVGElements(this.node.childNodes),function(t){return b.adopt(t)})},add:function(t,e){return null==e?this.node.appendChild(t.node):t.node!=this.node.childNodes[e]&&this.node.insertBefore(t.node,this.node.childNodes[e]),this},put:function(t,e){return this.add(t,e),t},has:function(t){return this.index(t)>=0},index:function(t){return[].slice.call(this.node.childNodes).indexOf(t.node)},get:function(t){return b.adopt(this.node.childNodes[t])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(t,e){var i,n,r=this.children();for(i=0,n=r.length;i<n;i++)r[i]instanceof b.Element&&t.apply(r[i],[i,r]),e&&r[i]instanceof b.Container&&r[i].each(t,e);return this},removeElement:function(t){return this.node.removeChild(t.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),b.extend(b.Parent,{ungroup:function(t,e){return 0===e||this instanceof b.Defs||this.node==b.parser.draw?this:(t=t||(this instanceof b.Doc?this:this.parent(b.Parent)),e=e||1/0,this.each(function(){return this instanceof b.Defs?this:this instanceof b.Parent?this.ungroup(t,e-1):this.toParent(t)}),this.node.firstChild||this.remove(),this)},flatten:function(t,e){return this.ungroup(t,e)}}),b.Container=b.invent({create:function(t){this.constructor.call(this,t)},inherit:b.Parent}),b.ViewBox=b.invent({create:function(t){var e,i,n,r,s,o,a,h=[0,0,0,0],u=1,l=1,c=/[+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?/gi;if(t instanceof b.Element){for(o=t,a=t,s=(t.attr("viewBox")||"").match(c),t.bbox,n=new b.Number(t.width()),r=new b.Number(t.height());"%"==n.unit;)u*=n.value,n=new b.Number(o instanceof b.Doc?o.parent().offsetWidth:o.parent().width()),o=o.parent();for(;"%"==r.unit;)l*=r.value,r=new b.Number(a instanceof b.Doc?a.parent().offsetHeight:a.parent().height()),a=a.parent();this.x=0,this.y=0,this.width=n*u,this.height=r*l,this.zoom=1,s&&(e=parseFloat(s[0]),i=parseFloat(s[1]),n=parseFloat(s[2]),r=parseFloat(s[3]),this.zoom=this.width/this.height>n/r?this.height/r:this.width/n,this.x=e,this.y=i,this.width=n,this.height=r)}else t="string"==typeof t?t.match(c).map(function(t){return parseFloat(t)}):Array.isArray(t)?t:"object"==typeof t?[t.x,t.y,t.width,t.height]:4==arguments.length?[].slice.call(arguments):h,this.x=t[0],this.y=t[1],this.width=t[2],this.height=t[3]},extend:{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height},morph:function(t,e,i,n){return this.destination=new b.ViewBox(t,e,i,n),this},at:function(t){return this.destination?new b.ViewBox([this.x+(this.destination.x-this.x)*t,this.y+(this.destination.y-this.y)*t,this.width+(this.destination.width-this.width)*t,this.height+(this.destination.height-this.height)*t]):this}},parent:b.Container,construct:{viewbox:function(t,e,i,n){return 0==arguments.length?new b.ViewBox(this):this.attr("viewBox",new b.ViewBox(t,e,i,n))}}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(t){b.Element.prototype[t]=function(e){return b.on(this.node,t,e),this}}),b.listeners=[],b.handlerMap=[],b.listenerId=0,b.on=function(t,e,i,n,r){var s=i.bind(n||t.instance||t),o=(b.handlerMap.indexOf(t)+1||b.handlerMap.push(t))-1,a=e.split(".")[0],h=e.split(".")[1]||"*";b.listeners[o]=b.listeners[o]||{},b.listeners[o][a]=b.listeners[o][a]||{},b.listeners[o][a][h]=b.listeners[o][a][h]||{},i._svgjsListenerId||(i._svgjsListenerId=++b.listenerId),b.listeners[o][a][h][i._svgjsListenerId]=s,t.addEventListener(a,s,r||!1)},b.off=function(t,e,i){var n=b.handlerMap.indexOf(t),r=e&&e.split(".")[0],s=e&&e.split(".")[1],o="";if(-1!=n)if(i){if("function"==typeof i&&(i=i._svgjsListenerId),!i)return;b.listeners[n][r]&&b.listeners[n][r][s||"*"]&&(t.removeEventListener(r,b.listeners[n][r][s||"*"][i],!1),delete b.listeners[n][r][s||"*"][i])}else if(s&&r){if(b.listeners[n][r]&&b.listeners[n][r][s]){for(i in b.listeners[n][r][s])b.off(t,[r,s].join("."),i);delete b.listeners[n][r][s]}}else if(s)for(e in b.listeners[n])for(o in b.listeners[n][e])s===o&&b.off(t,[e,s].join("."));else if(r){if(b.listeners[n][r]){for(o in b.listeners[n][r])b.off(t,[r,o].join("."));delete b.listeners[n][r]}}else{for(e in b.listeners[n])b.off(t,e);delete b.listeners[n],delete b.handlerMap[n]}},b.extend(b.Element,{on:function(t,e,i,n){return b.on(this.node,t,e,i,n),this},off:function(t,e){return b.off(this.node,t,e),this},fire:function(e,i){return e instanceof t.Event?this.node.dispatchEvent(e):this.node.dispatchEvent(e=new b.CustomEvent(e,{detail:i,cancelable:!0})),this._event=e,this},event:function(){return this._event}}),b.Defs=b.invent({create:"defs",inherit:b.Container}),b.G=b.invent({create:"g",inherit:b.Container,extend:{x:function(t){return null==t?this.transform("x"):this.transform({x:t-this.x()},!0)},y:function(t){return null==t?this.transform("y"):this.transform({y:t-this.y()},!0)},cx:function(t){return null==t?this.gbox().cx:this.x(t-this.gbox().width/2)},cy:function(t){return null==t?this.gbox().cy:this.y(t-this.gbox().height/2)},gbox:function(){var t=this.bbox(),e=this.transform();return t.x+=e.x,t.x2+=e.x,t.cx+=e.x,t.y+=e.y,t.y2+=e.y,t.cy+=e.y,t}},construct:{group:function(){return this.put(new b.G)}}}),b.Doc=b.invent({create:function(t){t&&(t="string"==typeof t?e.getElementById(t):t,"svg"==t.nodeName?this.constructor.call(this,t):(this.constructor.call(this,b.create("svg")),t.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:b.Container,extend:{namespace:function(){return this.attr({xmlns:b.ns,version:"1.1"}).attr("xmlns:xlink",b.xlink,b.xmlns).attr("xmlns:svgjs",b.svgjs,b.xmlns)},defs:function(){if(!this._defs){var t;(t=this.node.getElementsByTagName("defs")[0])?this._defs=b.adopt(t):this._defs=new b.Defs,this.node.appendChild(this._defs.node)}return this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName?this.node.parentNode:null},spof:function(){var t=this.node.getScreenCTM();return t&&this.style("left",-t.e%1+"px").style("top",-t.f%1+"px"),this},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,b.parser.draw.parentNode||this.node.appendChild(b.parser.draw),this},clone:function(t){this.writeDataToDom();var e=this.node,i=x(e.cloneNode(!0));return t?(t.node||t).appendChild(i.node):e.parentNode.insertBefore(i.node,e.nextSibling),i}}}),b.extend(b.Element,{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var t=this.position()+1,e=this.parent();return e.removeElement(this).add(this,t),e instanceof b.Doc&&e.node.appendChild(e.defs().node),this},backward:function(){var t=this.position();return t>0&&this.parent().removeElement(this).add(this,t-1),this},front:function(){var t=this.parent();return t.node.appendChild(this.node),t instanceof b.Doc&&t.node.appendChild(t.defs().node),this},back:function(){return this.position()>0&&this.parent().removeElement(this).add(this,0),this},before:function(t){t.remove();var e=this.position();return this.parent().add(t,e),this},after:function(t){t.remove();var e=this.position();return this.parent().add(t,e+1),this}}),b.Mask=b.invent({create:function(){this.constructor.call(this,b.create("mask")),this.targets=[]},inherit:b.Container,extend:{remove:function(){for(var t=this.targets.length-1;t>=0;t--)this.targets[t]&&this.targets[t].unmask();return this.targets=[],b.Element.prototype.remove.call(this),this}},construct:{mask:function(){return this.defs().put(new b.Mask)}}}),b.extend(b.Element,{maskWith:function(t){return this.masker=t instanceof b.Mask?t:this.parent().mask().add(t),this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}}),b.ClipPath=b.invent({create:function(){this.constructor.call(this,b.create("clipPath")),this.targets=[]},inherit:b.Container,extend:{remove:function(){for(var t=this.targets.length-1;t>=0;t--)this.targets[t]&&this.targets[t].unclip();return this.targets=[],this.parent().removeElement(this),this}},construct:{clip:function(){return this.defs().put(new b.ClipPath)}}}),b.extend(b.Element,{clipWith:function(t){return this.clipper=t instanceof b.ClipPath?t:this.parent().clip().add(t),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),b.Gradient=b.invent({create:function(t){this.constructor.call(this,b.create(t+"Gradient")),this.type=t},inherit:b.Container,extend:{at:function(t,e,i){return this.put(new b.Stop).update(t,e,i)},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(t,e,i){return"transform"==t&&(t="gradientTransform"),b.Container.prototype.attr.call(this,t,e,i)}},construct:{gradient:function(t,e){return this.defs().gradient(t,e)}}}),b.extend(b.Gradient,b.FX,{from:function(t,e){return"radial"==(this._target||this).type?this.attr({fx:new b.Number(t),fy:new b.Number(e)}):this.attr({x1:new b.Number(t),y1:new b.Number(e)})},to:function(t,e){return"radial"==(this._target||this).type?this.attr({cx:new b.Number(t),cy:new b.Number(e)}):this.attr({x2:new b.Number(t),y2:new b.Number(e)})}}),b.extend(b.Defs,{gradient:function(t,e){return this.put(new b.Gradient(t)).update(e)}}),b.Stop=b.invent({create:"stop",inherit:b.Element,extend:{update:function(t){return("number"==typeof t||t instanceof b.Number)&&(t={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",new b.Number(t.offset)),this}}}),b.Pattern=b.invent({create:"pattern",inherit:b.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},toString:function(){return this.fill()},attr:function(t,e,i){return"transform"==t&&(t="patternTransform"),b.Container.prototype.attr.call(this,t,e,i)}},construct:{pattern:function(t,e,i){return this.defs().pattern(t,e,i)}}}),b.extend(b.Defs,{pattern:function(t,e,i){return this.put(new b.Pattern).update(i).attr({x:0,y:0,width:t,height:e,patternUnits:"userSpaceOnUse"})}}),b.Shape=b.invent({create:function(t){this.constructor.call(this,t)},inherit:b.Element}),b.Bare=b.invent({create:function(t,e){if(this.constructor.call(this,b.create(t)),e)for(var i in e.prototype)"function"==typeof e.prototype[i]&&(this[i]=e.prototype[i])},inherit:b.Element,extend:{words:function(t){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this.node.appendChild(e.createTextNode(t)),this}}}),b.extend(b.Parent,{element:function(t,e){return this.put(new b.Bare(t,e))}}),b.Symbol=b.invent({create:"symbol",inherit:b.Container,construct:{symbol:function(){return this.put(new b.Symbol)}}}),b.Use=b.invent({create:"use",inherit:b.Shape,extend:{element:function(t,e){return this.attr("href",(e||"")+"#"+t,b.xlink)}},construct:{use:function(t,e){return this.put(new b.Use).element(t,e)}}}),b.Rect=b.invent({create:"rect",inherit:b.Shape,construct:{rect:function(t,e){return this.put(new b.Rect).size(t,e)}}}),b.Circle=b.invent({create:"circle",inherit:b.Shape,construct:{circle:function(t){return this.put(new b.Circle).rx(new b.Number(t).divide(2)).move(0,0)}}}),b.extend(b.Circle,b.FX,{rx:function(t){return this.attr("r",t)},ry:function(t){return this.rx(t)}}),b.Ellipse=b.invent({create:"ellipse",inherit:b.Shape,construct:{ellipse:function(t,e){return this.put(new b.Ellipse).size(t,e).move(0,0)}}}),b.extend(b.Ellipse,b.Rect,b.FX,{rx:function(t){return this.attr("rx",t)},ry:function(t){return this.attr("ry",t)}}),b.extend(b.Circle,b.Ellipse,{x:function(t){return null==t?this.cx()-this.rx():this.cx(t+this.rx())},y:function(t){return null==t?this.cy()-this.ry():this.cy(t+this.ry())},cx:function(t){return null==t?this.attr("cx"):this.attr("cx",t)},cy:function(t){return null==t?this.attr("cy"):this.attr("cy",t)},width:function(t){return null==t?2*this.rx():this.rx(new b.Number(t).divide(2))},height:function(t){return null==t?2*this.ry():this.ry(new b.Number(t).divide(2))},size:function(t,e){var i=l(this,t,e);return this.rx(new b.Number(i.width).divide(2)).ry(new b.Number(i.height).divide(2))}}),b.Line=b.invent({create:"line",inherit:b.Shape,extend:{array:function(){return new b.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(t,e,i,n){return null==t?this.array():(t=void 0!==e?{x1:t,y1:e,x2:i,y2:n}:new b.PointArray(t).toLine(),this.attr(t))},move:function(t,e){return this.attr(this.array().move(t,e).toLine())},size:function(t,e){var i=l(this,t,e);return this.attr(this.array().size(i.width,i.height).toLine())}},construct:{line:function(t,e,i,n){return b.Line.prototype.plot.apply(this.put(new b.Line),null!=t?[t,e,i,n]:[0,0,0,0])}}}),b.Polyline=b.invent({create:"polyline",inherit:b.Shape,construct:{polyline:function(t){return this.put(new b.Polyline).plot(t||new b.PointArray)}}}),b.Polygon=b.invent({create:"polygon",inherit:b.Shape,construct:{polygon:function(t){return this.put(new b.Polygon).plot(t||new b.PointArray)}}}),b.extend(b.Polyline,b.Polygon,{array:function(){return this._array||(this._array=new b.PointArray(this.attr("points")))},plot:function(t){return null==t?this.array():this.clear().attr("points","string"==typeof t?t:this._array=new b.PointArray(t))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("points",this.array().move(t,e))},size:function(t,e){var i=l(this,t,e);return this.attr("points",this.array().size(i.width,i.height))}}),b.extend(b.Line,b.Polyline,b.Polygon,{morphArray:b.PointArray,x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},width:function(t){var e=this.bbox();return null==t?e.width:this.size(t,e.height)},height:function(t){var e=this.bbox();return null==t?e.height:this.size(e.width,t)}}),b.Path=b.invent({create:"path",inherit:b.Shape,extend:{morphArray:b.PathArray,array:function(){return this._array||(this._array=new b.PathArray(this.attr("d")))},plot:function(t){return null==t?this.array():this.clear().attr("d","string"==typeof t?t:this._array=new b.PathArray(t))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("d",this.array().move(t,e))},x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},size:function(t,e){var i=l(this,t,e);return this.attr("d",this.array().size(i.width,i.height))},width:function(t){return null==t?this.bbox().width:this.size(t,this.bbox().height)},height:function(t){return null==t?this.bbox().height:this.size(this.bbox().width,t)}},construct:{path:function(t){return this.put(new b.Path).plot(t||new b.PathArray)}}}),b.Image=b.invent({create:"image",inherit:b.Shape,extend:{load:function(e){if(!e)return this;var i=this,n=new t.Image;return b.on(n,"load",function(){b.off(n);var t=i.parent(b.Pattern);null!==t&&(0==i.width()&&0==i.height()&&i.size(n.width,n.height),t&&0==t.width()&&0==t.height()&&t.size(i.width(),i.height()),"function"==typeof i._loaded&&i._loaded.call(i,{width:n.width,height:n.height,ratio:n.width/n.height,url:e}))}),b.on(n,"error",function(t){b.off(n),"function"==typeof i._error&&i._error.call(i,t)}),this.attr("href",n.src=this.src=e,b.xlink)},loaded:function(t){return this._loaded=t,this},error:function(t){return this._error=t,this}},construct:{image:function(t,e,i){return this.put(new b.Image).load(t).size(e||0,i||e||0)}}}),b.Text=b.invent({create:function(){this.constructor.call(this,b.create("text")),this.dom.leading=new b.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",b.defaults.attrs["font-family"])},inherit:b.Shape,extend:{x:function(t){return null==t?this.attr("x"):this.attr("x",t)},y:function(t){var e=this.attr("y"),i="number"==typeof e?e-this.bbox().y:0;return null==t?"number"==typeof e?e-i:e:this.attr("y","number"==typeof t.valueOf()?t+i:t)},cx:function(t){return null==t?this.bbox().cx:this.x(t-this.bbox().width/2)},cy:function(t){return null==t?this.bbox().cy:this.y(t-this.bbox().height/2)},text:function(t){if(void 0===t){for(var t="",e=this.node.childNodes,i=0,n=e.length;i<n;++i)0!=i&&3!=e[i].nodeType&&1==b.adopt(e[i]).dom.newLined&&(t+="\n"),t+=e[i].textContent;return t}if(this.clear().build(!0),"function"==typeof t)t.call(this,this);else{t=t.split("\n");for(var i=0,r=t.length;i<r;i++)this.tspan(t[i]).newLine()}return this.build(!1).rebuild()},size:function(t){return this.attr("font-size",t).rebuild()},leading:function(t){return null==t?this.dom.leading:(this.dom.leading=new b.Number(t),this.rebuild())},lines:function(){var t=(this.textPath&&this.textPath()||this).node,e=b.utils.map(b.utils.filterSVGElements(t.childNodes),function(t){return b.adopt(t)});return new b.Set(e)},rebuild:function(t){if("boolean"==typeof t&&(this._rebuild=t),this._rebuild){var e=this,i=0,n=this.dom.leading*new b.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(e.textPath()||this.attr("x",e.attr("x")),"\n"==this.text()?i+=n:(this.attr("dy",n+i),i=0))}),this.fire("rebuild")}return this},build:function(t){return this._build=!!t,this},setData:function(t){return this.dom=t,this.dom.leading=new b.Number(t.leading||1.3),this}},construct:{text:function(t){return this.put(new b.Text).text(t)},plain:function(t){return this.put(new b.Text).plain(t)}}}),b.Tspan=b.invent({create:"tspan",inherit:b.Shape,extend:{text:function(t){return null==t?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof t?t.call(this,this):this.plain(t),this)},dx:function(t){return this.attr("dx",t)},dy:function(t){return this.attr("dy",t)},newLine:function(){var t=this.parent(b.Text);return this.dom.newLined=!0,this.dy(t.dom.leading*t.attr("font-size")).attr("x",t.x())}}}),b.extend(b.Text,b.Tspan,{plain:function(t){return!1===this._build&&this.clear(),this.node.appendChild(e.createTextNode(t)),this},tspan:function(t){var e=(this.textPath&&this.textPath()||this).node,i=new b.Tspan;return!1===this._build&&this.clear(),e.appendChild(i.node),i.text(t)},clear:function(){for(var t=(this.textPath&&this.textPath()||this).node;t.hasChildNodes();)t.removeChild(t.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),b.TextPath=b.invent({create:"textPath",inherit:b.Parent,parent:b.Text,construct:{morphArray:b.PathArray,path:function(t){for(var e=new b.TextPath,i=this.doc().defs().path(t);this.node.hasChildNodes();)e.node.appendChild(this.node.firstChild);return this.node.appendChild(e.node),e.attr("href","#"+i,b.xlink),this},array:function(){var t=this.track();return t?t.array():null},plot:function(t){var e=this.track(),i=null;return e&&(i=e.plot(t)),null==t?i:this},track:function(){var t=this.textPath();if(t)return t.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return b.adopt(this.node.firstChild)}}}),b.Nested=b.invent({create:function(){this.constructor.call(this,b.create("svg")),this.style("overflow","visible")},inherit:b.Container,construct:{nested:function(){return this.put(new b.Nested)}}}),b.A=b.invent({create:"a",inherit:b.Container,extend:{to:function(t){return this.attr("href",t,b.xlink)},show:function(t){return this.attr("show",t,b.xlink)},target:function(t){return this.attr("target",t)}},construct:{link:function(t){return this.put(new b.A).to(t)}}}),b.extend(b.Element,{linkTo:function(t){var e=new b.A;return"function"==typeof t?t.call(e,e):e.to(t),this.parent().put(e).put(this)}}),b.Marker=b.invent({create:"marker",inherit:b.Container,extend:{width:function(t){return this.attr("markerWidth",t)},height:function(t){return this.attr("markerHeight",t)},ref:function(t,e){return this.attr("refX",t).attr("refY",e)},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},toString:function(){return"url(#"+this.id()+")"}},construct:{marker:function(t,e,i){return this.defs().marker(t,e,i)}}}),b.extend(b.Defs,{marker:function(t,e,i){return this.put(new b.Marker).size(t,e).ref(t/2,e/2).viewbox(0,0,t,e).attr("orient","auto").update(i)}}),b.extend(b.Line,b.Polyline,b.Polygon,b.Path,{marker:function(t,e,i,n){var r=["marker"];return"all"!=t&&r.push(t),r=r.join("-"),t=arguments[1]instanceof b.Marker?arguments[1]:this.doc().marker(e,i,n),this.attr(r,t)}});var P={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(t,e){return"color"==e?t:t+"-"+e}};["fill","stroke"].forEach(function(t){var e,i={};i[t]=function(i){if(void 0===i)return this;if("string"==typeof i||b.Color.isRgb(i)||i&&"function"==typeof i.fill)this.attr(t,i);else for(e=P[t].length-1;e>=0;e--)null!=i[P[t][e]]&&this.attr(P.prefix(t,P[t][e]),i[P[t][e]]);return this},b.extend(b.Element,b.FX,i)}),b.extend(b.Element,b.FX,{rotate:function(t,e,i){return this.transform({rotation:t,cx:e,cy:i})},skew:function(t,e,i,n){return 1==arguments.length||3==arguments.length?this.transform({skew:t,cx:e,cy:i}):this.transform({skewX:t,skewY:e,cx:i,cy:n})},scale:function(t,e,i,n){return 1==arguments.length||3==arguments.length?this.transform({scale:t,cx:e,cy:i}):this.transform({scaleX:t,scaleY:e,cx:i,cy:n})},translate:function(t,e){return this.transform({x:t,y:e})},flip:function(t,e){return e="number"==typeof t?t:e,this.transform({flip:t||"both",offset:e})},matrix:function(t){return this.attr("transform",new b.Matrix(6==arguments.length?[].slice.call(arguments):t))},opacity:function(t){return this.attr("opacity",t)},dx:function(t){return this.x(new b.Number(t).plus(this instanceof b.FX?0:this.x()),!0)},dy:function(t){return this.y(new b.Number(t).plus(this instanceof b.FX?0:this.y()),!0)},dmove:function(t,e){return this.dx(t).dy(e)}}),b.extend(b.Rect,b.Ellipse,b.Circle,b.Gradient,b.FX,{radius:function(t,e){var i=(this._target||this).type;return"radial"==i||"circle"==i?this.attr("r",new b.Number(t)):this.rx(t).ry(null==e?t:e)}}),b.extend(b.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(t){return this.node.getPointAtLength(t)}}),b.extend(b.Parent,b.Text,b.Tspan,b.FX,{font:function(t,e){if("object"==typeof t)for(e in t)this.font(e,t[e]);return"leading"==t?this.leading(e):"anchor"==t?this.attr("text-anchor",e):"size"==t||"family"==t||"weight"==t||"stretch"==t||"variant"==t||"style"==t?this.attr("font-"+t,e):this.attr(t,e)}}),b.Set=b.invent({create:function(t){Array.isArray(t)?this.members=t:this.clear()},extend:{add:function(){var t,e,i=[].slice.call(arguments);for(t=0,e=i.length;t<e;t++)this.members.push(i[t]);return this},remove:function(t){var e=this.index(t);return e>-1&&this.members.splice(e,1),this},each:function(t){for(var e=0,i=this.members.length;e<i;e++)t.apply(this.members[e],[e,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(t){return this.index(t)>=0},index:function(t){return this.members.indexOf(t)},get:function(t){return this.members[t]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members},bbox:function(){if(0==this.members.length)return new b.RBox;var t=this.members[0].rbox(this.members[0].doc());return this.each(function(){t=t.merge(this.rbox(this.doc()))}),t}},construct:{set:function(t){return new b.Set(t)}}}),b.FX.Set=b.invent({create:function(t){this.set=t}}),b.Set.inherit=function(){
var t,e=[];for(var t in b.Shape.prototype)"function"==typeof b.Shape.prototype[t]&&"function"!=typeof b.Set.prototype[t]&&e.push(t);e.forEach(function(t){b.Set.prototype[t]=function(){for(var e=0,i=this.members.length;e<i;e++)this.members[e]&&"function"==typeof this.members[e][t]&&this.members[e][t].apply(this.members[e],arguments);return"animate"==t?this.fx||(this.fx=new b.FX.Set(this)):this}}),e=[];for(var t in b.FX.prototype)"function"==typeof b.FX.prototype[t]&&"function"!=typeof b.FX.Set.prototype[t]&&e.push(t);e.forEach(function(t){b.FX.Set.prototype[t]=function(){for(var e=0,i=this.set.members.length;e<i;e++)this.set.members[e].fx[t].apply(this.set.members[e].fx,arguments);return this}})},b.extend(b.Element,{data:function(t,e,i){if("object"==typeof t)for(e in t)this.data(e,t[e]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+t))}catch(e){return this.attr("data-"+t)}else this.attr("data-"+t,null===e?null:!0===i||"string"==typeof e||"number"==typeof e?e:JSON.stringify(e));return this}}),b.extend(b.Element,{remember:function(t,e){if("object"==typeof arguments[0])for(var e in t)this.remember(e,t[e]);else{if(1==arguments.length)return this.memory()[t];this.memory()[t]=e}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var t=arguments.length-1;t>=0;t--)delete this.memory()[arguments[t]];return this},memory:function(){return this._memory||(this._memory={})}}),b.get=function(t){var i=e.getElementById(v(t)||t);return b.adopt(i)},b.select=function(t,i){return new b.Set(b.utils.map((i||e).querySelectorAll(t),function(t){return b.adopt(t)}))},b.extend(b.Parent,{select:function(t){return b.select(t,this.node)}});var k="abcdef".split("");if("function"!=typeof t.CustomEvent){var S=function(t,i){i=i||{bubbles:!1,cancelable:!1,detail:void 0};var n=e.createEvent("CustomEvent");return n.initCustomEvent(t,i.bubbles,i.cancelable,i.detail),n};S.prototype=t.Event.prototype,b.CustomEvent=S}else b.CustomEvent=t.CustomEvent;return function(e){for(var i=0,n=["moz","webkit"],r=0;r<n.length&&!t.requestAnimationFrame;++r)e.requestAnimationFrame=e[n[r]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[n[r]+"CancelAnimationFrame"]||e[n[r]+"CancelRequestAnimationFrame"];e.requestAnimationFrame=e.requestAnimationFrame||function(t){var n=(new Date).getTime(),r=Math.max(0,16-(n-i)),s=e.setTimeout(function(){t(n+r)},r);return i=n+r,s},e.cancelAnimationFrame=e.cancelAnimationFrame||e.clearTimeout}(t),b});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJsaWJzL3N2Zy5taW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohIHN2Zy5qcyB2Mi42LjYgTUlUKi87IWZ1bmN0aW9uKHQsZSl7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShmdW5jdGlvbigpe3JldHVybiBlKHQsdC5kb2N1bWVudCl9KTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz10LmRvY3VtZW50P2UodCx0LmRvY3VtZW50KTpmdW5jdGlvbih0KXtyZXR1cm4gZSh0LHQuZG9jdW1lbnQpfTp0LlNWRz1lKHQsdC5kb2N1bWVudCl9KFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OnRoaXMsZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBpKHQsZSxpLG4pe3JldHVybiBpK24ucmVwbGFjZShiLnJlZ2V4LmRvdHMsXCIgLlwiKX1mdW5jdGlvbiBuKHQpe2Zvcih2YXIgZT10LnNsaWNlKDApLGk9ZS5sZW5ndGg7aS0tOylBcnJheS5pc0FycmF5KGVbaV0pJiYoZVtpXT1uKGVbaV0pKTtyZXR1cm4gZX1mdW5jdGlvbiByKHQsZSl7cmV0dXJuIHQgaW5zdGFuY2VvZiBlfWZ1bmN0aW9uIHModCxlKXtyZXR1cm4odC5tYXRjaGVzfHx0Lm1hdGNoZXNTZWxlY3Rvcnx8dC5tc01hdGNoZXNTZWxlY3Rvcnx8dC5tb3pNYXRjaGVzU2VsZWN0b3J8fHQud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHx0Lm9NYXRjaGVzU2VsZWN0b3IpLmNhbGwodCxlKX1mdW5jdGlvbiBvKHQpe3JldHVybiB0LnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvLSguKS9nLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUudG9VcHBlckNhc2UoKX0pfWZ1bmN0aW9uIGEodCl7cmV0dXJuIHQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrdC5zbGljZSgxKX1mdW5jdGlvbiBoKHQpe3JldHVybiA0PT10Lmxlbmd0aD9bXCIjXCIsdC5zdWJzdHJpbmcoMSwyKSx0LnN1YnN0cmluZygxLDIpLHQuc3Vic3RyaW5nKDIsMyksdC5zdWJzdHJpbmcoMiwzKSx0LnN1YnN0cmluZygzLDQpLHQuc3Vic3RyaW5nKDMsNCldLmpvaW4oXCJcIik6dH1mdW5jdGlvbiB1KHQpe3ZhciBlPXQudG9TdHJpbmcoMTYpO3JldHVybiAxPT1lLmxlbmd0aD9cIjBcIitlOmV9ZnVuY3Rpb24gbCh0LGUsaSl7aWYobnVsbD09ZXx8bnVsbD09aSl7dmFyIG49dC5iYm94KCk7bnVsbD09ZT9lPW4ud2lkdGgvbi5oZWlnaHQqaTpudWxsPT1pJiYoaT1uLmhlaWdodC9uLndpZHRoKmUpfXJldHVybnt3aWR0aDplLGhlaWdodDppfX1mdW5jdGlvbiBjKHQsZSxpKXtyZXR1cm57eDplKnQuYStpKnQuYyswLHk6ZSp0LmIraSp0LmQrMH19ZnVuY3Rpb24gZih0KXtyZXR1cm57YTp0WzBdLGI6dFsxXSxjOnRbMl0sZDp0WzNdLGU6dFs0XSxmOnRbNV19fWZ1bmN0aW9uIGQodCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBiLk1hdHJpeHx8KHQ9bmV3IGIuTWF0cml4KHQpKSx0fWZ1bmN0aW9uIHAodCxlKXt0LmN4PW51bGw9PXQuY3g/ZS5iYm94KCkuY3g6dC5jeCx0LmN5PW51bGw9PXQuY3k/ZS5iYm94KCkuY3k6dC5jeX1mdW5jdGlvbiBtKHQpe2Zvcih2YXIgZT0wLGk9dC5sZW5ndGgsbj1cIlwiO2U8aTtlKyspbis9dFtlXVswXSxudWxsIT10W2VdWzFdJiYobis9dFtlXVsxXSxudWxsIT10W2VdWzJdJiYobis9XCIgXCIsbis9dFtlXVsyXSxudWxsIT10W2VdWzNdJiYobis9XCIgXCIsbis9dFtlXVszXSxuKz1cIiBcIixuKz10W2VdWzRdLG51bGwhPXRbZV1bNV0mJihuKz1cIiBcIixuKz10W2VdWzVdLG4rPVwiIFwiLG4rPXRbZV1bNl0sbnVsbCE9dFtlXVs3XSYmKG4rPVwiIFwiLG4rPXRbZV1bN10pKSkpKTtyZXR1cm4gbitcIiBcIn1mdW5jdGlvbiB4KGUpe2Zvcih2YXIgaT1lLmNoaWxkTm9kZXMubGVuZ3RoLTE7aT49MDtpLS0pZS5jaGlsZE5vZGVzW2ldaW5zdGFuY2VvZiB0LlNWR0VsZW1lbnQmJngoZS5jaGlsZE5vZGVzW2ldKTtyZXR1cm4gYi5hZG9wdChlKS5pZChiLmVpZChlLm5vZGVOYW1lKSl9ZnVuY3Rpb24geSh0KXtyZXR1cm4gbnVsbD09dC54JiYodC54PTAsdC55PTAsdC53aWR0aD0wLHQuaGVpZ2h0PTApLHQudz10LndpZHRoLHQuaD10LmhlaWdodCx0LngyPXQueCt0LndpZHRoLHQueTI9dC55K3QuaGVpZ2h0LHQuY3g9dC54K3Qud2lkdGgvMix0LmN5PXQueSt0LmhlaWdodC8yLHR9ZnVuY3Rpb24gdih0KXt2YXIgZT0odHx8XCJcIikudG9TdHJpbmcoKS5tYXRjaChiLnJlZ2V4LnJlZmVyZW5jZSk7aWYoZSlyZXR1cm4gZVsxXX1mdW5jdGlvbiBnKHQpe3JldHVybiBNYXRoLmFicyh0KT4xZS0zNz90OjB9dmFyIHc9dm9pZCAwIT09dGhpcz90aGlzOnQsYj13LlNWRz1mdW5jdGlvbih0KXtpZihiLnN1cHBvcnRlZClyZXR1cm4gdD1uZXcgYi5Eb2ModCksYi5wYXJzZXIuZHJhd3x8Yi5wcmVwYXJlKCksdH07aWYoYi5ucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsYi54bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAveG1sbnMvXCIsYi54bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIixiLnN2Z2pzPVwiaHR0cDovL3N2Z2pzLmNvbS9zdmdqc1wiLGIuc3VwcG9ydGVkPWZ1bmN0aW9uKCl7cmV0dXJuISFlLmNyZWF0ZUVsZW1lbnROUyYmISFlLmNyZWF0ZUVsZW1lbnROUyhiLm5zLFwic3ZnXCIpLmNyZWF0ZVNWR1JlY3R9KCksIWIuc3VwcG9ydGVkKXJldHVybiExO2IuZGlkPTFlMyxiLmVpZD1mdW5jdGlvbih0KXtyZXR1cm5cIlN2Z2pzXCIrYSh0KStiLmRpZCsrfSxiLmNyZWF0ZT1mdW5jdGlvbih0KXt2YXIgaT1lLmNyZWF0ZUVsZW1lbnROUyh0aGlzLm5zLHQpO3JldHVybiBpLnNldEF0dHJpYnV0ZShcImlkXCIsdGhpcy5laWQodCkpLGl9LGIuZXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIHQsZSxpLG47Zm9yKHQ9W10uc2xpY2UuY2FsbChhcmd1bWVudHMpLGU9dC5wb3AoKSxuPXQubGVuZ3RoLTE7bj49MDtuLS0paWYodFtuXSlmb3IoaSBpbiBlKXRbbl0ucHJvdG90eXBlW2ldPWVbaV07Yi5TZXQmJmIuU2V0LmluaGVyaXQmJmIuU2V0LmluaGVyaXQoKX0sYi5pbnZlbnQ9ZnVuY3Rpb24odCl7dmFyIGU9XCJmdW5jdGlvblwiPT10eXBlb2YgdC5jcmVhdGU/dC5jcmVhdGU6ZnVuY3Rpb24oKXt0aGlzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxiLmNyZWF0ZSh0LmNyZWF0ZSkpfTtyZXR1cm4gdC5pbmhlcml0JiYoZS5wcm90b3R5cGU9bmV3IHQuaW5oZXJpdCksdC5leHRlbmQmJmIuZXh0ZW5kKGUsdC5leHRlbmQpLHQuY29uc3RydWN0JiZiLmV4dGVuZCh0LnBhcmVudHx8Yi5Db250YWluZXIsdC5jb25zdHJ1Y3QpLGV9LGIuYWRvcHQ9ZnVuY3Rpb24oZSl7aWYoIWUpcmV0dXJuIG51bGw7aWYoZS5pbnN0YW5jZSlyZXR1cm4gZS5pbnN0YW5jZTt2YXIgaTtyZXR1cm4gaT1cInN2Z1wiPT1lLm5vZGVOYW1lP2UucGFyZW50Tm9kZSBpbnN0YW5jZW9mIHQuU1ZHRWxlbWVudD9uZXcgYi5OZXN0ZWQ6bmV3IGIuRG9jOlwibGluZWFyR3JhZGllbnRcIj09ZS5ub2RlTmFtZT9uZXcgYi5HcmFkaWVudChcImxpbmVhclwiKTpcInJhZGlhbEdyYWRpZW50XCI9PWUubm9kZU5hbWU/bmV3IGIuR3JhZGllbnQoXCJyYWRpYWxcIik6YlthKGUubm9kZU5hbWUpXT9uZXcoYlthKGUubm9kZU5hbWUpXSk6bmV3IGIuRWxlbWVudChlKSxpLnR5cGU9ZS5ub2RlTmFtZSxpLm5vZGU9ZSxlLmluc3RhbmNlPWksaSBpbnN0YW5jZW9mIGIuRG9jJiZpLm5hbWVzcGFjZSgpLmRlZnMoKSxpLnNldERhdGEoSlNPTi5wYXJzZShlLmdldEF0dHJpYnV0ZShcInN2Z2pzOmRhdGFcIikpfHx7fSksaX0sYi5wcmVwYXJlPWZ1bmN0aW9uKCl7dmFyIHQ9ZS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF0saT0odD9uZXcgYi5Eb2ModCk6Yi5hZG9wdChlLmRvY3VtZW50RWxlbWVudCkubmVzdGVkKCkpLnNpemUoMiwwKTtiLnBhcnNlcj17Ym9keTp0fHxlLmRvY3VtZW50RWxlbWVudCxkcmF3Omkuc3R5bGUoXCJvcGFjaXR5OjA7cG9zaXRpb246YWJzb2x1dGU7bGVmdDotMTAwJTt0b3A6LTEwMCU7b3ZlcmZsb3c6aGlkZGVuXCIpLm5vZGUscG9seTppLnBvbHlsaW5lKCkubm9kZSxwYXRoOmkucGF0aCgpLm5vZGUsbmF0aXZlOmIuY3JlYXRlKFwic3ZnXCIpfX0sYi5wYXJzZXI9e25hdGl2ZTpiLmNyZWF0ZShcInN2Z1wiKX0sZS5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLGZ1bmN0aW9uKCl7Yi5wYXJzZXIuZHJhd3x8Yi5wcmVwYXJlKCl9LCExKSxiLnJlZ2V4PXtudW1iZXJBbmRVbml0Oi9eKFsrLV0/KFxcZCsoXFwuXFxkKik/fFxcLlxcZCspKGVbKy1dP1xcZCspPykoW2EteiVdKikkL2ksaGV4Oi9eIz8oW2EtZlxcZF17Mn0pKFthLWZcXGRdezJ9KShbYS1mXFxkXXsyfSkkL2kscmdiOi9yZ2JcXCgoXFxkKyksKFxcZCspLChcXGQrKVxcKS8scmVmZXJlbmNlOi8jKFthLXowLTlcXC1fXSspL2ksdHJhbnNmb3JtczovXFwpXFxzKiw/XFxzKi8sd2hpdGVzcGFjZTovXFxzL2csaXNIZXg6L14jW2EtZjAtOV17Myw2fSQvaSxpc1JnYjovXnJnYlxcKC8saXNDc3M6L1teOl0rOlteO10rOz8vLGlzQmxhbms6L14oXFxzKyk/JC8saXNOdW1iZXI6L15bKy1dPyhcXGQrKFxcLlxcZCopP3xcXC5cXGQrKShlWystXT9cXGQrKT8kL2ksaXNQZXJjZW50Oi9eLT9bXFxkXFwuXSslJC8saXNJbWFnZTovXFwuKGpwZ3xqcGVnfHBuZ3xnaWZ8c3ZnKShcXD9bXj1dKy4qKT8vaSxkZWxpbWl0ZXI6L1tcXHMsXSsvLGh5cGhlbjovKFteZV0pXFwtL2dpLHBhdGhMZXR0ZXJzOi9bTUxIVkNTUVRBWl0vZ2ksaXNQYXRoTGV0dGVyOi9bTUxIVkNTUVRBWl0vaSxudW1iZXJzV2l0aERvdHM6LygoXFxkP1xcLlxcZCsoPzplWystXT9cXGQrKT8pKCg/OlxcLlxcZCsoPzplWystXT9cXGQrKT8pKykpKy9naSxkb3RzOi9cXC4vZ30sYi51dGlscz17bWFwOmZ1bmN0aW9uKHQsZSl7dmFyIGksbj10Lmxlbmd0aCxyPVtdO2ZvcihpPTA7aTxuO2krKylyLnB1c2goZSh0W2ldKSk7cmV0dXJuIHJ9LGZpbHRlcjpmdW5jdGlvbih0LGUpe3ZhciBpLG49dC5sZW5ndGgscj1bXTtmb3IoaT0wO2k8bjtpKyspZSh0W2ldKSYmci5wdXNoKHRbaV0pO3JldHVybiByfSxyYWRpYW5zOmZ1bmN0aW9uKHQpe3JldHVybiB0JTM2MCpNYXRoLlBJLzE4MH0sZGVncmVlczpmdW5jdGlvbih0KXtyZXR1cm4gMTgwKnQvTWF0aC5QSSUzNjB9LGZpbHRlclNWR0VsZW1lbnRzOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmZpbHRlcihlLGZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2YgdC5TVkdFbGVtZW50fSl9fSxiLmRlZmF1bHRzPXthdHRyczp7XCJmaWxsLW9wYWNpdHlcIjoxLFwic3Ryb2tlLW9wYWNpdHlcIjoxLFwic3Ryb2tlLXdpZHRoXCI6MCxcInN0cm9rZS1saW5lam9pblwiOlwibWl0ZXJcIixcInN0cm9rZS1saW5lY2FwXCI6XCJidXR0XCIsZmlsbDpcIiMwMDAwMDBcIixzdHJva2U6XCIjMDAwMDAwXCIsb3BhY2l0eToxLHg6MCx5OjAsY3g6MCxjeTowLHdpZHRoOjAsaGVpZ2h0OjAscjowLHJ4OjAscnk6MCxvZmZzZXQ6MCxcInN0b3Atb3BhY2l0eVwiOjEsXCJzdG9wLWNvbG9yXCI6XCIjMDAwMDAwXCIsXCJmb250LXNpemVcIjoxNixcImZvbnQtZmFtaWx5XCI6XCJIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmXCIsXCJ0ZXh0LWFuY2hvclwiOlwic3RhcnRcIn19LGIuQ29sb3I9ZnVuY3Rpb24odCl7dmFyIGU7dGhpcy5yPTAsdGhpcy5nPTAsdGhpcy5iPTAsdCYmKFwic3RyaW5nXCI9PXR5cGVvZiB0P2IucmVnZXguaXNSZ2IudGVzdCh0KT8oZT1iLnJlZ2V4LnJnYi5leGVjKHQucmVwbGFjZShiLnJlZ2V4LndoaXRlc3BhY2UsXCJcIikpLHRoaXMucj1wYXJzZUludChlWzFdKSx0aGlzLmc9cGFyc2VJbnQoZVsyXSksdGhpcy5iPXBhcnNlSW50KGVbM10pKTpiLnJlZ2V4LmlzSGV4LnRlc3QodCkmJihlPWIucmVnZXguaGV4LmV4ZWMoaCh0KSksdGhpcy5yPXBhcnNlSW50KGVbMV0sMTYpLHRoaXMuZz1wYXJzZUludChlWzJdLDE2KSx0aGlzLmI9cGFyc2VJbnQoZVszXSwxNikpOlwib2JqZWN0XCI9PXR5cGVvZiB0JiYodGhpcy5yPXQucix0aGlzLmc9dC5nLHRoaXMuYj10LmIpKX0sYi5leHRlbmQoYi5Db2xvcix7dG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b0hleCgpfSx0b0hleDpmdW5jdGlvbigpe3JldHVyblwiI1wiK3UodGhpcy5yKSt1KHRoaXMuZykrdSh0aGlzLmIpfSx0b1JnYjpmdW5jdGlvbigpe3JldHVyblwicmdiKFwiK1t0aGlzLnIsdGhpcy5nLHRoaXMuYl0uam9pbigpK1wiKVwifSxicmlnaHRuZXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuci8yNTUqLjMrdGhpcy5nLzI1NSouNTkrdGhpcy5iLzI1NSouMTF9LG1vcnBoOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRlc3RpbmF0aW9uPW5ldyBiLkNvbG9yKHQpLHRoaXN9LGF0OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRlc3RpbmF0aW9uPyh0PXQ8MD8wOnQ+MT8xOnQsbmV3IGIuQ29sb3Ioe3I6fn4odGhpcy5yKyh0aGlzLmRlc3RpbmF0aW9uLnItdGhpcy5yKSp0KSxnOn5+KHRoaXMuZysodGhpcy5kZXN0aW5hdGlvbi5nLXRoaXMuZykqdCksYjp+fih0aGlzLmIrKHRoaXMuZGVzdGluYXRpb24uYi10aGlzLmIpKnQpfSkpOnRoaXN9fSksYi5Db2xvci50ZXN0PWZ1bmN0aW9uKHQpe3JldHVybiB0Kz1cIlwiLGIucmVnZXguaXNIZXgudGVzdCh0KXx8Yi5yZWdleC5pc1JnYi50ZXN0KHQpfSxiLkNvbG9yLmlzUmdiPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZcIm51bWJlclwiPT10eXBlb2YgdC5yJiZcIm51bWJlclwiPT10eXBlb2YgdC5nJiZcIm51bWJlclwiPT10eXBlb2YgdC5ifSxiLkNvbG9yLmlzQ29sb3I9ZnVuY3Rpb24odCl7cmV0dXJuIGIuQ29sb3IuaXNSZ2IodCl8fGIuQ29sb3IudGVzdCh0KX0sYi5BcnJheT1mdW5jdGlvbih0LGUpe3Q9KHR8fFtdKS52YWx1ZU9mKCksMD09dC5sZW5ndGgmJmUmJih0PWUudmFsdWVPZigpKSx0aGlzLnZhbHVlPXRoaXMucGFyc2UodCl9LGIuZXh0ZW5kKGIuQXJyYXkse21vcnBoOmZ1bmN0aW9uKHQpe2lmKHRoaXMuZGVzdGluYXRpb249dGhpcy5wYXJzZSh0KSx0aGlzLnZhbHVlLmxlbmd0aCE9dGhpcy5kZXN0aW5hdGlvbi5sZW5ndGgpe2Zvcih2YXIgZT10aGlzLnZhbHVlW3RoaXMudmFsdWUubGVuZ3RoLTFdLGk9dGhpcy5kZXN0aW5hdGlvblt0aGlzLmRlc3RpbmF0aW9uLmxlbmd0aC0xXTt0aGlzLnZhbHVlLmxlbmd0aD50aGlzLmRlc3RpbmF0aW9uLmxlbmd0aDspdGhpcy5kZXN0aW5hdGlvbi5wdXNoKGkpO2Zvcig7dGhpcy52YWx1ZS5sZW5ndGg8dGhpcy5kZXN0aW5hdGlvbi5sZW5ndGg7KXRoaXMudmFsdWUucHVzaChlKX1yZXR1cm4gdGhpc30sc2V0dGxlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT10aGlzLnZhbHVlLmxlbmd0aCxpPVtdO3Q8ZTt0KyspLTE9PWkuaW5kZXhPZih0aGlzLnZhbHVlW3RdKSYmaS5wdXNoKHRoaXMudmFsdWVbdF0pO3JldHVybiB0aGlzLnZhbHVlPWl9LGF0OmZ1bmN0aW9uKHQpe2lmKCF0aGlzLmRlc3RpbmF0aW9uKXJldHVybiB0aGlzO2Zvcih2YXIgZT0wLGk9dGhpcy52YWx1ZS5sZW5ndGgsbj1bXTtlPGk7ZSsrKW4ucHVzaCh0aGlzLnZhbHVlW2VdKyh0aGlzLmRlc3RpbmF0aW9uW2VdLXRoaXMudmFsdWVbZV0pKnQpO3JldHVybiBuZXcgYi5BcnJheShuKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZS5qb2luKFwiIFwiKX0sdmFsdWVPZjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbHVlfSxwYXJzZTpmdW5jdGlvbih0KXtyZXR1cm4gdD10LnZhbHVlT2YoKSxBcnJheS5pc0FycmF5KHQpP3Q6dGhpcy5zcGxpdCh0KX0sc3BsaXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQudHJpbSgpLnNwbGl0KGIucmVnZXguZGVsaW1pdGVyKS5tYXAocGFyc2VGbG9hdCl9LHJldmVyc2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZS5yZXZlcnNlKCksdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgdGhpcy5jb25zdHJ1Y3RvcjtyZXR1cm4gdC52YWx1ZT1uKHRoaXMudmFsdWUpLHR9fSksYi5Qb2ludEFycmF5PWZ1bmN0aW9uKHQsZSl7Yi5BcnJheS5jYWxsKHRoaXMsdCxlfHxbWzAsMF1dKX0sYi5Qb2ludEFycmF5LnByb3RvdHlwZT1uZXcgYi5BcnJheSxiLlBvaW50QXJyYXkucHJvdG90eXBlLmNvbnN0cnVjdG9yPWIuUG9pbnRBcnJheSxiLmV4dGVuZChiLlBvaW50QXJyYXkse3RvU3RyaW5nOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT10aGlzLnZhbHVlLmxlbmd0aCxpPVtdO3Q8ZTt0KyspaS5wdXNoKHRoaXMudmFsdWVbdF0uam9pbihcIixcIikpO3JldHVybiBpLmpvaW4oXCIgXCIpfSx0b0xpbmU6ZnVuY3Rpb24oKXtyZXR1cm57eDE6dGhpcy52YWx1ZVswXVswXSx5MTp0aGlzLnZhbHVlWzBdWzFdLHgyOnRoaXMudmFsdWVbMV1bMF0seTI6dGhpcy52YWx1ZVsxXVsxXX19LGF0OmZ1bmN0aW9uKHQpe2lmKCF0aGlzLmRlc3RpbmF0aW9uKXJldHVybiB0aGlzO2Zvcih2YXIgZT0wLGk9dGhpcy52YWx1ZS5sZW5ndGgsbj1bXTtlPGk7ZSsrKW4ucHVzaChbdGhpcy52YWx1ZVtlXVswXSsodGhpcy5kZXN0aW5hdGlvbltlXVswXS10aGlzLnZhbHVlW2VdWzBdKSp0LHRoaXMudmFsdWVbZV1bMV0rKHRoaXMuZGVzdGluYXRpb25bZV1bMV0tdGhpcy52YWx1ZVtlXVsxXSkqdF0pO3JldHVybiBuZXcgYi5Qb2ludEFycmF5KG4pfSxwYXJzZTpmdW5jdGlvbih0KXt2YXIgZT1bXTtpZih0PXQudmFsdWVPZigpLEFycmF5LmlzQXJyYXkodCkpe2lmKEFycmF5LmlzQXJyYXkodFswXSkpcmV0dXJuIHQubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LnNsaWNlKCl9KTtpZihudWxsIT10WzBdLngpcmV0dXJuIHQubWFwKGZ1bmN0aW9uKHQpe3JldHVyblt0LngsdC55XX0pfWVsc2UgdD10LnRyaW0oKS5zcGxpdChiLnJlZ2V4LmRlbGltaXRlcikubWFwKHBhcnNlRmxvYXQpO3QubGVuZ3RoJTIhPTAmJnQucG9wKCk7Zm9yKHZhciBpPTAsbj10Lmxlbmd0aDtpPG47aSs9MillLnB1c2goW3RbaV0sdFtpKzFdXSk7cmV0dXJuIGV9LG1vdmU6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLmJib3goKTtpZih0LT1pLngsZS09aS55LCFpc05hTih0KSYmIWlzTmFOKGUpKWZvcih2YXIgbj10aGlzLnZhbHVlLmxlbmd0aC0xO24+PTA7bi0tKXRoaXMudmFsdWVbbl09W3RoaXMudmFsdWVbbl1bMF0rdCx0aGlzLnZhbHVlW25dWzFdK2VdO3JldHVybiB0aGlzfSxzaXplOmZ1bmN0aW9uKHQsZSl7dmFyIGksbj10aGlzLmJib3goKTtmb3IoaT10aGlzLnZhbHVlLmxlbmd0aC0xO2k+PTA7aS0tKW4ud2lkdGgmJih0aGlzLnZhbHVlW2ldWzBdPSh0aGlzLnZhbHVlW2ldWzBdLW4ueCkqdC9uLndpZHRoK24ueCksbi5oZWlnaHQmJih0aGlzLnZhbHVlW2ldWzFdPSh0aGlzLnZhbHVlW2ldWzFdLW4ueSkqZS9uLmhlaWdodCtuLnkpO3JldHVybiB0aGlzfSxiYm94OmZ1bmN0aW9uKCl7cmV0dXJuIGIucGFyc2VyLnBvbHkuc2V0QXR0cmlidXRlKFwicG9pbnRzXCIsdGhpcy50b1N0cmluZygpKSxiLnBhcnNlci5wb2x5LmdldEJCb3goKX19KTtmb3IodmFyIEM9e006ZnVuY3Rpb24odCxlLGkpe3JldHVybiBlLng9aS54PXRbMF0sZS55PWkueT10WzFdLFtcIk1cIixlLngsZS55XX0sTDpmdW5jdGlvbih0LGUpe3JldHVybiBlLng9dFswXSxlLnk9dFsxXSxbXCJMXCIsdFswXSx0WzFdXX0sSDpmdW5jdGlvbih0LGUpe3JldHVybiBlLng9dFswXSxbXCJIXCIsdFswXV19LFY6ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS55PXRbMF0sW1wiVlwiLHRbMF1dfSxDOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUueD10WzRdLGUueT10WzVdLFtcIkNcIix0WzBdLHRbMV0sdFsyXSx0WzNdLHRbNF0sdFs1XV19LFM6ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS54PXRbMl0sZS55PXRbM10sW1wiU1wiLHRbMF0sdFsxXSx0WzJdLHRbM11dfSxROmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUueD10WzJdLGUueT10WzNdLFtcIlFcIix0WzBdLHRbMV0sdFsyXSx0WzNdXX0sVDpmdW5jdGlvbih0LGUpe3JldHVybiBlLng9dFswXSxlLnk9dFsxXSxbXCJUXCIsdFswXSx0WzFdXX0sWjpmdW5jdGlvbih0LGUsaSl7cmV0dXJuIGUueD1pLngsZS55PWkueSxbXCJaXCJdfSxBOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUueD10WzVdLGUueT10WzZdLFtcIkFcIix0WzBdLHRbMV0sdFsyXSx0WzNdLHRbNF0sdFs1XSx0WzZdXX19LE49XCJtbGh2cXRjc2F6XCIuc3BsaXQoXCJcIiksQT0wLE09Ti5sZW5ndGg7QTxNOysrQSlDW05bQV1dPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlLGksbil7aWYoXCJIXCI9PXQpZVswXT1lWzBdK2kueDtlbHNlIGlmKFwiVlwiPT10KWVbMF09ZVswXStpLnk7ZWxzZSBpZihcIkFcIj09dCllWzVdPWVbNV0raS54LGVbNl09ZVs2XStpLnk7ZWxzZSBmb3IodmFyIHI9MCxzPWUubGVuZ3RoO3I8czsrK3IpZVtyXT1lW3JdKyhyJTI/aS55OmkueCk7cmV0dXJuIENbdF0oZSxpLG4pfX0oTltBXS50b1VwcGVyQ2FzZSgpKTtiLlBhdGhBcnJheT1mdW5jdGlvbih0LGUpe2IuQXJyYXkuY2FsbCh0aGlzLHQsZXx8W1tcIk1cIiwwLDBdXSl9LGIuUGF0aEFycmF5LnByb3RvdHlwZT1uZXcgYi5BcnJheSxiLlBhdGhBcnJheS5wcm90b3R5cGUuY29uc3RydWN0b3I9Yi5QYXRoQXJyYXksYi5leHRlbmQoYi5QYXRoQXJyYXkse3RvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIG0odGhpcy52YWx1ZSl9LG1vdmU6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLmJib3goKTtpZih0LT1pLngsZS09aS55LCFpc05hTih0KSYmIWlzTmFOKGUpKWZvcih2YXIgbixyPXRoaXMudmFsdWUubGVuZ3RoLTE7cj49MDtyLS0pbj10aGlzLnZhbHVlW3JdWzBdLFwiTVwiPT1ufHxcIkxcIj09bnx8XCJUXCI9PW4/KHRoaXMudmFsdWVbcl1bMV0rPXQsdGhpcy52YWx1ZVtyXVsyXSs9ZSk6XCJIXCI9PW4/dGhpcy52YWx1ZVtyXVsxXSs9dDpcIlZcIj09bj90aGlzLnZhbHVlW3JdWzFdKz1lOlwiQ1wiPT1ufHxcIlNcIj09bnx8XCJRXCI9PW4/KHRoaXMudmFsdWVbcl1bMV0rPXQsdGhpcy52YWx1ZVtyXVsyXSs9ZSx0aGlzLnZhbHVlW3JdWzNdKz10LHRoaXMudmFsdWVbcl1bNF0rPWUsXCJDXCI9PW4mJih0aGlzLnZhbHVlW3JdWzVdKz10LHRoaXMudmFsdWVbcl1bNl0rPWUpKTpcIkFcIj09biYmKHRoaXMudmFsdWVbcl1bNl0rPXQsdGhpcy52YWx1ZVtyXVs3XSs9ZSk7cmV0dXJuIHRoaXN9LHNpemU6ZnVuY3Rpb24odCxlKXt2YXIgaSxuLHI9dGhpcy5iYm94KCk7Zm9yKGk9dGhpcy52YWx1ZS5sZW5ndGgtMTtpPj0wO2ktLSluPXRoaXMudmFsdWVbaV1bMF0sXCJNXCI9PW58fFwiTFwiPT1ufHxcIlRcIj09bj8odGhpcy52YWx1ZVtpXVsxXT0odGhpcy52YWx1ZVtpXVsxXS1yLngpKnQvci53aWR0aCtyLngsdGhpcy52YWx1ZVtpXVsyXT0odGhpcy52YWx1ZVtpXVsyXS1yLnkpKmUvci5oZWlnaHQrci55KTpcIkhcIj09bj90aGlzLnZhbHVlW2ldWzFdPSh0aGlzLnZhbHVlW2ldWzFdLXIueCkqdC9yLndpZHRoK3IueDpcIlZcIj09bj90aGlzLnZhbHVlW2ldWzFdPSh0aGlzLnZhbHVlW2ldWzFdLXIueSkqZS9yLmhlaWdodCtyLnk6XCJDXCI9PW58fFwiU1wiPT1ufHxcIlFcIj09bj8odGhpcy52YWx1ZVtpXVsxXT0odGhpcy52YWx1ZVtpXVsxXS1yLngpKnQvci53aWR0aCtyLngsdGhpcy52YWx1ZVtpXVsyXT0odGhpcy52YWx1ZVtpXVsyXS1yLnkpKmUvci5oZWlnaHQrci55LHRoaXMudmFsdWVbaV1bM109KHRoaXMudmFsdWVbaV1bM10tci54KSp0L3Iud2lkdGgrci54LHRoaXMudmFsdWVbaV1bNF09KHRoaXMudmFsdWVbaV1bNF0tci55KSplL3IuaGVpZ2h0K3IueSxcIkNcIj09biYmKHRoaXMudmFsdWVbaV1bNV09KHRoaXMudmFsdWVbaV1bNV0tci54KSp0L3Iud2lkdGgrci54LHRoaXMudmFsdWVbaV1bNl09KHRoaXMudmFsdWVbaV1bNl0tci55KSplL3IuaGVpZ2h0K3IueSkpOlwiQVwiPT1uJiYodGhpcy52YWx1ZVtpXVsxXT10aGlzLnZhbHVlW2ldWzFdKnQvci53aWR0aCx0aGlzLnZhbHVlW2ldWzJdPXRoaXMudmFsdWVbaV1bMl0qZS9yLmhlaWdodCx0aGlzLnZhbHVlW2ldWzZdPSh0aGlzLnZhbHVlW2ldWzZdLXIueCkqdC9yLndpZHRoK3IueCx0aGlzLnZhbHVlW2ldWzddPSh0aGlzLnZhbHVlW2ldWzddLXIueSkqZS9yLmhlaWdodCtyLnkpO3JldHVybiB0aGlzfSxlcXVhbENvbW1hbmRzOmZ1bmN0aW9uKHQpe3ZhciBlLGksbjtmb3IodD1uZXcgYi5QYXRoQXJyYXkodCksbj10aGlzLnZhbHVlLmxlbmd0aD09PXQudmFsdWUubGVuZ3RoLGU9MCxpPXRoaXMudmFsdWUubGVuZ3RoO24mJmU8aTtlKyspbj10aGlzLnZhbHVlW2VdWzBdPT09dC52YWx1ZVtlXVswXTtyZXR1cm4gbn0sbW9ycGg6ZnVuY3Rpb24odCl7cmV0dXJuIHQ9bmV3IGIuUGF0aEFycmF5KHQpLHRoaXMuZXF1YWxDb21tYW5kcyh0KT90aGlzLmRlc3RpbmF0aW9uPXQ6dGhpcy5kZXN0aW5hdGlvbj1udWxsLHRoaXN9LGF0OmZ1bmN0aW9uKHQpe2lmKCF0aGlzLmRlc3RpbmF0aW9uKXJldHVybiB0aGlzO3ZhciBlLGksbixyLHM9dGhpcy52YWx1ZSxvPXRoaXMuZGVzdGluYXRpb24udmFsdWUsYT1bXSxoPW5ldyBiLlBhdGhBcnJheTtmb3IoZT0wLGk9cy5sZW5ndGg7ZTxpO2UrKyl7Zm9yKGFbZV09W3NbZV1bMF1dLG49MSxyPXNbZV0ubGVuZ3RoO248cjtuKyspYVtlXVtuXT1zW2VdW25dKyhvW2VdW25dLXNbZV1bbl0pKnQ7XCJBXCI9PT1hW2VdWzBdJiYoYVtlXVs0XT0rKDAhPWFbZV1bNF0pLGFbZV1bNV09KygwIT1hW2VdWzVdKSl9cmV0dXJuIGgudmFsdWU9YSxofSxwYXJzZTpmdW5jdGlvbih0KXtpZih0IGluc3RhbmNlb2YgYi5QYXRoQXJyYXkpcmV0dXJuIHQudmFsdWVPZigpO3ZhciBlLG4scj17TToyLEw6MixIOjEsVjoxLEM6NixTOjQsUTo0LFQ6MixBOjcsWjowfTt0PVwic3RyaW5nXCI9PXR5cGVvZiB0P3QucmVwbGFjZShiLnJlZ2V4Lm51bWJlcnNXaXRoRG90cyxpKS5yZXBsYWNlKGIucmVnZXgucGF0aExldHRlcnMsXCIgJCYgXCIpLnJlcGxhY2UoYi5yZWdleC5oeXBoZW4sXCIkMSAtXCIpLnRyaW0oKS5zcGxpdChiLnJlZ2V4LmRlbGltaXRlcik6dC5yZWR1Y2UoZnVuY3Rpb24odCxlKXtyZXR1cm5bXS5jb25jYXQuY2FsbCh0LGUpfSxbXSk7dmFyIG49W10scz1uZXcgYi5Qb2ludCxvPW5ldyBiLlBvaW50LGE9MCxoPXQubGVuZ3RoO2Rve2IucmVnZXguaXNQYXRoTGV0dGVyLnRlc3QodFthXSk/KGU9dFthXSwrK2EpOlwiTVwiPT1lP2U9XCJMXCI6XCJtXCI9PWUmJihlPVwibFwiKSxuLnB1c2goQ1tlXS5jYWxsKG51bGwsdC5zbGljZShhLGErPXJbZS50b1VwcGVyQ2FzZSgpXSkubWFwKHBhcnNlRmxvYXQpLHMsbykpfXdoaWxlKGg+YSk7cmV0dXJuIG59LGJib3g6ZnVuY3Rpb24oKXtyZXR1cm4gYi5wYXJzZXIucGF0aC5zZXRBdHRyaWJ1dGUoXCJkXCIsdGhpcy50b1N0cmluZygpKSxiLnBhcnNlci5wYXRoLmdldEJCb3goKX19KSxiLk51bWJlcj1iLmludmVudCh7Y3JlYXRlOmZ1bmN0aW9uKHQsZSl7dGhpcy52YWx1ZT0wLHRoaXMudW5pdD1lfHxcIlwiLFwibnVtYmVyXCI9PXR5cGVvZiB0P3RoaXMudmFsdWU9aXNOYU4odCk/MDppc0Zpbml0ZSh0KT90OnQ8MD8tMy40ZTM4OjMuNGUzODpcInN0cmluZ1wiPT10eXBlb2YgdD8oZT10Lm1hdGNoKGIucmVnZXgubnVtYmVyQW5kVW5pdCkpJiYodGhpcy52YWx1ZT1wYXJzZUZsb2F0KGVbMV0pLFwiJVwiPT1lWzVdP3RoaXMudmFsdWUvPTEwMDpcInNcIj09ZVs1XSYmKHRoaXMudmFsdWUqPTFlMyksdGhpcy51bml0PWVbNV0pOnQgaW5zdGFuY2VvZiBiLk51bWJlciYmKHRoaXMudmFsdWU9dC52YWx1ZU9mKCksdGhpcy51bml0PXQudW5pdCl9LGV4dGVuZDp7dG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4oXCIlXCI9PXRoaXMudW5pdD9+figxZTgqdGhpcy52YWx1ZSkvMWU2Olwic1wiPT10aGlzLnVuaXQ/dGhpcy52YWx1ZS8xZTM6dGhpcy52YWx1ZSkrdGhpcy51bml0fSx0b0pTT046ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b1N0cmluZygpfSx2YWx1ZU9mOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWV9LHBsdXM6ZnVuY3Rpb24odCl7cmV0dXJuIHQ9bmV3IGIuTnVtYmVyKHQpLG5ldyBiLk51bWJlcih0aGlzK3QsdGhpcy51bml0fHx0LnVuaXQpfSxtaW51czpmdW5jdGlvbih0KXtyZXR1cm4gdD1uZXcgYi5OdW1iZXIodCksbmV3IGIuTnVtYmVyKHRoaXMtdCx0aGlzLnVuaXR8fHQudW5pdCl9LHRpbWVzOmZ1bmN0aW9uKHQpe3JldHVybiB0PW5ldyBiLk51bWJlcih0KSxuZXcgYi5OdW1iZXIodGhpcyp0LHRoaXMudW5pdHx8dC51bml0KX0sZGl2aWRlOmZ1bmN0aW9uKHQpe3JldHVybiB0PW5ldyBiLk51bWJlcih0KSxuZXcgYi5OdW1iZXIodGhpcy90LHRoaXMudW5pdHx8dC51bml0KX0sdG86ZnVuY3Rpb24odCl7dmFyIGU9bmV3IGIuTnVtYmVyKHRoaXMpO3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiB0JiYoZS51bml0PXQpLGV9LG1vcnBoOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRlc3RpbmF0aW9uPW5ldyBiLk51bWJlcih0KSx0LnJlbGF0aXZlJiYodGhpcy5kZXN0aW5hdGlvbi52YWx1ZSs9dGhpcy52YWx1ZSksdGhpc30sYXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZGVzdGluYXRpb24/bmV3IGIuTnVtYmVyKHRoaXMuZGVzdGluYXRpb24pLm1pbnVzKHRoaXMpLnRpbWVzKHQpLnBsdXModGhpcyk6dGhpc319fSksYi5FbGVtZW50PWIuaW52ZW50KHtjcmVhdGU6ZnVuY3Rpb24odCl7dGhpcy5fc3Ryb2tlPWIuZGVmYXVsdHMuYXR0cnMuc3Ryb2tlLHRoaXMuX2V2ZW50PW51bGwsdGhpcy5kb209e30sKHRoaXMubm9kZT10KSYmKHRoaXMudHlwZT10Lm5vZGVOYW1lLHRoaXMubm9kZS5pbnN0YW5jZT10aGlzLHRoaXMuX3N0cm9rZT10LmdldEF0dHJpYnV0ZShcInN0cm9rZVwiKXx8dGhpcy5fc3Ryb2tlKX0sZXh0ZW5kOnt4OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmF0dHIoXCJ4XCIsdCl9LHk6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYXR0cihcInlcIix0KX0sY3g6ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/dGhpcy54KCkrdGhpcy53aWR0aCgpLzI6dGhpcy54KHQtdGhpcy53aWR0aCgpLzIpfSxjeTpmdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dD90aGlzLnkoKSt0aGlzLmhlaWdodCgpLzI6dGhpcy55KHQtdGhpcy5oZWlnaHQoKS8yKX0sbW92ZTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLngodCkueShlKX0sY2VudGVyOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuY3godCkuY3koZSl9LHdpZHRoOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmF0dHIoXCJ3aWR0aFwiLHQpfSxoZWlnaHQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYXR0cihcImhlaWdodFwiLHQpfSxzaXplOmZ1bmN0aW9uKHQsZSl7dmFyIGk9bCh0aGlzLHQsZSk7cmV0dXJuIHRoaXMud2lkdGgobmV3IGIuTnVtYmVyKGkud2lkdGgpKS5oZWlnaHQobmV3IGIuTnVtYmVyKGkuaGVpZ2h0KSl9LGNsb25lOmZ1bmN0aW9uKHQpe3RoaXMud3JpdGVEYXRhVG9Eb20oKTt2YXIgZT14KHRoaXMubm9kZS5jbG9uZU5vZGUoITApKTtyZXR1cm4gdD90LmFkZChlKTp0aGlzLmFmdGVyKGUpLGV9LHJlbW92ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhcmVudCgpJiZ0aGlzLnBhcmVudCgpLnJlbW92ZUVsZW1lbnQodGhpcyksdGhpc30scmVwbGFjZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hZnRlcih0KS5yZW1vdmUoKSx0fSxhZGRUbzpmdW5jdGlvbih0KXtyZXR1cm4gdC5wdXQodGhpcyl9LHB1dEluOmZ1bmN0aW9uKHQpe3JldHVybiB0LmFkZCh0aGlzKX0saWQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYXR0cihcImlkXCIsdCl9LGluc2lkZTpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuYmJveCgpO3JldHVybiB0PmkueCYmZT5pLnkmJnQ8aS54K2kud2lkdGgmJmU8aS55K2kuaGVpZ2h0fSxzaG93OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3R5bGUoXCJkaXNwbGF5XCIsXCJcIil9LGhpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdHlsZShcImRpc3BsYXlcIixcIm5vbmVcIil9LHZpc2libGU6ZnVuY3Rpb24oKXtyZXR1cm5cIm5vbmVcIiE9dGhpcy5zdHlsZShcImRpc3BsYXlcIil9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXR0cihcImlkXCIpfSxjbGFzc2VzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5hdHRyKFwiY2xhc3NcIik7cmV0dXJuIG51bGw9PXQ/W106dC50cmltKCkuc3BsaXQoYi5yZWdleC5kZWxpbWl0ZXIpfSxoYXNDbGFzczpmdW5jdGlvbih0KXtyZXR1cm4tMSE9dGhpcy5jbGFzc2VzKCkuaW5kZXhPZih0KX0sYWRkQ2xhc3M6ZnVuY3Rpb24odCl7aWYoIXRoaXMuaGFzQ2xhc3ModCkpe3ZhciBlPXRoaXMuY2xhc3NlcygpO2UucHVzaCh0KSx0aGlzLmF0dHIoXCJjbGFzc1wiLGUuam9pbihcIiBcIikpfXJldHVybiB0aGlzfSxyZW1vdmVDbGFzczpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5oYXNDbGFzcyh0KSYmdGhpcy5hdHRyKFwiY2xhc3NcIix0aGlzLmNsYXNzZXMoKS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUhPXR9KS5qb2luKFwiIFwiKSksdGhpc30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaGFzQ2xhc3ModCk/dGhpcy5yZW1vdmVDbGFzcyh0KTp0aGlzLmFkZENsYXNzKHQpfSxyZWZlcmVuY2U6ZnVuY3Rpb24odCl7cmV0dXJuIGIuZ2V0KHRoaXMuYXR0cih0KSl9LHBhcmVudDpmdW5jdGlvbihlKXt2YXIgaT10aGlzO2lmKCFpLm5vZGUucGFyZW50Tm9kZSlyZXR1cm4gbnVsbDtpZihpPWIuYWRvcHQoaS5ub2RlLnBhcmVudE5vZGUpLCFlKXJldHVybiBpO2Zvcig7aSYmaS5ub2RlIGluc3RhbmNlb2YgdC5TVkdFbGVtZW50Oyl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGU/aS5tYXRjaGVzKGUpOmkgaW5zdGFuY2VvZiBlKXJldHVybiBpO2lmKCFpLm5vZGUucGFyZW50Tm9kZXx8XCIjZG9jdW1lbnRcIj09aS5ub2RlLnBhcmVudE5vZGUubm9kZU5hbWUpcmV0dXJuIG51bGw7aT1iLmFkb3B0KGkubm9kZS5wYXJlbnROb2RlKX19LGRvYzpmdW5jdGlvbigpe3JldHVybiB0aGlzIGluc3RhbmNlb2YgYi5Eb2M/dGhpczp0aGlzLnBhcmVudChiLkRvYyl9LHBhcmVudHM6ZnVuY3Rpb24odCl7dmFyIGU9W10saT10aGlzO2Rve2lmKCEoaT1pLnBhcmVudCh0KSl8fCFpLm5vZGUpYnJlYWs7ZS5wdXNoKGkpfXdoaWxlKGkucGFyZW50KTtyZXR1cm4gZX0sbWF0Y2hlczpmdW5jdGlvbih0KXtyZXR1cm4gcyh0aGlzLm5vZGUsdCl9LG5hdGl2ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGV9LHN2ZzpmdW5jdGlvbih0KXt2YXIgaT1lLmNyZWF0ZUVsZW1lbnQoXCJzdmdcIik7aWYoISh0JiZ0aGlzIGluc3RhbmNlb2YgYi5QYXJlbnQpKXJldHVybiBpLmFwcGVuZENoaWxkKHQ9ZS5jcmVhdGVFbGVtZW50KFwic3ZnXCIpKSx0aGlzLndyaXRlRGF0YVRvRG9tKCksdC5hcHBlbmRDaGlsZCh0aGlzLm5vZGUuY2xvbmVOb2RlKCEwKSksaS5pbm5lckhUTUwucmVwbGFjZSgvXjxzdmc+LyxcIlwiKS5yZXBsYWNlKC88XFwvc3ZnPiQvLFwiXCIpO2kuaW5uZXJIVE1MPVwiPHN2Zz5cIit0LnJlcGxhY2UoL1xcbi8sXCJcIikucmVwbGFjZSgvPChbXFx3Oi1dKykoW148XSs/KVxcLz4vZyxcIjwkMSQyPjwvJDE+XCIpK1wiPC9zdmc+XCI7Zm9yKHZhciBuPTAscj1pLmZpcnN0Q2hpbGQuY2hpbGROb2Rlcy5sZW5ndGg7bjxyO24rKyl0aGlzLm5vZGUuYXBwZW5kQ2hpbGQoaS5maXJzdENoaWxkLmZpcnN0Q2hpbGQpO3JldHVybiB0aGlzfSx3cml0ZURhdGFUb0RvbTpmdW5jdGlvbigpe2lmKHRoaXMuZWFjaHx8dGhpcy5saW5lcyl7KHRoaXMuZWFjaD90aGlzOnRoaXMubGluZXMoKSkuZWFjaChmdW5jdGlvbigpe3RoaXMud3JpdGVEYXRhVG9Eb20oKX0pfXJldHVybiB0aGlzLm5vZGUucmVtb3ZlQXR0cmlidXRlKFwic3ZnanM6ZGF0YVwiKSxPYmplY3Qua2V5cyh0aGlzLmRvbSkubGVuZ3RoJiZ0aGlzLm5vZGUuc2V0QXR0cmlidXRlKFwic3ZnanM6ZGF0YVwiLEpTT04uc3RyaW5naWZ5KHRoaXMuZG9tKSksdGhpc30sc2V0RGF0YTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5kb209dCx0aGlzfSxpczpmdW5jdGlvbih0KXtyZXR1cm4gcih0aGlzLHQpfX19KSxiLmVhc2luZz17XCItXCI6ZnVuY3Rpb24odCl7cmV0dXJuIHR9LFwiPD5cIjpmdW5jdGlvbih0KXtyZXR1cm4tTWF0aC5jb3ModCpNYXRoLlBJKS8yKy41fSxcIj5cIjpmdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5zaW4odCpNYXRoLlBJLzIpfSxcIjxcIjpmdW5jdGlvbih0KXtyZXR1cm4gMS1NYXRoLmNvcyh0Kk1hdGguUEkvMil9fSxiLm1vcnBoPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlLGkpe3JldHVybiBuZXcgYi5Nb3JwaE9iaihlLGkpLmF0KHQpfX0sYi5TaXR1YXRpb249Yi5pbnZlbnQoe2NyZWF0ZTpmdW5jdGlvbih0KXt0aGlzLmluaXQ9ITEsdGhpcy5yZXZlcnNlZD0hMSx0aGlzLnJldmVyc2luZz0hMSx0aGlzLmR1cmF0aW9uPW5ldyBiLk51bWJlcih0LmR1cmF0aW9uKS52YWx1ZU9mKCksdGhpcy5kZWxheT1uZXcgYi5OdW1iZXIodC5kZWxheSkudmFsdWVPZigpLHRoaXMuc3RhcnQ9K25ldyBEYXRlK3RoaXMuZGVsYXksdGhpcy5maW5pc2g9dGhpcy5zdGFydCt0aGlzLmR1cmF0aW9uLHRoaXMuZWFzZT10LmVhc2UsdGhpcy5sb29wPTAsdGhpcy5sb29wcz0hMSx0aGlzLmFuaW1hdGlvbnM9e30sdGhpcy5hdHRycz17fSx0aGlzLnN0eWxlcz17fSx0aGlzLnRyYW5zZm9ybXM9W10sdGhpcy5vbmNlPXt9fX0pLGIuRlg9Yi5pbnZlbnQoe2NyZWF0ZTpmdW5jdGlvbih0KXt0aGlzLl90YXJnZXQ9dCx0aGlzLnNpdHVhdGlvbnM9W10sdGhpcy5hY3RpdmU9ITEsdGhpcy5zaXR1YXRpb249bnVsbCx0aGlzLnBhdXNlZD0hMSx0aGlzLmxhc3RQb3M9MCx0aGlzLnBvcz0wLHRoaXMuYWJzUG9zPTAsdGhpcy5fc3BlZWQ9MX0sZXh0ZW5kOnthbmltYXRlOmZ1bmN0aW9uKHQsZSxpKXtcIm9iamVjdFwiPT10eXBlb2YgdCYmKGU9dC5lYXNlLGk9dC5kZWxheSx0PXQuZHVyYXRpb24pO3ZhciBuPW5ldyBiLlNpdHVhdGlvbih7ZHVyYXRpb246dHx8MWUzLGRlbGF5Oml8fDAsZWFzZTpiLmVhc2luZ1tlfHxcIi1cIl18fGV9KTtyZXR1cm4gdGhpcy5xdWV1ZShuKSx0aGlzfSxkZWxheTpmdW5jdGlvbih0KXt2YXIgZT1uZXcgYi5TaXR1YXRpb24oe2R1cmF0aW9uOnQsZGVsYXk6MCxlYXNlOmIuZWFzaW5nW1wiLVwiXX0pO3JldHVybiB0aGlzLnF1ZXVlKGUpfSx0YXJnZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQgaW5zdGFuY2VvZiBiLkVsZW1lbnQ/KHRoaXMuX3RhcmdldD10LHRoaXMpOnRoaXMuX3RhcmdldH0sdGltZVRvQWJzUG9zOmZ1bmN0aW9uKHQpe3JldHVybih0LXRoaXMuc2l0dWF0aW9uLnN0YXJ0KS8odGhpcy5zaXR1YXRpb24uZHVyYXRpb24vdGhpcy5fc3BlZWQpfSxhYnNQb3NUb1RpbWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2l0dWF0aW9uLmR1cmF0aW9uL3RoaXMuX3NwZWVkKnQrdGhpcy5zaXR1YXRpb24uc3RhcnR9LHN0YXJ0QW5pbUZyYW1lOmZ1bmN0aW9uKCl7dGhpcy5zdG9wQW5pbUZyYW1lKCksdGhpcy5hbmltYXRpb25GcmFtZT10LnJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpe3RoaXMuc3RlcCgpfS5iaW5kKHRoaXMpKX0sc3RvcEFuaW1GcmFtZTpmdW5jdGlvbigpe3QuY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5hbmltYXRpb25GcmFtZSl9LHN0YXJ0OmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuYWN0aXZlJiZ0aGlzLnNpdHVhdGlvbiYmKHRoaXMuYWN0aXZlPSEwLHRoaXMuc3RhcnRDdXJyZW50KCkpLHRoaXN9LHN0YXJ0Q3VycmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNpdHVhdGlvbi5zdGFydD0rbmV3IERhdGUrdGhpcy5zaXR1YXRpb24uZGVsYXkvdGhpcy5fc3BlZWQsdGhpcy5zaXR1YXRpb24uZmluaXNoPXRoaXMuc2l0dWF0aW9uLnN0YXJ0K3RoaXMuc2l0dWF0aW9uLmR1cmF0aW9uL3RoaXMuX3NwZWVkLHRoaXMuaW5pdEFuaW1hdGlvbnMoKS5zdGVwKCl9LHF1ZXVlOmZ1bmN0aW9uKHQpe3JldHVybihcImZ1bmN0aW9uXCI9PXR5cGVvZiB0fHx0IGluc3RhbmNlb2YgYi5TaXR1YXRpb24pJiZ0aGlzLnNpdHVhdGlvbnMucHVzaCh0KSx0aGlzLnNpdHVhdGlvbnx8KHRoaXMuc2l0dWF0aW9uPXRoaXMuc2l0dWF0aW9ucy5zaGlmdCgpKSx0aGlzfSxkZXF1ZXVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RvcCgpLHRoaXMuc2l0dWF0aW9uPXRoaXMuc2l0dWF0aW9ucy5zaGlmdCgpLHRoaXMuc2l0dWF0aW9uJiYodGhpcy5zaXR1YXRpb24gaW5zdGFuY2VvZiBiLlNpdHVhdGlvbj90aGlzLnN0YXJ0KCk6dGhpcy5zaXR1YXRpb24uY2FsbCh0aGlzKSksdGhpc30saW5pdEFuaW1hdGlvbnM6ZnVuY3Rpb24oKXt2YXIgdCxlLGksbj10aGlzLnNpdHVhdGlvbjtpZihuLmluaXQpcmV0dXJuIHRoaXM7Zm9yKHQgaW4gbi5hbmltYXRpb25zKWZvcihpPXRoaXMudGFyZ2V0KClbdF0oKSxBcnJheS5pc0FycmF5KGkpfHwoaT1baV0pLEFycmF5LmlzQXJyYXkobi5hbmltYXRpb25zW3RdKXx8KG4uYW5pbWF0aW9uc1t0XT1bbi5hbmltYXRpb25zW3RdXSksZT1pLmxlbmd0aDtlLS07KW4uYW5pbWF0aW9uc1t0XVtlXWluc3RhbmNlb2YgYi5OdW1iZXImJihpW2VdPW5ldyBiLk51bWJlcihpW2VdKSksbi5hbmltYXRpb25zW3RdW2VdPWlbZV0ubW9ycGgobi5hbmltYXRpb25zW3RdW2VdKTtmb3IodCBpbiBuLmF0dHJzKW4uYXR0cnNbdF09bmV3IGIuTW9ycGhPYmoodGhpcy50YXJnZXQoKS5hdHRyKHQpLG4uYXR0cnNbdF0pO2Zvcih0IGluIG4uc3R5bGVzKW4uc3R5bGVzW3RdPW5ldyBiLk1vcnBoT2JqKHRoaXMudGFyZ2V0KCkuc3R5bGUodCksbi5zdHlsZXNbdF0pO3JldHVybiBuLmluaXRpYWxUcmFuc2Zvcm1hdGlvbj10aGlzLnRhcmdldCgpLm1hdHJpeGlmeSgpLG4uaW5pdD0hMCx0aGlzfSxjbGVhclF1ZXVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2l0dWF0aW9ucz1bXSx0aGlzfSxjbGVhckN1cnJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaXR1YXRpb249bnVsbCx0aGlzfSxzdG9wOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5hY3RpdmU7cmV0dXJuIHRoaXMuYWN0aXZlPSExLGUmJnRoaXMuY2xlYXJRdWV1ZSgpLHQmJnRoaXMuc2l0dWF0aW9uJiYoIWkmJnRoaXMuc3RhcnRDdXJyZW50KCksdGhpcy5hdEVuZCgpKSx0aGlzLnN0b3BBbmltRnJhbWUoKSx0aGlzLmNsZWFyQ3VycmVudCgpfSxyZXNldDpmdW5jdGlvbigpe2lmKHRoaXMuc2l0dWF0aW9uKXt2YXIgdD10aGlzLnNpdHVhdGlvbjt0aGlzLnN0b3AoKSx0aGlzLnNpdHVhdGlvbj10LHRoaXMuYXRTdGFydCgpfXJldHVybiB0aGlzfSxmaW5pc2g6ZnVuY3Rpb24oKXtmb3IodGhpcy5zdG9wKCEwLCExKTt0aGlzLmRlcXVldWUoKS5zaXR1YXRpb24mJnRoaXMuc3RvcCghMCwhMSk7KTtyZXR1cm4gdGhpcy5jbGVhclF1ZXVlKCkuY2xlYXJDdXJyZW50KCksdGhpc30sYXRTdGFydDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmF0KDAsITApfSxhdEVuZDpmdW5jdGlvbigpe3JldHVybiEwPT09dGhpcy5zaXR1YXRpb24ubG9vcHMmJih0aGlzLnNpdHVhdGlvbi5sb29wcz10aGlzLnNpdHVhdGlvbi5sb29wKzEpLFwibnVtYmVyXCI9PXR5cGVvZiB0aGlzLnNpdHVhdGlvbi5sb29wcz90aGlzLmF0KHRoaXMuc2l0dWF0aW9uLmxvb3BzLCEwKTp0aGlzLmF0KDEsITApfSxhdDpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuc2l0dWF0aW9uLmR1cmF0aW9uL3RoaXMuX3NwZWVkO3JldHVybiB0aGlzLmFic1Bvcz10LGV8fCh0aGlzLnNpdHVhdGlvbi5yZXZlcnNlZCYmKHRoaXMuYWJzUG9zPTEtdGhpcy5hYnNQb3MpLHRoaXMuYWJzUG9zKz10aGlzLnNpdHVhdGlvbi5sb29wKSx0aGlzLnNpdHVhdGlvbi5zdGFydD0rbmV3IERhdGUtdGhpcy5hYnNQb3MqaSx0aGlzLnNpdHVhdGlvbi5maW5pc2g9dGhpcy5zaXR1YXRpb24uc3RhcnQraSx0aGlzLnN0ZXAoITApfSxzcGVlZDpmdW5jdGlvbih0KXtyZXR1cm4gMD09PXQ/dGhpcy5wYXVzZSgpOnQ/KHRoaXMuX3NwZWVkPXQsdGhpcy5hdCh0aGlzLmFic1BvcywhMCkpOnRoaXMuX3NwZWVkfSxsb29wOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5sYXN0KCk7cmV0dXJuIGkubG9vcHM9bnVsbD09dHx8dCxpLmxvb3A9MCxlJiYoaS5yZXZlcnNpbmc9ITApLHRoaXN9LHBhdXNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGF1c2VkPSEwLHRoaXMuc3RvcEFuaW1GcmFtZSgpLHRoaXN9LHBsYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXVzZWQ/KHRoaXMucGF1c2VkPSExLHRoaXMuYXQodGhpcy5hYnNQb3MsITApKTp0aGlzfSxyZXZlcnNlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubGFzdCgpO3JldHVybiBlLnJldmVyc2VkPXZvaWQgMD09PXQ/IWUucmV2ZXJzZWQ6dCx0aGlzfSxwcm9ncmVzczpmdW5jdGlvbih0KXtyZXR1cm4gdD90aGlzLnNpdHVhdGlvbi5lYXNlKHRoaXMucG9zKTp0aGlzLnBvc30sYWZ0ZXI6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5sYXN0KCksaT1mdW5jdGlvbiBpKG4pe24uZGV0YWlsLnNpdHVhdGlvbj09ZSYmKHQuY2FsbCh0aGlzLGUpLHRoaXMub2ZmKFwiZmluaXNoZWQuZnhcIixpKSl9O3JldHVybiB0aGlzLnRhcmdldCgpLm9uKFwiZmluaXNoZWQuZnhcIixpKSx0aGlzLl9jYWxsU3RhcnQoKX0sZHVyaW5nOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubGFzdCgpLGk9ZnVuY3Rpb24oaSl7aS5kZXRhaWwuc2l0dWF0aW9uPT1lJiZ0LmNhbGwodGhpcyxpLmRldGFpbC5wb3MsYi5tb3JwaChpLmRldGFpbC5wb3MpLGkuZGV0YWlsLmVhc2VkLGUpfTtyZXR1cm4gdGhpcy50YXJnZXQoKS5vZmYoXCJkdXJpbmcuZnhcIixpKS5vbihcImR1cmluZy5meFwiLGkpLHRoaXMuYWZ0ZXIoZnVuY3Rpb24oKXt0aGlzLm9mZihcImR1cmluZy5meFwiLGkpfSksdGhpcy5fY2FsbFN0YXJ0KCl9LGFmdGVyQWxsOmZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uIGUoaSl7dC5jYWxsKHRoaXMpLHRoaXMub2ZmKFwiYWxsZmluaXNoZWQuZnhcIixlKX07cmV0dXJuIHRoaXMudGFyZ2V0KCkub2ZmKFwiYWxsZmluaXNoZWQuZnhcIixlKS5vbihcImFsbGZpbmlzaGVkLmZ4XCIsZSksdGhpcy5fY2FsbFN0YXJ0KCl9LGR1cmluZ0FsbDpmdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbihlKXt0LmNhbGwodGhpcyxlLmRldGFpbC5wb3MsYi5tb3JwaChlLmRldGFpbC5wb3MpLGUuZGV0YWlsLmVhc2VkLGUuZGV0YWlsLnNpdHVhdGlvbil9O3JldHVybiB0aGlzLnRhcmdldCgpLm9mZihcImR1cmluZy5meFwiLGUpLm9uKFwiZHVyaW5nLmZ4XCIsZSksdGhpcy5hZnRlckFsbChmdW5jdGlvbigpe3RoaXMub2ZmKFwiZHVyaW5nLmZ4XCIsZSl9KSx0aGlzLl9jYWxsU3RhcnQoKX0sbGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNpdHVhdGlvbnMubGVuZ3RoP3RoaXMuc2l0dWF0aW9uc1t0aGlzLnNpdHVhdGlvbnMubGVuZ3RoLTFdOnRoaXMuc2l0dWF0aW9ufSxhZGQ6ZnVuY3Rpb24odCxlLGkpe3JldHVybiB0aGlzLmxhc3QoKVtpfHxcImFuaW1hdGlvbnNcIl1bdF09ZSx0aGlzLl9jYWxsU3RhcnQoKX0sc3RlcDpmdW5jdGlvbih0KXtpZih0fHwodGhpcy5hYnNQb3M9dGhpcy50aW1lVG9BYnNQb3MoK25ldyBEYXRlKSksITEhPT10aGlzLnNpdHVhdGlvbi5sb29wcyl7dmFyIGUsaSxuO2U9TWF0aC5tYXgodGhpcy5hYnNQb3MsMCksaT1NYXRoLmZsb29yKGUpLCEwPT09dGhpcy5zaXR1YXRpb24ubG9vcHN8fGk8dGhpcy5zaXR1YXRpb24ubG9vcHM/KHRoaXMucG9zPWUtaSxuPXRoaXMuc2l0dWF0aW9uLmxvb3AsdGhpcy5zaXR1YXRpb24ubG9vcD1pKToodGhpcy5hYnNQb3M9dGhpcy5zaXR1YXRpb24ubG9vcHMsdGhpcy5wb3M9MSxuPXRoaXMuc2l0dWF0aW9uLmxvb3AtMSx0aGlzLnNpdHVhdGlvbi5sb29wPXRoaXMuc2l0dWF0aW9uLmxvb3BzKSx0aGlzLnNpdHVhdGlvbi5yZXZlcnNpbmcmJih0aGlzLnNpdHVhdGlvbi5yZXZlcnNlZD10aGlzLnNpdHVhdGlvbi5yZXZlcnNlZCE9Qm9vbGVhbigodGhpcy5zaXR1YXRpb24ubG9vcC1uKSUyKSl9ZWxzZSB0aGlzLmFic1Bvcz1NYXRoLm1pbih0aGlzLmFic1BvcywxKSx0aGlzLnBvcz10aGlzLmFic1Bvczt0aGlzLnBvczwwJiYodGhpcy5wb3M9MCksdGhpcy5zaXR1YXRpb24ucmV2ZXJzZWQmJih0aGlzLnBvcz0xLXRoaXMucG9zKTt2YXIgcj10aGlzLnNpdHVhdGlvbi5lYXNlKHRoaXMucG9zKTtmb3IodmFyIHMgaW4gdGhpcy5zaXR1YXRpb24ub25jZSlzPnRoaXMubGFzdFBvcyYmczw9ciYmKHRoaXMuc2l0dWF0aW9uLm9uY2Vbc10uY2FsbCh0aGlzLnRhcmdldCgpLHRoaXMucG9zLHIpLGRlbGV0ZSB0aGlzLnNpdHVhdGlvbi5vbmNlW3NdKTtyZXR1cm4gdGhpcy5hY3RpdmUmJnRoaXMudGFyZ2V0KCkuZmlyZShcImR1cmluZ1wiLHtwb3M6dGhpcy5wb3MsZWFzZWQ6cixmeDp0aGlzLHNpdHVhdGlvbjp0aGlzLnNpdHVhdGlvbn0pLHRoaXMuc2l0dWF0aW9uPyh0aGlzLmVhY2hBdCgpLDE9PXRoaXMucG9zJiYhdGhpcy5zaXR1YXRpb24ucmV2ZXJzZWR8fHRoaXMuc2l0dWF0aW9uLnJldmVyc2VkJiYwPT10aGlzLnBvcz8odGhpcy5zdG9wQW5pbUZyYW1lKCksdGhpcy50YXJnZXQoKS5maXJlKFwiZmluaXNoZWRcIix7Zng6dGhpcyxzaXR1YXRpb246dGhpcy5zaXR1YXRpb259KSx0aGlzLnNpdHVhdGlvbnMubGVuZ3RofHwodGhpcy50YXJnZXQoKS5maXJlKFwiYWxsZmluaXNoZWRcIiksdGhpcy5zaXR1YXRpb25zLmxlbmd0aHx8KHRoaXMudGFyZ2V0KCkub2ZmKFwiLmZ4XCIpLHRoaXMuYWN0aXZlPSExKSksdGhpcy5hY3RpdmU/dGhpcy5kZXF1ZXVlKCk6dGhpcy5jbGVhckN1cnJlbnQoKSk6IXRoaXMucGF1c2VkJiZ0aGlzLmFjdGl2ZSYmdGhpcy5zdGFydEFuaW1GcmFtZSgpLHRoaXMubGFzdFBvcz1yLHRoaXMpOnRoaXN9LGVhY2hBdDpmdW5jdGlvbigpe3ZhciB0LGUsaSxuPXRoaXMscj10aGlzLnRhcmdldCgpLHM9dGhpcy5zaXR1YXRpb247Zm9yKHQgaW4gcy5hbmltYXRpb25zKWk9W10uY29uY2F0KHMuYW5pbWF0aW9uc1t0XSkubWFwKGZ1bmN0aW9uKHQpe3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiB0JiZ0LmF0P3QuYXQocy5lYXNlKG4ucG9zKSxuLnBvcyk6dH0pLHJbdF0uYXBwbHkocixpKTtmb3IodCBpbiBzLmF0dHJzKWk9W3RdLmNvbmNhdChzLmF0dHJzW3RdKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIHQmJnQuYXQ/dC5hdChzLmVhc2Uobi5wb3MpLG4ucG9zKTp0fSksci5hdHRyLmFwcGx5KHIsaSk7Zm9yKHQgaW4gcy5zdHlsZXMpaT1bdF0uY29uY2F0KHMuc3R5bGVzW3RdKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIHQmJnQuYXQ/dC5hdChzLmVhc2Uobi5wb3MpLG4ucG9zKTp0fSksci5zdHlsZS5hcHBseShyLGkpO2lmKHMudHJhbnNmb3Jtcy5sZW5ndGgpe2ZvcihpPXMuaW5pdGlhbFRyYW5zZm9ybWF0aW9uLHQ9MCxlPXMudHJhbnNmb3Jtcy5sZW5ndGg7dDxlO3QrKyl7dmFyIG89cy50cmFuc2Zvcm1zW3RdO28gaW5zdGFuY2VvZiBiLk1hdHJpeD9pPW8ucmVsYXRpdmU/aS5tdWx0aXBseSgobmV3IGIuTWF0cml4KS5tb3JwaChvKS5hdChzLmVhc2UodGhpcy5wb3MpKSk6aS5tb3JwaChvKS5hdChzLmVhc2UodGhpcy5wb3MpKTooby5yZWxhdGl2ZXx8by51bmRvKGkuZXh0cmFjdCgpKSxpPWkubXVsdGlwbHkoby5hdChzLmVhc2UodGhpcy5wb3MpKSkpfXIubWF0cml4KGkpfXJldHVybiB0aGlzfSxvbmNlOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj10aGlzLmxhc3QoKTtyZXR1cm4gaXx8KHQ9bi5lYXNlKHQpKSxuLm9uY2VbdF09ZSx0aGlzfSxfY2FsbFN0YXJ0OmZ1bmN0aW9uKCl7cmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aGlzLnN0YXJ0KCl9LmJpbmQodGhpcyksMCksdGhpc319LHBhcmVudDpiLkVsZW1lbnQsY29uc3RydWN0OnthbmltYXRlOmZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4odGhpcy5meHx8KHRoaXMuZng9bmV3IGIuRlgodGhpcykpKS5hbmltYXRlKHQsZSxpKX0sZGVsYXk6ZnVuY3Rpb24odCl7cmV0dXJuKHRoaXMuZnh8fCh0aGlzLmZ4PW5ldyBiLkZYKHRoaXMpKSkuZGVsYXkodCl9LHN0b3A6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5meCYmdGhpcy5meC5zdG9wKHQsZSksdGhpc30sZmluaXNoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZngmJnRoaXMuZnguZmluaXNoKCksdGhpc30scGF1c2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5meCYmdGhpcy5meC5wYXVzZSgpLHRoaXN9LHBsYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5meCYmdGhpcy5meC5wbGF5KCksdGhpc30sc3BlZWQ6ZnVuY3Rpb24odCl7aWYodGhpcy5meCl7aWYobnVsbD09dClyZXR1cm4gdGhpcy5meC5zcGVlZCgpO3RoaXMuZnguc3BlZWQodCl9cmV0dXJuIHRoaXN9fX0pLGIuTW9ycGhPYmo9Yi5pbnZlbnQoe2NyZWF0ZTpmdW5jdGlvbih0LGUpe3JldHVybiBiLkNvbG9yLmlzQ29sb3IoZSk/bmV3IGIuQ29sb3IodCkubW9ycGgoZSk6Yi5yZWdleC5kZWxpbWl0ZXIudGVzdCh0KT9iLnJlZ2V4LnBhdGhMZXR0ZXJzLnRlc3QodCk/bmV3IGIuUGF0aEFycmF5KHQpLm1vcnBoKGUpOm5ldyBiLkFycmF5KHQpLm1vcnBoKGUpOmIucmVnZXgubnVtYmVyQW5kVW5pdC50ZXN0KGUpP25ldyBiLk51bWJlcih0KS5tb3JwaChlKToodGhpcy52YWx1ZT10LHZvaWQodGhpcy5kZXN0aW5hdGlvbj1lKSl9LGV4dGVuZDp7YXQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gZTwxP3RoaXMudmFsdWU6dGhpcy5kZXN0aW5hdGlvbn0sdmFsdWVPZjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbHVlfX19KSxiLmV4dGVuZChiLkZYLHthdHRyOmZ1bmN0aW9uKHQsZSxpKXtpZihcIm9iamVjdFwiPT10eXBlb2YgdClmb3IodmFyIG4gaW4gdCl0aGlzLmF0dHIobix0W25dKTtlbHNlIHRoaXMuYWRkKHQsZSxcImF0dHJzXCIpO3JldHVybiB0aGlzfSxzdHlsZTpmdW5jdGlvbih0LGUpe2lmKFwib2JqZWN0XCI9PXR5cGVvZiB0KWZvcih2YXIgaSBpbiB0KXRoaXMuc3R5bGUoaSx0W2ldKTtlbHNlIHRoaXMuYWRkKHQsZSxcInN0eWxlc1wiKTtyZXR1cm4gdGhpc30seDpmdW5jdGlvbih0LGUpe2lmKHRoaXMudGFyZ2V0KClpbnN0YW5jZW9mIGIuRylyZXR1cm4gdGhpcy50cmFuc2Zvcm0oe3g6dH0sZSksdGhpczt2YXIgaT1uZXcgYi5OdW1iZXIodCk7cmV0dXJuIGkucmVsYXRpdmU9ZSx0aGlzLmFkZChcInhcIixpKX0seTpmdW5jdGlvbih0LGUpe2lmKHRoaXMudGFyZ2V0KClpbnN0YW5jZW9mIGIuRylyZXR1cm4gdGhpcy50cmFuc2Zvcm0oe3k6dH0sZSksdGhpczt2YXIgaT1uZXcgYi5OdW1iZXIodCk7cmV0dXJuIGkucmVsYXRpdmU9ZSx0aGlzLmFkZChcInlcIixpKX0sY3g6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYWRkKFwiY3hcIixuZXcgYi5OdW1iZXIodCkpfSxjeTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hZGQoXCJjeVwiLG5ldyBiLk51bWJlcih0KSl9LG1vdmU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy54KHQpLnkoZSl9LGNlbnRlcjpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmN4KHQpLmN5KGUpfSxzaXplOmZ1bmN0aW9uKHQsZSl7aWYodGhpcy50YXJnZXQoKWluc3RhbmNlb2YgYi5UZXh0KXRoaXMuYXR0cihcImZvbnQtc2l6ZVwiLHQpO2Vsc2V7dmFyIGk7dCYmZXx8KGk9dGhpcy50YXJnZXQoKS5iYm94KCkpLHR8fCh0PWkud2lkdGgvaS5oZWlnaHQqZSksZXx8KGU9aS5oZWlnaHQvaS53aWR0aCp0KSx0aGlzLmFkZChcIndpZHRoXCIsbmV3IGIuTnVtYmVyKHQpKS5hZGQoXCJoZWlnaHRcIixuZXcgYi5OdW1iZXIoZSkpfXJldHVybiB0aGlzfSx3aWR0aDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hZGQoXCJ3aWR0aFwiLG5ldyBiLk51bWJlcih0KSl9LGhlaWdodDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hZGQoXCJoZWlnaHRcIixuZXcgYi5OdW1iZXIodCkpfSxwbG90OmZ1bmN0aW9uKHQsZSxpLG4pe3JldHVybiA0PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMucGxvdChbdCxlLGksbl0pOnRoaXMuYWRkKFwicGxvdFwiLG5ldyh0aGlzLnRhcmdldCgpLm1vcnBoQXJyYXkpKHQpKX0sbGVhZGluZzpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50YXJnZXQoKS5sZWFkaW5nP3RoaXMuYWRkKFwibGVhZGluZ1wiLG5ldyBiLk51bWJlcih0KSk6dGhpc30sdmlld2JveDpmdW5jdGlvbih0LGUsaSxuKXtyZXR1cm4gdGhpcy50YXJnZXQoKWluc3RhbmNlb2YgYi5Db250YWluZXImJnRoaXMuYWRkKFwidmlld2JveFwiLG5ldyBiLlZpZXdCb3godCxlLGksbikpLHRoaXN9LHVwZGF0ZTpmdW5jdGlvbih0KXtpZih0aGlzLnRhcmdldCgpaW5zdGFuY2VvZiBiLlN0b3Ape2lmKFwibnVtYmVyXCI9PXR5cGVvZiB0fHx0IGluc3RhbmNlb2YgYi5OdW1iZXIpcmV0dXJuIHRoaXMudXBkYXRlKHtvZmZzZXQ6YXJndW1lbnRzWzBdLGNvbG9yOmFyZ3VtZW50c1sxXSxvcGFjaXR5OmFyZ3VtZW50c1syXX0pO251bGwhPXQub3BhY2l0eSYmdGhpcy5hdHRyKFwic3RvcC1vcGFjaXR5XCIsdC5vcGFjaXR5KSxudWxsIT10LmNvbG9yJiZ0aGlzLmF0dHIoXCJzdG9wLWNvbG9yXCIsdC5jb2xvciksbnVsbCE9dC5vZmZzZXQmJnRoaXMuYXR0cihcIm9mZnNldFwiLHQub2Zmc2V0KX1yZXR1cm4gdGhpc319KSxiLkJveD1iLmludmVudCh7Y3JlYXRlOmZ1bmN0aW9uKHQsZSxpLG4pe2lmKCEoXCJvYmplY3RcIiE9dHlwZW9mIHR8fHQgaW5zdGFuY2VvZiBiLkVsZW1lbnQpKXJldHVybiBiLkJveC5jYWxsKHRoaXMsbnVsbCE9dC5sZWZ0P3QubGVmdDp0LngsbnVsbCE9dC50b3A/dC50b3A6dC55LHQud2lkdGgsdC5oZWlnaHQpOzQ9PWFyZ3VtZW50cy5sZW5ndGgmJih0aGlzLng9dCx0aGlzLnk9ZSx0aGlzLndpZHRoPWksdGhpcy5oZWlnaHQ9bikseSh0aGlzKX0sZXh0ZW5kOnttZXJnZTpmdW5jdGlvbih0KXt2YXIgZT1uZXcgdGhpcy5jb25zdHJ1Y3RvcjtyZXR1cm4gZS54PU1hdGgubWluKHRoaXMueCx0LngpLGUueT1NYXRoLm1pbih0aGlzLnksdC55KSxlLndpZHRoPU1hdGgubWF4KHRoaXMueCt0aGlzLndpZHRoLHQueCt0LndpZHRoKS1lLngsZS5oZWlnaHQ9TWF0aC5tYXgodGhpcy55K3RoaXMuaGVpZ2h0LHQueSt0LmhlaWdodCktZS55LHkoZSl9LHRyYW5zZm9ybTpmdW5jdGlvbih0KXt2YXIgZSxpPTEvMCxuPS0xLzAscj0xLzAscz0tMS8wO3JldHVybltuZXcgYi5Qb2ludCh0aGlzLngsdGhpcy55KSxuZXcgYi5Qb2ludCh0aGlzLngyLHRoaXMueSksbmV3IGIuUG9pbnQodGhpcy54LHRoaXMueTIpLG5ldyBiLlBvaW50KHRoaXMueDIsdGhpcy55MildLmZvckVhY2goZnVuY3Rpb24oZSl7ZT1lLnRyYW5zZm9ybSh0KSxpPU1hdGgubWluKGksZS54KSxuPU1hdGgubWF4KG4sZS54KSxyPU1hdGgubWluKHIsZS55KSxzPU1hdGgubWF4KHMsZS55KX0pLGU9bmV3IHRoaXMuY29uc3RydWN0b3IsZS54PWksZS53aWR0aD1uLWksZS55PXIsZS5oZWlnaHQ9cy1yLHkoZSksZX19fSksYi5CQm94PWIuaW52ZW50KHtjcmVhdGU6ZnVuY3Rpb24odCl7aWYoYi5Cb3guYXBwbHkodGhpcyxbXS5zbGljZS5jYWxsKGFyZ3VtZW50cykpLHQgaW5zdGFuY2VvZiBiLkVsZW1lbnQpe3ZhciBpO3RyeXtpZihlLmRvY3VtZW50RWxlbWVudC5jb250YWlucyl7aWYoIWUuZG9jdW1lbnRFbGVtZW50LmNvbnRhaW5zKHQubm9kZSkpdGhyb3cgbmV3IEV4Y2VwdGlvbihcIkVsZW1lbnQgbm90IGluIHRoZSBkb21cIil9ZWxzZXtmb3IodmFyIG49dC5ub2RlO24ucGFyZW50Tm9kZTspbj1uLnBhcmVudE5vZGU7aWYobiE9ZSl0aHJvdyBuZXcgRXhjZXB0aW9uKFwiRWxlbWVudCBub3QgaW4gdGhlIGRvbVwiKX1pPXQubm9kZS5nZXRCQm94KCl9Y2F0Y2goZSl7aWYodCBpbnN0YW5jZW9mIGIuU2hhcGUpe3ZhciByPXQuY2xvbmUoYi5wYXJzZXIuZHJhdy5pbnN0YW5jZSkuc2hvdygpO2k9ci5ub2RlLmdldEJCb3goKSxyLnJlbW92ZSgpfWVsc2UgaT17eDp0Lm5vZGUuY2xpZW50TGVmdCx5OnQubm9kZS5jbGllbnRUb3Asd2lkdGg6dC5ub2RlLmNsaWVudFdpZHRoLGhlaWdodDp0Lm5vZGUuY2xpZW50SGVpZ2h0fX1iLkJveC5jYWxsKHRoaXMsaSl9fSxpbmhlcml0OmIuQm94LHBhcmVudDpiLkVsZW1lbnQsY29uc3RydWN0OntiYm94OmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBiLkJCb3godGhpcyl9fX0pLGIuQkJveC5wcm90b3R5cGUuY29uc3RydWN0b3I9Yi5CQm94LGIuZXh0ZW5kKGIuRWxlbWVudCx7dGJveDpmdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJVc2Ugb2YgVEJveCBpcyBkZXByZWNhdGVkIGFuZCBtYXBwZWQgdG8gUkJveC4gVXNlIC5yYm94KCkgaW5zdGVhZC5cIiksdGhpcy5yYm94KHRoaXMuZG9jKCkpfX0pLGIuUkJveD1iLmludmVudCh7Y3JlYXRlOmZ1bmN0aW9uKHQpe2IuQm94LmFwcGx5KHRoaXMsW10uc2xpY2UuY2FsbChhcmd1bWVudHMpKSx0IGluc3RhbmNlb2YgYi5FbGVtZW50JiZiLkJveC5jYWxsKHRoaXMsdC5ub2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKX0saW5oZXJpdDpiLkJveCxwYXJlbnQ6Yi5FbGVtZW50LGV4dGVuZDp7YWRkT2Zmc2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueCs9dC5wYWdlWE9mZnNldCx0aGlzLnkrPXQucGFnZVlPZmZzZXQsdGhpc319LGNvbnN0cnVjdDp7cmJveDpmdW5jdGlvbih0KXtyZXR1cm4gdD9uZXcgYi5SQm94KHRoaXMpLnRyYW5zZm9ybSh0LnNjcmVlbkNUTSgpLmludmVyc2UoKSk6bmV3IGIuUkJveCh0aGlzKS5hZGRPZmZzZXQoKX19fSksYi5SQm94LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1iLlJCb3gsYi5NYXRyaXg9Yi5pbnZlbnQoe2NyZWF0ZTpmdW5jdGlvbih0KXt2YXIgZSxpPWYoWzEsMCwwLDEsMCwwXSk7Zm9yKHQ9dCBpbnN0YW5jZW9mIGIuRWxlbWVudD90Lm1hdHJpeGlmeSgpOlwic3RyaW5nXCI9PXR5cGVvZiB0P2YodC5zcGxpdChiLnJlZ2V4LmRlbGltaXRlcikubWFwKHBhcnNlRmxvYXQpKTo2PT1hcmd1bWVudHMubGVuZ3RoP2YoW10uc2xpY2UuY2FsbChhcmd1bWVudHMpKTpBcnJheS5pc0FycmF5KHQpP2YodCk6XCJvYmplY3RcIj09dHlwZW9mIHQ/dDppLGU9ay5sZW5ndGgtMTtlPj0wOy0tZSl0aGlzW2tbZV1dPW51bGwhPXRba1tlXV0/dFtrW2VdXTppW2tbZV1dfSxleHRlbmQ6e2V4dHJhY3Q6ZnVuY3Rpb24oKXt2YXIgdD1jKHRoaXMsMCwxKSxlPWModGhpcywxLDApLGk9MTgwL01hdGguUEkqTWF0aC5hdGFuMih0LnksdC54KS05MDtyZXR1cm57eDp0aGlzLmUseTp0aGlzLmYsdHJhbnNmb3JtZWRYOih0aGlzLmUqTWF0aC5jb3MoaSpNYXRoLlBJLzE4MCkrdGhpcy5mKk1hdGguc2luKGkqTWF0aC5QSS8xODApKS9NYXRoLnNxcnQodGhpcy5hKnRoaXMuYSt0aGlzLmIqdGhpcy5iKSx0cmFuc2Zvcm1lZFk6KHRoaXMuZipNYXRoLmNvcyhpKk1hdGguUEkvMTgwKSt0aGlzLmUqTWF0aC5zaW4oLWkqTWF0aC5QSS8xODApKS9NYXRoLnNxcnQodGhpcy5jKnRoaXMuYyt0aGlzLmQqdGhpcy5kKSxza2V3WDotaSxza2V3WToxODAvTWF0aC5QSSpNYXRoLmF0YW4yKGUueSxlLngpLHNjYWxlWDpNYXRoLnNxcnQodGhpcy5hKnRoaXMuYSt0aGlzLmIqdGhpcy5iKSxzY2FsZVk6TWF0aC5zcXJ0KHRoaXMuYyp0aGlzLmMrdGhpcy5kKnRoaXMuZCkscm90YXRpb246aSxhOnRoaXMuYSxiOnRoaXMuYixjOnRoaXMuYyxkOnRoaXMuZCxlOnRoaXMuZSxmOnRoaXMuZixtYXRyaXg6bmV3IGIuTWF0cml4KHRoaXMpfX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGIuTWF0cml4KHRoaXMpfSxtb3JwaDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5kZXN0aW5hdGlvbj1uZXcgYi5NYXRyaXgodCksdGhpc30sYXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZGVzdGluYXRpb24/bmV3IGIuTWF0cml4KHthOnRoaXMuYSsodGhpcy5kZXN0aW5hdGlvbi5hLXRoaXMuYSkqdCxiOnRoaXMuYisodGhpcy5kZXN0aW5hdGlvbi5iLXRoaXMuYikqdCxjOnRoaXMuYysodGhpcy5kZXN0aW5hdGlvbi5jLXRoaXMuYykqdCxkOnRoaXMuZCsodGhpcy5kZXN0aW5hdGlvbi5kLXRoaXMuZCkqdCxlOnRoaXMuZSsodGhpcy5kZXN0aW5hdGlvbi5lLXRoaXMuZSkqdCxmOnRoaXMuZisodGhpcy5kZXN0aW5hdGlvbi5mLXRoaXMuZikqdH0pOnRoaXN9LG11bHRpcGx5OmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgYi5NYXRyaXgodGhpcy5uYXRpdmUoKS5tdWx0aXBseShkKHQpLm5hdGl2ZSgpKSl9LGludmVyc2U6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGIuTWF0cml4KHRoaXMubmF0aXZlKCkuaW52ZXJzZSgpKX0sdHJhbnNsYXRlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBiLk1hdHJpeCh0aGlzLm5hdGl2ZSgpLnRyYW5zbGF0ZSh0fHwwLGV8fDApKX0sc2NhbGU6ZnVuY3Rpb24odCxlLGksbil7cmV0dXJuIDE9PWFyZ3VtZW50cy5sZW5ndGg/ZT10OjM9PWFyZ3VtZW50cy5sZW5ndGgmJihuPWksaT1lLGU9dCksdGhpcy5hcm91bmQoaSxuLG5ldyBiLk1hdHJpeCh0LDAsMCxlLDAsMCkpfSxyb3RhdGU6ZnVuY3Rpb24odCxlLGkpe3JldHVybiB0PWIudXRpbHMucmFkaWFucyh0KSx0aGlzLmFyb3VuZChlLGksbmV3IGIuTWF0cml4KE1hdGguY29zKHQpLE1hdGguc2luKHQpLC1NYXRoLnNpbih0KSxNYXRoLmNvcyh0KSwwLDApKX0sZmxpcDpmdW5jdGlvbih0LGUpe3JldHVyblwieFwiPT10P3RoaXMuc2NhbGUoLTEsMSxlLDApOlwieVwiPT10P3RoaXMuc2NhbGUoMSwtMSwwLGUpOnRoaXMuc2NhbGUoLTEsLTEsdCxudWxsIT1lP2U6dCl9LHNrZXc6ZnVuY3Rpb24odCxlLGksbil7cmV0dXJuIDE9PWFyZ3VtZW50cy5sZW5ndGg/ZT10OjM9PWFyZ3VtZW50cy5sZW5ndGgmJihuPWksaT1lLGU9dCksdD1iLnV0aWxzLnJhZGlhbnModCksZT1iLnV0aWxzLnJhZGlhbnMoZSksXHJcbnRoaXMuYXJvdW5kKGksbixuZXcgYi5NYXRyaXgoMSxNYXRoLnRhbihlKSxNYXRoLnRhbih0KSwxLDAsMCkpfSxza2V3WDpmdW5jdGlvbih0LGUsaSl7cmV0dXJuIHRoaXMuc2tldyh0LDAsZSxpKX0sc2tld1k6ZnVuY3Rpb24odCxlLGkpe3JldHVybiB0aGlzLnNrZXcoMCx0LGUsaSl9LGFyb3VuZDpmdW5jdGlvbih0LGUsaSl7cmV0dXJuIHRoaXMubXVsdGlwbHkobmV3IGIuTWF0cml4KDEsMCwwLDEsdHx8MCxlfHwwKSkubXVsdGlwbHkoaSkubXVsdGlwbHkobmV3IGIuTWF0cml4KDEsMCwwLDEsLXR8fDAsLWV8fDApKX0sbmF0aXZlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PWIucGFyc2VyLm5hdGl2ZS5jcmVhdGVTVkdNYXRyaXgoKSxlPWsubGVuZ3RoLTE7ZT49MDtlLS0pdFtrW2VdXT10aGlzW2tbZV1dO3JldHVybiB0fSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVyblwibWF0cml4KFwiK2codGhpcy5hKStcIixcIitnKHRoaXMuYikrXCIsXCIrZyh0aGlzLmMpK1wiLFwiK2codGhpcy5kKStcIixcIitnKHRoaXMuZSkrXCIsXCIrZyh0aGlzLmYpK1wiKVwifX0scGFyZW50OmIuRWxlbWVudCxjb25zdHJ1Y3Q6e2N0bTpmdW5jdGlvbigpe3JldHVybiBuZXcgYi5NYXRyaXgodGhpcy5ub2RlLmdldENUTSgpKX0sc2NyZWVuQ1RNOmZ1bmN0aW9uKCl7aWYodGhpcyBpbnN0YW5jZW9mIGIuTmVzdGVkKXt2YXIgdD10aGlzLnJlY3QoMSwxKSxlPXQubm9kZS5nZXRTY3JlZW5DVE0oKTtyZXR1cm4gdC5yZW1vdmUoKSxuZXcgYi5NYXRyaXgoZSl9cmV0dXJuIG5ldyBiLk1hdHJpeCh0aGlzLm5vZGUuZ2V0U2NyZWVuQ1RNKCkpfX19KSxiLlBvaW50PWIuaW52ZW50KHtjcmVhdGU6ZnVuY3Rpb24odCxlKXt2YXIgaSxuPXt4OjAseTowfTtpPUFycmF5LmlzQXJyYXkodCk/e3g6dFswXSx5OnRbMV19Olwib2JqZWN0XCI9PXR5cGVvZiB0P3t4OnQueCx5OnQueX06bnVsbCE9dD97eDp0LHk6bnVsbCE9ZT9lOnR9Om4sdGhpcy54PWkueCx0aGlzLnk9aS55fSxleHRlbmQ6e2Nsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBiLlBvaW50KHRoaXMpfSxtb3JwaDpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmRlc3RpbmF0aW9uPW5ldyBiLlBvaW50KHQsZSksdGhpc30sYXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZGVzdGluYXRpb24/bmV3IGIuUG9pbnQoe3g6dGhpcy54Kyh0aGlzLmRlc3RpbmF0aW9uLngtdGhpcy54KSp0LHk6dGhpcy55Kyh0aGlzLmRlc3RpbmF0aW9uLnktdGhpcy55KSp0fSk6dGhpc30sbmF0aXZlOmZ1bmN0aW9uKCl7dmFyIHQ9Yi5wYXJzZXIubmF0aXZlLmNyZWF0ZVNWR1BvaW50KCk7cmV0dXJuIHQueD10aGlzLngsdC55PXRoaXMueSx0fSx0cmFuc2Zvcm06ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBiLlBvaW50KHRoaXMubmF0aXZlKCkubWF0cml4VHJhbnNmb3JtKHQubmF0aXZlKCkpKX19fSksYi5leHRlbmQoYi5FbGVtZW50LHtwb2ludDpmdW5jdGlvbih0LGUpe3JldHVybiBuZXcgYi5Qb2ludCh0LGUpLnRyYW5zZm9ybSh0aGlzLnNjcmVlbkNUTSgpLmludmVyc2UoKSl9fSksYi5leHRlbmQoYi5FbGVtZW50LHthdHRyOmZ1bmN0aW9uKHQsZSxpKXtpZihudWxsPT10KXtmb3IodD17fSxlPXRoaXMubm9kZS5hdHRyaWJ1dGVzLGk9ZS5sZW5ndGgtMTtpPj0wO2ktLSl0W2VbaV0ubm9kZU5hbWVdPWIucmVnZXguaXNOdW1iZXIudGVzdChlW2ldLm5vZGVWYWx1ZSk/cGFyc2VGbG9hdChlW2ldLm5vZGVWYWx1ZSk6ZVtpXS5ub2RlVmFsdWU7cmV0dXJuIHR9aWYoXCJvYmplY3RcIj09dHlwZW9mIHQpZm9yKGUgaW4gdCl0aGlzLmF0dHIoZSx0W2VdKTtlbHNlIGlmKG51bGw9PT1lKXRoaXMubm9kZS5yZW1vdmVBdHRyaWJ1dGUodCk7ZWxzZXtpZihudWxsPT1lKXJldHVybiBlPXRoaXMubm9kZS5nZXRBdHRyaWJ1dGUodCksbnVsbD09ZT9iLmRlZmF1bHRzLmF0dHJzW3RdOmIucmVnZXguaXNOdW1iZXIudGVzdChlKT9wYXJzZUZsb2F0KGUpOmU7XCJzdHJva2Utd2lkdGhcIj09dD90aGlzLmF0dHIoXCJzdHJva2VcIixwYXJzZUZsb2F0KGUpPjA/dGhpcy5fc3Ryb2tlOm51bGwpOlwic3Ryb2tlXCI9PXQmJih0aGlzLl9zdHJva2U9ZSksXCJmaWxsXCIhPXQmJlwic3Ryb2tlXCIhPXR8fChiLnJlZ2V4LmlzSW1hZ2UudGVzdChlKSYmKGU9dGhpcy5kb2MoKS5kZWZzKCkuaW1hZ2UoZSwwLDApKSxlIGluc3RhbmNlb2YgYi5JbWFnZSYmKGU9dGhpcy5kb2MoKS5kZWZzKCkucGF0dGVybigwLDAsZnVuY3Rpb24oKXt0aGlzLmFkZChlKX0pKSksXCJudW1iZXJcIj09dHlwZW9mIGU/ZT1uZXcgYi5OdW1iZXIoZSk6Yi5Db2xvci5pc0NvbG9yKGUpP2U9bmV3IGIuQ29sb3IoZSk6QXJyYXkuaXNBcnJheShlKSYmKGU9bmV3IGIuQXJyYXkoZSkpLFwibGVhZGluZ1wiPT10P3RoaXMubGVhZGluZyYmdGhpcy5sZWFkaW5nKGUpOlwic3RyaW5nXCI9PXR5cGVvZiBpP3RoaXMubm9kZS5zZXRBdHRyaWJ1dGVOUyhpLHQsZS50b1N0cmluZygpKTp0aGlzLm5vZGUuc2V0QXR0cmlidXRlKHQsZS50b1N0cmluZygpKSwhdGhpcy5yZWJ1aWxkfHxcImZvbnQtc2l6ZVwiIT10JiZcInhcIiE9dHx8dGhpcy5yZWJ1aWxkKHQsZSl9cmV0dXJuIHRoaXN9fSksYi5leHRlbmQoYi5FbGVtZW50LHt0cmFuc2Zvcm06ZnVuY3Rpb24odCxlKXt2YXIgaSxuLHI9dGhpcztpZihcIm9iamVjdFwiIT10eXBlb2YgdClyZXR1cm4gaT1uZXcgYi5NYXRyaXgocikuZXh0cmFjdCgpLFwic3RyaW5nXCI9PXR5cGVvZiB0P2lbdF06aTtpZihpPW5ldyBiLk1hdHJpeChyKSxlPSEhZXx8ISF0LnJlbGF0aXZlLG51bGwhPXQuYSlpPWU/aS5tdWx0aXBseShuZXcgYi5NYXRyaXgodCkpOm5ldyBiLk1hdHJpeCh0KTtlbHNlIGlmKG51bGwhPXQucm90YXRpb24pcCh0LHIpLGk9ZT9pLnJvdGF0ZSh0LnJvdGF0aW9uLHQuY3gsdC5jeSk6aS5yb3RhdGUodC5yb3RhdGlvbi1pLmV4dHJhY3QoKS5yb3RhdGlvbix0LmN4LHQuY3kpO2Vsc2UgaWYobnVsbCE9dC5zY2FsZXx8bnVsbCE9dC5zY2FsZVh8fG51bGwhPXQuc2NhbGVZKXtpZihwKHQsciksdC5zY2FsZVg9bnVsbCE9dC5zY2FsZT90LnNjYWxlOm51bGwhPXQuc2NhbGVYP3Quc2NhbGVYOjEsdC5zY2FsZVk9bnVsbCE9dC5zY2FsZT90LnNjYWxlOm51bGwhPXQuc2NhbGVZP3Quc2NhbGVZOjEsIWUpe3ZhciBzPWkuZXh0cmFjdCgpO3Quc2NhbGVYPTEqdC5zY2FsZVgvcy5zY2FsZVgsdC5zY2FsZVk9MSp0LnNjYWxlWS9zLnNjYWxlWX1pPWkuc2NhbGUodC5zY2FsZVgsdC5zY2FsZVksdC5jeCx0LmN5KX1lbHNlIGlmKG51bGwhPXQuc2tld3x8bnVsbCE9dC5za2V3WHx8bnVsbCE9dC5za2V3WSl7aWYocCh0LHIpLHQuc2tld1g9bnVsbCE9dC5za2V3P3Quc2tldzpudWxsIT10LnNrZXdYP3Quc2tld1g6MCx0LnNrZXdZPW51bGwhPXQuc2tldz90LnNrZXc6bnVsbCE9dC5za2V3WT90LnNrZXdZOjAsIWUpe3ZhciBzPWkuZXh0cmFjdCgpO2k9aS5tdWx0aXBseSgobmV3IGIuTWF0cml4KS5za2V3KHMuc2tld1gscy5za2V3WSx0LmN4LHQuY3kpLmludmVyc2UoKSl9aT1pLnNrZXcodC5za2V3WCx0LnNrZXdZLHQuY3gsdC5jeSl9ZWxzZSB0LmZsaXA/KFwieFwiPT10LmZsaXB8fFwieVwiPT10LmZsaXA/dC5vZmZzZXQ9bnVsbD09dC5vZmZzZXQ/ci5iYm94KClbXCJjXCIrdC5mbGlwXTp0Lm9mZnNldDpudWxsPT10Lm9mZnNldD8obj1yLmJib3goKSx0LmZsaXA9bi5jeCx0Lm9mZnNldD1uLmN5KTp0LmZsaXA9dC5vZmZzZXQsaT0obmV3IGIuTWF0cml4KS5mbGlwKHQuZmxpcCx0Lm9mZnNldCkpOm51bGw9PXQueCYmbnVsbD09dC55fHwoZT9pPWkudHJhbnNsYXRlKHQueCx0LnkpOihudWxsIT10LngmJihpLmU9dC54KSxudWxsIT10LnkmJihpLmY9dC55KSkpO3JldHVybiB0aGlzLmF0dHIoXCJ0cmFuc2Zvcm1cIixpKX19KSxiLmV4dGVuZChiLkZYLHt0cmFuc2Zvcm06ZnVuY3Rpb24odCxlKXt2YXIgaSxuLHI9dGhpcy50YXJnZXQoKTtyZXR1cm5cIm9iamVjdFwiIT10eXBlb2YgdD8oaT1uZXcgYi5NYXRyaXgocikuZXh0cmFjdCgpLFwic3RyaW5nXCI9PXR5cGVvZiB0P2lbdF06aSk6KGU9ISFlfHwhIXQucmVsYXRpdmUsbnVsbCE9dC5hP2k9bmV3IGIuTWF0cml4KHQpOm51bGwhPXQucm90YXRpb24/KHAodCxyKSxpPW5ldyBiLlJvdGF0ZSh0LnJvdGF0aW9uLHQuY3gsdC5jeSkpOm51bGwhPXQuc2NhbGV8fG51bGwhPXQuc2NhbGVYfHxudWxsIT10LnNjYWxlWT8ocCh0LHIpLHQuc2NhbGVYPW51bGwhPXQuc2NhbGU/dC5zY2FsZTpudWxsIT10LnNjYWxlWD90LnNjYWxlWDoxLHQuc2NhbGVZPW51bGwhPXQuc2NhbGU/dC5zY2FsZTpudWxsIT10LnNjYWxlWT90LnNjYWxlWToxLGk9bmV3IGIuU2NhbGUodC5zY2FsZVgsdC5zY2FsZVksdC5jeCx0LmN5KSk6bnVsbCE9dC5za2V3WHx8bnVsbCE9dC5za2V3WT8ocCh0LHIpLHQuc2tld1g9bnVsbCE9dC5za2V3WD90LnNrZXdYOjAsdC5za2V3WT1udWxsIT10LnNrZXdZP3Quc2tld1k6MCxpPW5ldyBiLlNrZXcodC5za2V3WCx0LnNrZXdZLHQuY3gsdC5jeSkpOnQuZmxpcD8oXCJ4XCI9PXQuZmxpcHx8XCJ5XCI9PXQuZmxpcD90Lm9mZnNldD1udWxsPT10Lm9mZnNldD9yLmJib3goKVtcImNcIit0LmZsaXBdOnQub2Zmc2V0Om51bGw9PXQub2Zmc2V0PyhuPXIuYmJveCgpLHQuZmxpcD1uLmN4LHQub2Zmc2V0PW4uY3kpOnQuZmxpcD10Lm9mZnNldCxpPShuZXcgYi5NYXRyaXgpLmZsaXAodC5mbGlwLHQub2Zmc2V0KSk6bnVsbD09dC54JiZudWxsPT10Lnl8fChpPW5ldyBiLlRyYW5zbGF0ZSh0LngsdC55KSksaT8oaS5yZWxhdGl2ZT1lLHRoaXMubGFzdCgpLnRyYW5zZm9ybXMucHVzaChpKSx0aGlzLl9jYWxsU3RhcnQoKSk6dGhpcyl9fSksYi5leHRlbmQoYi5FbGVtZW50LHt1bnRyYW5zZm9ybTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmF0dHIoXCJ0cmFuc2Zvcm1cIixudWxsKX0sbWF0cml4aWZ5OmZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMuYXR0cihcInRyYW5zZm9ybVwiKXx8XCJcIikuc3BsaXQoYi5yZWdleC50cmFuc2Zvcm1zKS5zbGljZSgwLC0xKS5tYXAoZnVuY3Rpb24odCl7dmFyIGU9dC50cmltKCkuc3BsaXQoXCIoXCIpO3JldHVybltlWzBdLGVbMV0uc3BsaXQoYi5yZWdleC5kZWxpbWl0ZXIpLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gcGFyc2VGbG9hdCh0KX0pXX0pLnJlZHVjZShmdW5jdGlvbih0LGUpe3JldHVyblwibWF0cml4XCI9PWVbMF0/dC5tdWx0aXBseShmKGVbMV0pKTp0W2VbMF1dLmFwcGx5KHQsZVsxXSl9LG5ldyBiLk1hdHJpeCl9LHRvUGFyZW50OmZ1bmN0aW9uKHQpe2lmKHRoaXM9PXQpcmV0dXJuIHRoaXM7dmFyIGU9dGhpcy5zY3JlZW5DVE0oKSxpPXQuc2NyZWVuQ1RNKCkuaW52ZXJzZSgpO3JldHVybiB0aGlzLmFkZFRvKHQpLnVudHJhbnNmb3JtKCkudHJhbnNmb3JtKGkubXVsdGlwbHkoZSkpLHRoaXN9LHRvRG9jOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9QYXJlbnQodGhpcy5kb2MoKSl9fSksYi5UcmFuc2Zvcm1hdGlvbj1iLmludmVudCh7Y3JlYXRlOmZ1bmN0aW9uKHQsZSl7aWYoYXJndW1lbnRzLmxlbmd0aD4xJiZcImJvb2xlYW5cIiE9dHlwZW9mIGUpcmV0dXJuIHRoaXMuY29uc3RydWN0b3IuY2FsbCh0aGlzLFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKSk7aWYoQXJyYXkuaXNBcnJheSh0KSlmb3IodmFyIGk9MCxuPXRoaXMuYXJndW1lbnRzLmxlbmd0aDtpPG47KytpKXRoaXNbdGhpcy5hcmd1bWVudHNbaV1dPXRbaV07ZWxzZSBpZihcIm9iamVjdFwiPT10eXBlb2YgdClmb3IodmFyIGk9MCxuPXRoaXMuYXJndW1lbnRzLmxlbmd0aDtpPG47KytpKXRoaXNbdGhpcy5hcmd1bWVudHNbaV1dPXRbdGhpcy5hcmd1bWVudHNbaV1dO3RoaXMuaW52ZXJzZWQ9ITEsITA9PT1lJiYodGhpcy5pbnZlcnNlZD0hMCl9LGV4dGVuZDp7YXJndW1lbnRzOltdLG1ldGhvZDpcIlwiLGF0OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxpPTAsbj10aGlzLmFyZ3VtZW50cy5sZW5ndGg7aTxuOysraSllLnB1c2godGhpc1t0aGlzLmFyZ3VtZW50c1tpXV0pO3ZhciByPXRoaXMuX3VuZG98fG5ldyBiLk1hdHJpeDtyZXR1cm4gcj0obmV3IGIuTWF0cml4KS5tb3JwaChiLk1hdHJpeC5wcm90b3R5cGVbdGhpcy5tZXRob2RdLmFwcGx5KHIsZSkpLmF0KHQpLHRoaXMuaW52ZXJzZWQ/ci5pbnZlcnNlKCk6cn0sdW5kbzpmdW5jdGlvbih0KXtmb3IodmFyIGU9MCxpPXRoaXMuYXJndW1lbnRzLmxlbmd0aDtlPGk7KytlKXRbdGhpcy5hcmd1bWVudHNbZV1dPXZvaWQgMD09PXRoaXNbdGhpcy5hcmd1bWVudHNbZV1dPzA6dFt0aGlzLmFyZ3VtZW50c1tlXV07cmV0dXJuIHQuY3g9dGhpcy5jeCx0LmN5PXRoaXMuY3ksdGhpcy5fdW5kbz1uZXcoYlthKHRoaXMubWV0aG9kKV0pKHQsITApLmF0KDEpLHRoaXN9fX0pLGIuVHJhbnNsYXRlPWIuaW52ZW50KHtwYXJlbnQ6Yi5NYXRyaXgsaW5oZXJpdDpiLlRyYW5zZm9ybWF0aW9uLGNyZWF0ZTpmdW5jdGlvbih0LGUpe3RoaXMuY29uc3RydWN0b3IuYXBwbHkodGhpcyxbXS5zbGljZS5jYWxsKGFyZ3VtZW50cykpfSxleHRlbmQ6e2FyZ3VtZW50czpbXCJ0cmFuc2Zvcm1lZFhcIixcInRyYW5zZm9ybWVkWVwiXSxtZXRob2Q6XCJ0cmFuc2xhdGVcIn19KSxiLlJvdGF0ZT1iLmludmVudCh7cGFyZW50OmIuTWF0cml4LGluaGVyaXQ6Yi5UcmFuc2Zvcm1hdGlvbixjcmVhdGU6ZnVuY3Rpb24odCxlKXt0aGlzLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsW10uc2xpY2UuY2FsbChhcmd1bWVudHMpKX0sZXh0ZW5kOnthcmd1bWVudHM6W1wicm90YXRpb25cIixcImN4XCIsXCJjeVwiXSxtZXRob2Q6XCJyb3RhdGVcIixhdDpmdW5jdGlvbih0KXt2YXIgZT0obmV3IGIuTWF0cml4KS5yb3RhdGUoKG5ldyBiLk51bWJlcikubW9ycGgodGhpcy5yb3RhdGlvbi0odGhpcy5fdW5kbz90aGlzLl91bmRvLnJvdGF0aW9uOjApKS5hdCh0KSx0aGlzLmN4LHRoaXMuY3kpO3JldHVybiB0aGlzLmludmVyc2VkP2UuaW52ZXJzZSgpOmV9LHVuZG86ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3VuZG89dCx0aGlzfX19KSxiLlNjYWxlPWIuaW52ZW50KHtwYXJlbnQ6Yi5NYXRyaXgsaW5oZXJpdDpiLlRyYW5zZm9ybWF0aW9uLGNyZWF0ZTpmdW5jdGlvbih0LGUpe3RoaXMuY29uc3RydWN0b3IuYXBwbHkodGhpcyxbXS5zbGljZS5jYWxsKGFyZ3VtZW50cykpfSxleHRlbmQ6e2FyZ3VtZW50czpbXCJzY2FsZVhcIixcInNjYWxlWVwiLFwiY3hcIixcImN5XCJdLG1ldGhvZDpcInNjYWxlXCJ9fSksYi5Ta2V3PWIuaW52ZW50KHtwYXJlbnQ6Yi5NYXRyaXgsaW5oZXJpdDpiLlRyYW5zZm9ybWF0aW9uLGNyZWF0ZTpmdW5jdGlvbih0LGUpe3RoaXMuY29uc3RydWN0b3IuYXBwbHkodGhpcyxbXS5zbGljZS5jYWxsKGFyZ3VtZW50cykpfSxleHRlbmQ6e2FyZ3VtZW50czpbXCJza2V3WFwiLFwic2tld1lcIixcImN4XCIsXCJjeVwiXSxtZXRob2Q6XCJza2V3XCJ9fSksYi5leHRlbmQoYi5FbGVtZW50LHtzdHlsZTpmdW5jdGlvbih0LGUpe2lmKDA9PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRoaXMubm9kZS5zdHlsZS5jc3NUZXh0fHxcIlwiO2lmKGFyZ3VtZW50cy5sZW5ndGg8MilpZihcIm9iamVjdFwiPT10eXBlb2YgdClmb3IoZSBpbiB0KXRoaXMuc3R5bGUoZSx0W2VdKTtlbHNle2lmKCFiLnJlZ2V4LmlzQ3NzLnRlc3QodCkpcmV0dXJuIHRoaXMubm9kZS5zdHlsZVtvKHQpXTtmb3IodD10LnNwbGl0KC9cXHMqO1xccyovKS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuISF0fSkubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LnNwbGl0KC9cXHMqOlxccyovKX0pO2U9dC5wb3AoKTspdGhpcy5zdHlsZShlWzBdLGVbMV0pfWVsc2UgdGhpcy5ub2RlLnN0eWxlW28odCldPW51bGw9PT1lfHxiLnJlZ2V4LmlzQmxhbmsudGVzdChlKT9cIlwiOmU7cmV0dXJuIHRoaXN9fSksYi5QYXJlbnQ9Yi5pbnZlbnQoe2NyZWF0ZTpmdW5jdGlvbih0KXt0aGlzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyx0KX0saW5oZXJpdDpiLkVsZW1lbnQsZXh0ZW5kOntjaGlsZHJlbjpmdW5jdGlvbigpe3JldHVybiBiLnV0aWxzLm1hcChiLnV0aWxzLmZpbHRlclNWR0VsZW1lbnRzKHRoaXMubm9kZS5jaGlsZE5vZGVzKSxmdW5jdGlvbih0KXtyZXR1cm4gYi5hZG9wdCh0KX0pfSxhZGQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gbnVsbD09ZT90aGlzLm5vZGUuYXBwZW5kQ2hpbGQodC5ub2RlKTp0Lm5vZGUhPXRoaXMubm9kZS5jaGlsZE5vZGVzW2VdJiZ0aGlzLm5vZGUuaW5zZXJ0QmVmb3JlKHQubm9kZSx0aGlzLm5vZGUuY2hpbGROb2Rlc1tlXSksdGhpc30scHV0OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuYWRkKHQsZSksdH0saGFzOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmluZGV4KHQpPj0wfSxpbmRleDpmdW5jdGlvbih0KXtyZXR1cm5bXS5zbGljZS5jYWxsKHRoaXMubm9kZS5jaGlsZE5vZGVzKS5pbmRleE9mKHQubm9kZSl9LGdldDpmdW5jdGlvbih0KXtyZXR1cm4gYi5hZG9wdCh0aGlzLm5vZGUuY2hpbGROb2Rlc1t0XSl9LGZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0KDApfSxsYXN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0KHRoaXMubm9kZS5jaGlsZE5vZGVzLmxlbmd0aC0xKX0sZWFjaDpmdW5jdGlvbih0LGUpe3ZhciBpLG4scj10aGlzLmNoaWxkcmVuKCk7Zm9yKGk9MCxuPXIubGVuZ3RoO2k8bjtpKyspcltpXWluc3RhbmNlb2YgYi5FbGVtZW50JiZ0LmFwcGx5KHJbaV0sW2kscl0pLGUmJnJbaV1pbnN0YW5jZW9mIGIuQ29udGFpbmVyJiZyW2ldLmVhY2godCxlKTtyZXR1cm4gdGhpc30scmVtb3ZlRWxlbWVudDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5ub2RlLnJlbW92ZUNoaWxkKHQubm9kZSksdGhpc30sY2xlYXI6ZnVuY3Rpb24oKXtmb3IoO3RoaXMubm9kZS5oYXNDaGlsZE5vZGVzKCk7KXRoaXMubm9kZS5yZW1vdmVDaGlsZCh0aGlzLm5vZGUubGFzdENoaWxkKTtyZXR1cm4gZGVsZXRlIHRoaXMuX2RlZnMsdGhpc30sZGVmczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvYygpLmRlZnMoKX19fSksYi5leHRlbmQoYi5QYXJlbnQse3VuZ3JvdXA6ZnVuY3Rpb24odCxlKXtyZXR1cm4gMD09PWV8fHRoaXMgaW5zdGFuY2VvZiBiLkRlZnN8fHRoaXMubm9kZT09Yi5wYXJzZXIuZHJhdz90aGlzOih0PXR8fCh0aGlzIGluc3RhbmNlb2YgYi5Eb2M/dGhpczp0aGlzLnBhcmVudChiLlBhcmVudCkpLGU9ZXx8MS8wLHRoaXMuZWFjaChmdW5jdGlvbigpe3JldHVybiB0aGlzIGluc3RhbmNlb2YgYi5EZWZzP3RoaXM6dGhpcyBpbnN0YW5jZW9mIGIuUGFyZW50P3RoaXMudW5ncm91cCh0LGUtMSk6dGhpcy50b1BhcmVudCh0KX0pLHRoaXMubm9kZS5maXJzdENoaWxkfHx0aGlzLnJlbW92ZSgpLHRoaXMpfSxmbGF0dGVuOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMudW5ncm91cCh0LGUpfX0pLGIuQ29udGFpbmVyPWIuaW52ZW50KHtjcmVhdGU6ZnVuY3Rpb24odCl7dGhpcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsdCl9LGluaGVyaXQ6Yi5QYXJlbnR9KSxiLlZpZXdCb3g9Yi5pbnZlbnQoe2NyZWF0ZTpmdW5jdGlvbih0KXt2YXIgZSxpLG4scixzLG8sYSxoPVswLDAsMCwwXSx1PTEsbD0xLGM9L1srLV0/KD86XFxkKyg/OlxcLlxcZCopP3xcXC5cXGQrKSg/OmVbKy1dP1xcZCspPy9naTtpZih0IGluc3RhbmNlb2YgYi5FbGVtZW50KXtmb3Iobz10LGE9dCxzPSh0LmF0dHIoXCJ2aWV3Qm94XCIpfHxcIlwiKS5tYXRjaChjKSx0LmJib3gsbj1uZXcgYi5OdW1iZXIodC53aWR0aCgpKSxyPW5ldyBiLk51bWJlcih0LmhlaWdodCgpKTtcIiVcIj09bi51bml0Oyl1Kj1uLnZhbHVlLG49bmV3IGIuTnVtYmVyKG8gaW5zdGFuY2VvZiBiLkRvYz9vLnBhcmVudCgpLm9mZnNldFdpZHRoOm8ucGFyZW50KCkud2lkdGgoKSksbz1vLnBhcmVudCgpO2Zvcig7XCIlXCI9PXIudW5pdDspbCo9ci52YWx1ZSxyPW5ldyBiLk51bWJlcihhIGluc3RhbmNlb2YgYi5Eb2M/YS5wYXJlbnQoKS5vZmZzZXRIZWlnaHQ6YS5wYXJlbnQoKS5oZWlnaHQoKSksYT1hLnBhcmVudCgpO3RoaXMueD0wLHRoaXMueT0wLHRoaXMud2lkdGg9bip1LHRoaXMuaGVpZ2h0PXIqbCx0aGlzLnpvb209MSxzJiYoZT1wYXJzZUZsb2F0KHNbMF0pLGk9cGFyc2VGbG9hdChzWzFdKSxuPXBhcnNlRmxvYXQoc1syXSkscj1wYXJzZUZsb2F0KHNbM10pLHRoaXMuem9vbT10aGlzLndpZHRoL3RoaXMuaGVpZ2h0Pm4vcj90aGlzLmhlaWdodC9yOnRoaXMud2lkdGgvbix0aGlzLng9ZSx0aGlzLnk9aSx0aGlzLndpZHRoPW4sdGhpcy5oZWlnaHQ9cil9ZWxzZSB0PVwic3RyaW5nXCI9PXR5cGVvZiB0P3QubWF0Y2goYykubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBwYXJzZUZsb2F0KHQpfSk6QXJyYXkuaXNBcnJheSh0KT90Olwib2JqZWN0XCI9PXR5cGVvZiB0P1t0LngsdC55LHQud2lkdGgsdC5oZWlnaHRdOjQ9PWFyZ3VtZW50cy5sZW5ndGg/W10uc2xpY2UuY2FsbChhcmd1bWVudHMpOmgsdGhpcy54PXRbMF0sdGhpcy55PXRbMV0sdGhpcy53aWR0aD10WzJdLHRoaXMuaGVpZ2h0PXRbM119LGV4dGVuZDp7dG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54K1wiIFwiK3RoaXMueStcIiBcIit0aGlzLndpZHRoK1wiIFwiK3RoaXMuaGVpZ2h0fSxtb3JwaDpmdW5jdGlvbih0LGUsaSxuKXtyZXR1cm4gdGhpcy5kZXN0aW5hdGlvbj1uZXcgYi5WaWV3Qm94KHQsZSxpLG4pLHRoaXN9LGF0OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRlc3RpbmF0aW9uP25ldyBiLlZpZXdCb3goW3RoaXMueCsodGhpcy5kZXN0aW5hdGlvbi54LXRoaXMueCkqdCx0aGlzLnkrKHRoaXMuZGVzdGluYXRpb24ueS10aGlzLnkpKnQsdGhpcy53aWR0aCsodGhpcy5kZXN0aW5hdGlvbi53aWR0aC10aGlzLndpZHRoKSp0LHRoaXMuaGVpZ2h0Kyh0aGlzLmRlc3RpbmF0aW9uLmhlaWdodC10aGlzLmhlaWdodCkqdF0pOnRoaXN9fSxwYXJlbnQ6Yi5Db250YWluZXIsY29uc3RydWN0Ont2aWV3Ym94OmZ1bmN0aW9uKHQsZSxpLG4pe3JldHVybiAwPT1hcmd1bWVudHMubGVuZ3RoP25ldyBiLlZpZXdCb3godGhpcyk6dGhpcy5hdHRyKFwidmlld0JveFwiLG5ldyBiLlZpZXdCb3godCxlLGksbikpfX19KSxbXCJjbGlja1wiLFwiZGJsY2xpY2tcIixcIm1vdXNlZG93blwiLFwibW91c2V1cFwiLFwibW91c2VvdmVyXCIsXCJtb3VzZW91dFwiLFwibW91c2Vtb3ZlXCIsXCJ0b3VjaHN0YXJ0XCIsXCJ0b3VjaG1vdmVcIixcInRvdWNobGVhdmVcIixcInRvdWNoZW5kXCIsXCJ0b3VjaGNhbmNlbFwiXS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2IuRWxlbWVudC5wcm90b3R5cGVbdF09ZnVuY3Rpb24oZSl7cmV0dXJuIGIub24odGhpcy5ub2RlLHQsZSksdGhpc319KSxiLmxpc3RlbmVycz1bXSxiLmhhbmRsZXJNYXA9W10sYi5saXN0ZW5lcklkPTAsYi5vbj1mdW5jdGlvbih0LGUsaSxuLHIpe3ZhciBzPWkuYmluZChufHx0Lmluc3RhbmNlfHx0KSxvPShiLmhhbmRsZXJNYXAuaW5kZXhPZih0KSsxfHxiLmhhbmRsZXJNYXAucHVzaCh0KSktMSxhPWUuc3BsaXQoXCIuXCIpWzBdLGg9ZS5zcGxpdChcIi5cIilbMV18fFwiKlwiO2IubGlzdGVuZXJzW29dPWIubGlzdGVuZXJzW29dfHx7fSxiLmxpc3RlbmVyc1tvXVthXT1iLmxpc3RlbmVyc1tvXVthXXx8e30sYi5saXN0ZW5lcnNbb11bYV1baF09Yi5saXN0ZW5lcnNbb11bYV1baF18fHt9LGkuX3N2Z2pzTGlzdGVuZXJJZHx8KGkuX3N2Z2pzTGlzdGVuZXJJZD0rK2IubGlzdGVuZXJJZCksYi5saXN0ZW5lcnNbb11bYV1baF1baS5fc3ZnanNMaXN0ZW5lcklkXT1zLHQuYWRkRXZlbnRMaXN0ZW5lcihhLHMscnx8ITEpfSxiLm9mZj1mdW5jdGlvbih0LGUsaSl7dmFyIG49Yi5oYW5kbGVyTWFwLmluZGV4T2YodCkscj1lJiZlLnNwbGl0KFwiLlwiKVswXSxzPWUmJmUuc3BsaXQoXCIuXCIpWzFdLG89XCJcIjtpZigtMSE9bilpZihpKXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBpJiYoaT1pLl9zdmdqc0xpc3RlbmVySWQpLCFpKXJldHVybjtiLmxpc3RlbmVyc1tuXVtyXSYmYi5saXN0ZW5lcnNbbl1bcl1bc3x8XCIqXCJdJiYodC5yZW1vdmVFdmVudExpc3RlbmVyKHIsYi5saXN0ZW5lcnNbbl1bcl1bc3x8XCIqXCJdW2ldLCExKSxkZWxldGUgYi5saXN0ZW5lcnNbbl1bcl1bc3x8XCIqXCJdW2ldKX1lbHNlIGlmKHMmJnIpe2lmKGIubGlzdGVuZXJzW25dW3JdJiZiLmxpc3RlbmVyc1tuXVtyXVtzXSl7Zm9yKGkgaW4gYi5saXN0ZW5lcnNbbl1bcl1bc10pYi5vZmYodCxbcixzXS5qb2luKFwiLlwiKSxpKTtkZWxldGUgYi5saXN0ZW5lcnNbbl1bcl1bc119fWVsc2UgaWYocylmb3IoZSBpbiBiLmxpc3RlbmVyc1tuXSlmb3IobyBpbiBiLmxpc3RlbmVyc1tuXVtlXSlzPT09byYmYi5vZmYodCxbZSxzXS5qb2luKFwiLlwiKSk7ZWxzZSBpZihyKXtpZihiLmxpc3RlbmVyc1tuXVtyXSl7Zm9yKG8gaW4gYi5saXN0ZW5lcnNbbl1bcl0pYi5vZmYodCxbcixvXS5qb2luKFwiLlwiKSk7ZGVsZXRlIGIubGlzdGVuZXJzW25dW3JdfX1lbHNle2ZvcihlIGluIGIubGlzdGVuZXJzW25dKWIub2ZmKHQsZSk7ZGVsZXRlIGIubGlzdGVuZXJzW25dLGRlbGV0ZSBiLmhhbmRsZXJNYXBbbl19fSxiLmV4dGVuZChiLkVsZW1lbnQse29uOmZ1bmN0aW9uKHQsZSxpLG4pe3JldHVybiBiLm9uKHRoaXMubm9kZSx0LGUsaSxuKSx0aGlzfSxvZmY6ZnVuY3Rpb24odCxlKXtyZXR1cm4gYi5vZmYodGhpcy5ub2RlLHQsZSksdGhpc30sZmlyZTpmdW5jdGlvbihlLGkpe3JldHVybiBlIGluc3RhbmNlb2YgdC5FdmVudD90aGlzLm5vZGUuZGlzcGF0Y2hFdmVudChlKTp0aGlzLm5vZGUuZGlzcGF0Y2hFdmVudChlPW5ldyBiLkN1c3RvbUV2ZW50KGUse2RldGFpbDppLGNhbmNlbGFibGU6ITB9KSksdGhpcy5fZXZlbnQ9ZSx0aGlzfSxldmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ldmVudH19KSxiLkRlZnM9Yi5pbnZlbnQoe2NyZWF0ZTpcImRlZnNcIixpbmhlcml0OmIuQ29udGFpbmVyfSksYi5HPWIuaW52ZW50KHtjcmVhdGU6XCJnXCIsaW5oZXJpdDpiLkNvbnRhaW5lcixleHRlbmQ6e3g6ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/dGhpcy50cmFuc2Zvcm0oXCJ4XCIpOnRoaXMudHJhbnNmb3JtKHt4OnQtdGhpcy54KCl9LCEwKX0seTpmdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dD90aGlzLnRyYW5zZm9ybShcInlcIik6dGhpcy50cmFuc2Zvcm0oe3k6dC10aGlzLnkoKX0sITApfSxjeDpmdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dD90aGlzLmdib3goKS5jeDp0aGlzLngodC10aGlzLmdib3goKS53aWR0aC8yKX0sY3k6ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/dGhpcy5nYm94KCkuY3k6dGhpcy55KHQtdGhpcy5nYm94KCkuaGVpZ2h0LzIpfSxnYm94OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5iYm94KCksZT10aGlzLnRyYW5zZm9ybSgpO3JldHVybiB0LngrPWUueCx0LngyKz1lLngsdC5jeCs9ZS54LHQueSs9ZS55LHQueTIrPWUueSx0LmN5Kz1lLnksdH19LGNvbnN0cnVjdDp7Z3JvdXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdXQobmV3IGIuRyl9fX0pLGIuRG9jPWIuaW52ZW50KHtjcmVhdGU6ZnVuY3Rpb24odCl7dCYmKHQ9XCJzdHJpbmdcIj09dHlwZW9mIHQ/ZS5nZXRFbGVtZW50QnlJZCh0KTp0LFwic3ZnXCI9PXQubm9kZU5hbWU/dGhpcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsdCk6KHRoaXMuY29uc3RydWN0b3IuY2FsbCh0aGlzLGIuY3JlYXRlKFwic3ZnXCIpKSx0LmFwcGVuZENoaWxkKHRoaXMubm9kZSksdGhpcy5zaXplKFwiMTAwJVwiLFwiMTAwJVwiKSksdGhpcy5uYW1lc3BhY2UoKS5kZWZzKCkpfSxpbmhlcml0OmIuQ29udGFpbmVyLGV4dGVuZDp7bmFtZXNwYWNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXR0cih7eG1sbnM6Yi5ucyx2ZXJzaW9uOlwiMS4xXCJ9KS5hdHRyKFwieG1sbnM6eGxpbmtcIixiLnhsaW5rLGIueG1sbnMpLmF0dHIoXCJ4bWxuczpzdmdqc1wiLGIuc3ZnanMsYi54bWxucyl9LGRlZnM6ZnVuY3Rpb24oKXtpZighdGhpcy5fZGVmcyl7dmFyIHQ7KHQ9dGhpcy5ub2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiZGVmc1wiKVswXSk/dGhpcy5fZGVmcz1iLmFkb3B0KHQpOnRoaXMuX2RlZnM9bmV3IGIuRGVmcyx0aGlzLm5vZGUuYXBwZW5kQ2hpbGQodGhpcy5fZGVmcy5ub2RlKX1yZXR1cm4gdGhpcy5fZGVmc30scGFyZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZS5wYXJlbnROb2RlJiZcIiNkb2N1bWVudFwiIT10aGlzLm5vZGUucGFyZW50Tm9kZS5ub2RlTmFtZT90aGlzLm5vZGUucGFyZW50Tm9kZTpudWxsfSxzcG9mOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5ub2RlLmdldFNjcmVlbkNUTSgpO3JldHVybiB0JiZ0aGlzLnN0eWxlKFwibGVmdFwiLC10LmUlMStcInB4XCIpLnN0eWxlKFwidG9wXCIsLXQuZiUxK1wicHhcIiksdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50KCkmJnRoaXMucGFyZW50KCkucmVtb3ZlQ2hpbGQodGhpcy5ub2RlKSx0aGlzfSxjbGVhcjpmdW5jdGlvbigpe2Zvcig7dGhpcy5ub2RlLmhhc0NoaWxkTm9kZXMoKTspdGhpcy5ub2RlLnJlbW92ZUNoaWxkKHRoaXMubm9kZS5sYXN0Q2hpbGQpO3JldHVybiBkZWxldGUgdGhpcy5fZGVmcyxiLnBhcnNlci5kcmF3LnBhcmVudE5vZGV8fHRoaXMubm9kZS5hcHBlbmRDaGlsZChiLnBhcnNlci5kcmF3KSx0aGlzfSxjbG9uZTpmdW5jdGlvbih0KXt0aGlzLndyaXRlRGF0YVRvRG9tKCk7dmFyIGU9dGhpcy5ub2RlLGk9eChlLmNsb25lTm9kZSghMCkpO3JldHVybiB0Pyh0Lm5vZGV8fHQpLmFwcGVuZENoaWxkKGkubm9kZSk6ZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShpLm5vZGUsZS5uZXh0U2libGluZyksaX19fSksYi5leHRlbmQoYi5FbGVtZW50LHtzaWJsaW5nczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhcmVudCgpLmNoaWxkcmVuKCl9LHBvc2l0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50KCkuaW5kZXgodGhpcyl9LG5leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaWJsaW5ncygpW3RoaXMucG9zaXRpb24oKSsxXX0scHJldmlvdXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaWJsaW5ncygpW3RoaXMucG9zaXRpb24oKS0xXX0sZm9yd2FyZDpmdW5jdGlvbigpe3ZhciB0PXRoaXMucG9zaXRpb24oKSsxLGU9dGhpcy5wYXJlbnQoKTtyZXR1cm4gZS5yZW1vdmVFbGVtZW50KHRoaXMpLmFkZCh0aGlzLHQpLGUgaW5zdGFuY2VvZiBiLkRvYyYmZS5ub2RlLmFwcGVuZENoaWxkKGUuZGVmcygpLm5vZGUpLHRoaXN9LGJhY2t3YXJkOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5wb3NpdGlvbigpO3JldHVybiB0PjAmJnRoaXMucGFyZW50KCkucmVtb3ZlRWxlbWVudCh0aGlzKS5hZGQodGhpcyx0LTEpLHRoaXN9LGZyb250OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5wYXJlbnQoKTtyZXR1cm4gdC5ub2RlLmFwcGVuZENoaWxkKHRoaXMubm9kZSksdCBpbnN0YW5jZW9mIGIuRG9jJiZ0Lm5vZGUuYXBwZW5kQ2hpbGQodC5kZWZzKCkubm9kZSksdGhpc30sYmFjazpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBvc2l0aW9uKCk+MCYmdGhpcy5wYXJlbnQoKS5yZW1vdmVFbGVtZW50KHRoaXMpLmFkZCh0aGlzLDApLHRoaXN9LGJlZm9yZTpmdW5jdGlvbih0KXt0LnJlbW92ZSgpO3ZhciBlPXRoaXMucG9zaXRpb24oKTtyZXR1cm4gdGhpcy5wYXJlbnQoKS5hZGQodCxlKSx0aGlzfSxhZnRlcjpmdW5jdGlvbih0KXt0LnJlbW92ZSgpO3ZhciBlPXRoaXMucG9zaXRpb24oKTtyZXR1cm4gdGhpcy5wYXJlbnQoKS5hZGQodCxlKzEpLHRoaXN9fSksYi5NYXNrPWIuaW52ZW50KHtjcmVhdGU6ZnVuY3Rpb24oKXt0aGlzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxiLmNyZWF0ZShcIm1hc2tcIikpLHRoaXMudGFyZ2V0cz1bXX0saW5oZXJpdDpiLkNvbnRhaW5lcixleHRlbmQ6e3JlbW92ZTpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLnRhcmdldHMubGVuZ3RoLTE7dD49MDt0LS0pdGhpcy50YXJnZXRzW3RdJiZ0aGlzLnRhcmdldHNbdF0udW5tYXNrKCk7cmV0dXJuIHRoaXMudGFyZ2V0cz1bXSxiLkVsZW1lbnQucHJvdG90eXBlLnJlbW92ZS5jYWxsKHRoaXMpLHRoaXN9fSxjb25zdHJ1Y3Q6e21hc2s6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kZWZzKCkucHV0KG5ldyBiLk1hc2spfX19KSxiLmV4dGVuZChiLkVsZW1lbnQse21hc2tXaXRoOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm1hc2tlcj10IGluc3RhbmNlb2YgYi5NYXNrP3Q6dGhpcy5wYXJlbnQoKS5tYXNrKCkuYWRkKHQpLHRoaXMubWFza2VyLnRhcmdldHMucHVzaCh0aGlzKSx0aGlzLmF0dHIoXCJtYXNrXCIsJ3VybChcIiMnK3RoaXMubWFza2VyLmF0dHIoXCJpZFwiKSsnXCIpJyl9LHVubWFzazpmdW5jdGlvbigpe3JldHVybiBkZWxldGUgdGhpcy5tYXNrZXIsdGhpcy5hdHRyKFwibWFza1wiLG51bGwpfX0pLGIuQ2xpcFBhdGg9Yi5pbnZlbnQoe2NyZWF0ZTpmdW5jdGlvbigpe3RoaXMuY29uc3RydWN0b3IuY2FsbCh0aGlzLGIuY3JlYXRlKFwiY2xpcFBhdGhcIikpLHRoaXMudGFyZ2V0cz1bXX0saW5oZXJpdDpiLkNvbnRhaW5lcixleHRlbmQ6e3JlbW92ZTpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLnRhcmdldHMubGVuZ3RoLTE7dD49MDt0LS0pdGhpcy50YXJnZXRzW3RdJiZ0aGlzLnRhcmdldHNbdF0udW5jbGlwKCk7cmV0dXJuIHRoaXMudGFyZ2V0cz1bXSx0aGlzLnBhcmVudCgpLnJlbW92ZUVsZW1lbnQodGhpcyksdGhpc319LGNvbnN0cnVjdDp7Y2xpcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRlZnMoKS5wdXQobmV3IGIuQ2xpcFBhdGgpfX19KSxiLmV4dGVuZChiLkVsZW1lbnQse2NsaXBXaXRoOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNsaXBwZXI9dCBpbnN0YW5jZW9mIGIuQ2xpcFBhdGg/dDp0aGlzLnBhcmVudCgpLmNsaXAoKS5hZGQodCksdGhpcy5jbGlwcGVyLnRhcmdldHMucHVzaCh0aGlzKSx0aGlzLmF0dHIoXCJjbGlwLXBhdGhcIiwndXJsKFwiIycrdGhpcy5jbGlwcGVyLmF0dHIoXCJpZFwiKSsnXCIpJyl9LHVuY2xpcDpmdW5jdGlvbigpe3JldHVybiBkZWxldGUgdGhpcy5jbGlwcGVyLHRoaXMuYXR0cihcImNsaXAtcGF0aFwiLG51bGwpfX0pLGIuR3JhZGllbnQ9Yi5pbnZlbnQoe2NyZWF0ZTpmdW5jdGlvbih0KXt0aGlzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxiLmNyZWF0ZSh0K1wiR3JhZGllbnRcIikpLHRoaXMudHlwZT10fSxpbmhlcml0OmIuQ29udGFpbmVyLGV4dGVuZDp7YXQ6ZnVuY3Rpb24odCxlLGkpe3JldHVybiB0aGlzLnB1dChuZXcgYi5TdG9wKS51cGRhdGUodCxlLGkpfSx1cGRhdGU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY2xlYXIoKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0JiZ0LmNhbGwodGhpcyx0aGlzKSx0aGlzfSxmaWxsOmZ1bmN0aW9uKCl7cmV0dXJuXCJ1cmwoI1wiK3RoaXMuaWQoKStcIilcIn0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5maWxsKCl9LGF0dHI6ZnVuY3Rpb24odCxlLGkpe3JldHVyblwidHJhbnNmb3JtXCI9PXQmJih0PVwiZ3JhZGllbnRUcmFuc2Zvcm1cIiksYi5Db250YWluZXIucHJvdG90eXBlLmF0dHIuY2FsbCh0aGlzLHQsZSxpKX19LGNvbnN0cnVjdDp7Z3JhZGllbnQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5kZWZzKCkuZ3JhZGllbnQodCxlKX19fSksYi5leHRlbmQoYi5HcmFkaWVudCxiLkZYLHtmcm9tOmZ1bmN0aW9uKHQsZSl7cmV0dXJuXCJyYWRpYWxcIj09KHRoaXMuX3RhcmdldHx8dGhpcykudHlwZT90aGlzLmF0dHIoe2Z4Om5ldyBiLk51bWJlcih0KSxmeTpuZXcgYi5OdW1iZXIoZSl9KTp0aGlzLmF0dHIoe3gxOm5ldyBiLk51bWJlcih0KSx5MTpuZXcgYi5OdW1iZXIoZSl9KX0sdG86ZnVuY3Rpb24odCxlKXtyZXR1cm5cInJhZGlhbFwiPT0odGhpcy5fdGFyZ2V0fHx0aGlzKS50eXBlP3RoaXMuYXR0cih7Y3g6bmV3IGIuTnVtYmVyKHQpLGN5Om5ldyBiLk51bWJlcihlKX0pOnRoaXMuYXR0cih7eDI6bmV3IGIuTnVtYmVyKHQpLHkyOm5ldyBiLk51bWJlcihlKX0pfX0pLGIuZXh0ZW5kKGIuRGVmcyx7Z3JhZGllbnQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5wdXQobmV3IGIuR3JhZGllbnQodCkpLnVwZGF0ZShlKX19KSxiLlN0b3A9Yi5pbnZlbnQoe2NyZWF0ZTpcInN0b3BcIixpbmhlcml0OmIuRWxlbWVudCxleHRlbmQ6e3VwZGF0ZTpmdW5jdGlvbih0KXtyZXR1cm4oXCJudW1iZXJcIj09dHlwZW9mIHR8fHQgaW5zdGFuY2VvZiBiLk51bWJlcikmJih0PXtvZmZzZXQ6YXJndW1lbnRzWzBdLGNvbG9yOmFyZ3VtZW50c1sxXSxvcGFjaXR5OmFyZ3VtZW50c1syXX0pLG51bGwhPXQub3BhY2l0eSYmdGhpcy5hdHRyKFwic3RvcC1vcGFjaXR5XCIsdC5vcGFjaXR5KSxudWxsIT10LmNvbG9yJiZ0aGlzLmF0dHIoXCJzdG9wLWNvbG9yXCIsdC5jb2xvciksbnVsbCE9dC5vZmZzZXQmJnRoaXMuYXR0cihcIm9mZnNldFwiLG5ldyBiLk51bWJlcih0Lm9mZnNldCkpLHRoaXN9fX0pLGIuUGF0dGVybj1iLmludmVudCh7Y3JlYXRlOlwicGF0dGVyblwiLGluaGVyaXQ6Yi5Db250YWluZXIsZXh0ZW5kOntmaWxsOmZ1bmN0aW9uKCl7cmV0dXJuXCJ1cmwoI1wiK3RoaXMuaWQoKStcIilcIn0sdXBkYXRlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNsZWFyKCksXCJmdW5jdGlvblwiPT10eXBlb2YgdCYmdC5jYWxsKHRoaXMsdGhpcyksdGhpc30sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5maWxsKCl9LGF0dHI6ZnVuY3Rpb24odCxlLGkpe3JldHVyblwidHJhbnNmb3JtXCI9PXQmJih0PVwicGF0dGVyblRyYW5zZm9ybVwiKSxiLkNvbnRhaW5lci5wcm90b3R5cGUuYXR0ci5jYWxsKHRoaXMsdCxlLGkpfX0sY29uc3RydWN0OntwYXR0ZXJuOmZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gdGhpcy5kZWZzKCkucGF0dGVybih0LGUsaSl9fX0pLGIuZXh0ZW5kKGIuRGVmcyx7cGF0dGVybjpmdW5jdGlvbih0LGUsaSl7cmV0dXJuIHRoaXMucHV0KG5ldyBiLlBhdHRlcm4pLnVwZGF0ZShpKS5hdHRyKHt4OjAseTowLHdpZHRoOnQsaGVpZ2h0OmUscGF0dGVyblVuaXRzOlwidXNlclNwYWNlT25Vc2VcIn0pfX0pLGIuU2hhcGU9Yi5pbnZlbnQoe2NyZWF0ZTpmdW5jdGlvbih0KXt0aGlzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyx0KX0saW5oZXJpdDpiLkVsZW1lbnR9KSxiLkJhcmU9Yi5pbnZlbnQoe2NyZWF0ZTpmdW5jdGlvbih0LGUpe2lmKHRoaXMuY29uc3RydWN0b3IuY2FsbCh0aGlzLGIuY3JlYXRlKHQpKSxlKWZvcih2YXIgaSBpbiBlLnByb3RvdHlwZSlcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLnByb3RvdHlwZVtpXSYmKHRoaXNbaV09ZS5wcm90b3R5cGVbaV0pfSxpbmhlcml0OmIuRWxlbWVudCxleHRlbmQ6e3dvcmRzOmZ1bmN0aW9uKHQpe2Zvcig7dGhpcy5ub2RlLmhhc0NoaWxkTm9kZXMoKTspdGhpcy5ub2RlLnJlbW92ZUNoaWxkKHRoaXMubm9kZS5sYXN0Q2hpbGQpO3JldHVybiB0aGlzLm5vZGUuYXBwZW5kQ2hpbGQoZS5jcmVhdGVUZXh0Tm9kZSh0KSksdGhpc319fSksYi5leHRlbmQoYi5QYXJlbnQse2VsZW1lbnQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5wdXQobmV3IGIuQmFyZSh0LGUpKX19KSxiLlN5bWJvbD1iLmludmVudCh7Y3JlYXRlOlwic3ltYm9sXCIsaW5oZXJpdDpiLkNvbnRhaW5lcixjb25zdHJ1Y3Q6e3N5bWJvbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB1dChuZXcgYi5TeW1ib2wpfX19KSxiLlVzZT1iLmludmVudCh7Y3JlYXRlOlwidXNlXCIsaW5oZXJpdDpiLlNoYXBlLGV4dGVuZDp7ZWxlbWVudDpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmF0dHIoXCJocmVmXCIsKGV8fFwiXCIpK1wiI1wiK3QsYi54bGluayl9fSxjb25zdHJ1Y3Q6e3VzZTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnB1dChuZXcgYi5Vc2UpLmVsZW1lbnQodCxlKX19fSksYi5SZWN0PWIuaW52ZW50KHtjcmVhdGU6XCJyZWN0XCIsaW5oZXJpdDpiLlNoYXBlLGNvbnN0cnVjdDp7cmVjdDpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnB1dChuZXcgYi5SZWN0KS5zaXplKHQsZSl9fX0pLGIuQ2lyY2xlPWIuaW52ZW50KHtjcmVhdGU6XCJjaXJjbGVcIixpbmhlcml0OmIuU2hhcGUsY29uc3RydWN0OntjaXJjbGU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucHV0KG5ldyBiLkNpcmNsZSkucngobmV3IGIuTnVtYmVyKHQpLmRpdmlkZSgyKSkubW92ZSgwLDApfX19KSxiLmV4dGVuZChiLkNpcmNsZSxiLkZYLHtyeDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hdHRyKFwiclwiLHQpfSxyeTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5yeCh0KX19KSxiLkVsbGlwc2U9Yi5pbnZlbnQoe2NyZWF0ZTpcImVsbGlwc2VcIixpbmhlcml0OmIuU2hhcGUsY29uc3RydWN0OntlbGxpcHNlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMucHV0KG5ldyBiLkVsbGlwc2UpLnNpemUodCxlKS5tb3ZlKDAsMCl9fX0pLGIuZXh0ZW5kKGIuRWxsaXBzZSxiLlJlY3QsYi5GWCx7cng6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYXR0cihcInJ4XCIsdCl9LHJ5OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmF0dHIoXCJyeVwiLHQpfX0pLGIuZXh0ZW5kKGIuQ2lyY2xlLGIuRWxsaXBzZSx7eDpmdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dD90aGlzLmN4KCktdGhpcy5yeCgpOnRoaXMuY3godCt0aGlzLnJ4KCkpfSx5OmZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10P3RoaXMuY3koKS10aGlzLnJ5KCk6dGhpcy5jeSh0K3RoaXMucnkoKSl9LGN4OmZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10P3RoaXMuYXR0cihcImN4XCIpOnRoaXMuYXR0cihcImN4XCIsdCl9LGN5OmZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10P3RoaXMuYXR0cihcImN5XCIpOnRoaXMuYXR0cihcImN5XCIsdCl9LHdpZHRoOmZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10PzIqdGhpcy5yeCgpOnRoaXMucngobmV3IGIuTnVtYmVyKHQpLmRpdmlkZSgyKSl9LGhlaWdodDpmdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dD8yKnRoaXMucnkoKTp0aGlzLnJ5KG5ldyBiLk51bWJlcih0KS5kaXZpZGUoMikpfSxzaXplOmZ1bmN0aW9uKHQsZSl7dmFyIGk9bCh0aGlzLHQsZSk7cmV0dXJuIHRoaXMucngobmV3IGIuTnVtYmVyKGkud2lkdGgpLmRpdmlkZSgyKSkucnkobmV3IGIuTnVtYmVyKGkuaGVpZ2h0KS5kaXZpZGUoMikpfX0pLGIuTGluZT1iLmludmVudCh7Y3JlYXRlOlwibGluZVwiLGluaGVyaXQ6Yi5TaGFwZSxleHRlbmQ6e2FycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBiLlBvaW50QXJyYXkoW1t0aGlzLmF0dHIoXCJ4MVwiKSx0aGlzLmF0dHIoXCJ5MVwiKV0sW3RoaXMuYXR0cihcIngyXCIpLHRoaXMuYXR0cihcInkyXCIpXV0pfSxwbG90OmZ1bmN0aW9uKHQsZSxpLG4pe3JldHVybiBudWxsPT10P3RoaXMuYXJyYXkoKToodD12b2lkIDAhPT1lP3t4MTp0LHkxOmUseDI6aSx5MjpufTpuZXcgYi5Qb2ludEFycmF5KHQpLnRvTGluZSgpLHRoaXMuYXR0cih0KSl9LG1vdmU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5hdHRyKHRoaXMuYXJyYXkoKS5tb3ZlKHQsZSkudG9MaW5lKCkpfSxzaXplOmZ1bmN0aW9uKHQsZSl7dmFyIGk9bCh0aGlzLHQsZSk7cmV0dXJuIHRoaXMuYXR0cih0aGlzLmFycmF5KCkuc2l6ZShpLndpZHRoLGkuaGVpZ2h0KS50b0xpbmUoKSl9fSxjb25zdHJ1Y3Q6e2xpbmU6ZnVuY3Rpb24odCxlLGksbil7cmV0dXJuIGIuTGluZS5wcm90b3R5cGUucGxvdC5hcHBseSh0aGlzLnB1dChuZXcgYi5MaW5lKSxudWxsIT10P1t0LGUsaSxuXTpbMCwwLDAsMF0pfX19KSxiLlBvbHlsaW5lPWIuaW52ZW50KHtjcmVhdGU6XCJwb2x5bGluZVwiLGluaGVyaXQ6Yi5TaGFwZSxjb25zdHJ1Y3Q6e3BvbHlsaW5lOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnB1dChuZXcgYi5Qb2x5bGluZSkucGxvdCh0fHxuZXcgYi5Qb2ludEFycmF5KX19fSksYi5Qb2x5Z29uPWIuaW52ZW50KHtjcmVhdGU6XCJwb2x5Z29uXCIsaW5oZXJpdDpiLlNoYXBlLGNvbnN0cnVjdDp7cG9seWdvbjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wdXQobmV3IGIuUG9seWdvbikucGxvdCh0fHxuZXcgYi5Qb2ludEFycmF5KX19fSksYi5leHRlbmQoYi5Qb2x5bGluZSxiLlBvbHlnb24se2FycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FycmF5fHwodGhpcy5fYXJyYXk9bmV3IGIuUG9pbnRBcnJheSh0aGlzLmF0dHIoXCJwb2ludHNcIikpKX0scGxvdDpmdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dD90aGlzLmFycmF5KCk6dGhpcy5jbGVhcigpLmF0dHIoXCJwb2ludHNcIixcInN0cmluZ1wiPT10eXBlb2YgdD90OnRoaXMuX2FycmF5PW5ldyBiLlBvaW50QXJyYXkodCkpfSxjbGVhcjpmdW5jdGlvbigpe3JldHVybiBkZWxldGUgdGhpcy5fYXJyYXksdGhpc30sbW92ZTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmF0dHIoXCJwb2ludHNcIix0aGlzLmFycmF5KCkubW92ZSh0LGUpKX0sc2l6ZTpmdW5jdGlvbih0LGUpe3ZhciBpPWwodGhpcyx0LGUpO3JldHVybiB0aGlzLmF0dHIoXCJwb2ludHNcIix0aGlzLmFycmF5KCkuc2l6ZShpLndpZHRoLGkuaGVpZ2h0KSl9fSksYi5leHRlbmQoYi5MaW5lLGIuUG9seWxpbmUsYi5Qb2x5Z29uLHttb3JwaEFycmF5OmIuUG9pbnRBcnJheSx4OmZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10P3RoaXMuYmJveCgpLng6dGhpcy5tb3ZlKHQsdGhpcy5iYm94KCkueSl9LHk6ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/dGhpcy5iYm94KCkueTp0aGlzLm1vdmUodGhpcy5iYm94KCkueCx0KX0sd2lkdGg6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5iYm94KCk7cmV0dXJuIG51bGw9PXQ/ZS53aWR0aDp0aGlzLnNpemUodCxlLmhlaWdodCl9LGhlaWdodDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmJib3goKTtyZXR1cm4gbnVsbD09dD9lLmhlaWdodDp0aGlzLnNpemUoZS53aWR0aCx0KX19KSxiLlBhdGg9Yi5pbnZlbnQoe2NyZWF0ZTpcInBhdGhcIixpbmhlcml0OmIuU2hhcGUsZXh0ZW5kOnttb3JwaEFycmF5OmIuUGF0aEFycmF5LGFycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FycmF5fHwodGhpcy5fYXJyYXk9bmV3IGIuUGF0aEFycmF5KHRoaXMuYXR0cihcImRcIikpKX0scGxvdDpmdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dD90aGlzLmFycmF5KCk6dGhpcy5jbGVhcigpLmF0dHIoXCJkXCIsXCJzdHJpbmdcIj09dHlwZW9mIHQ/dDp0aGlzLl9hcnJheT1uZXcgYi5QYXRoQXJyYXkodCkpfSxjbGVhcjpmdW5jdGlvbigpe3JldHVybiBkZWxldGUgdGhpcy5fYXJyYXksdGhpc30sbW92ZTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmF0dHIoXCJkXCIsdGhpcy5hcnJheSgpLm1vdmUodCxlKSl9LHg6ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/dGhpcy5iYm94KCkueDp0aGlzLm1vdmUodCx0aGlzLmJib3goKS55KX0seTpmdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dD90aGlzLmJib3goKS55OnRoaXMubW92ZSh0aGlzLmJib3goKS54LHQpfSxzaXplOmZ1bmN0aW9uKHQsZSl7dmFyIGk9bCh0aGlzLHQsZSk7cmV0dXJuIHRoaXMuYXR0cihcImRcIix0aGlzLmFycmF5KCkuc2l6ZShpLndpZHRoLGkuaGVpZ2h0KSl9LHdpZHRoOmZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10P3RoaXMuYmJveCgpLndpZHRoOnRoaXMuc2l6ZSh0LHRoaXMuYmJveCgpLmhlaWdodCl9LGhlaWdodDpmdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dD90aGlzLmJib3goKS5oZWlnaHQ6dGhpcy5zaXplKHRoaXMuYmJveCgpLndpZHRoLHQpfX0sY29uc3RydWN0OntwYXRoOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnB1dChuZXcgYi5QYXRoKS5wbG90KHR8fG5ldyBiLlBhdGhBcnJheSl9fX0pLGIuSW1hZ2U9Yi5pbnZlbnQoe2NyZWF0ZTpcImltYWdlXCIsaW5oZXJpdDpiLlNoYXBlLGV4dGVuZDp7bG9hZDpmdW5jdGlvbihlKXtpZighZSlyZXR1cm4gdGhpczt2YXIgaT10aGlzLG49bmV3IHQuSW1hZ2U7cmV0dXJuIGIub24obixcImxvYWRcIixmdW5jdGlvbigpe2Iub2ZmKG4pO3ZhciB0PWkucGFyZW50KGIuUGF0dGVybik7bnVsbCE9PXQmJigwPT1pLndpZHRoKCkmJjA9PWkuaGVpZ2h0KCkmJmkuc2l6ZShuLndpZHRoLG4uaGVpZ2h0KSx0JiYwPT10LndpZHRoKCkmJjA9PXQuaGVpZ2h0KCkmJnQuc2l6ZShpLndpZHRoKCksaS5oZWlnaHQoKSksXCJmdW5jdGlvblwiPT10eXBlb2YgaS5fbG9hZGVkJiZpLl9sb2FkZWQuY2FsbChpLHt3aWR0aDpuLndpZHRoLGhlaWdodDpuLmhlaWdodCxyYXRpbzpuLndpZHRoL24uaGVpZ2h0LHVybDplfSkpfSksYi5vbihuLFwiZXJyb3JcIixmdW5jdGlvbih0KXtiLm9mZihuKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBpLl9lcnJvciYmaS5fZXJyb3IuY2FsbChpLHQpfSksdGhpcy5hdHRyKFwiaHJlZlwiLG4uc3JjPXRoaXMuc3JjPWUsYi54bGluayl9LGxvYWRlZDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbG9hZGVkPXQsdGhpc30sZXJyb3I6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2Vycm9yPXQsdGhpc319LGNvbnN0cnVjdDp7aW1hZ2U6ZnVuY3Rpb24odCxlLGkpe3JldHVybiB0aGlzLnB1dChuZXcgYi5JbWFnZSkubG9hZCh0KS5zaXplKGV8fDAsaXx8ZXx8MCl9fX0pLGIuVGV4dD1iLmludmVudCh7Y3JlYXRlOmZ1bmN0aW9uKCl7dGhpcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYi5jcmVhdGUoXCJ0ZXh0XCIpKSx0aGlzLmRvbS5sZWFkaW5nPW5ldyBiLk51bWJlcigxLjMpLHRoaXMuX3JlYnVpbGQ9ITAsdGhpcy5fYnVpbGQ9ITEsdGhpcy5hdHRyKFwiZm9udC1mYW1pbHlcIixiLmRlZmF1bHRzLmF0dHJzW1wiZm9udC1mYW1pbHlcIl0pfSxpbmhlcml0OmIuU2hhcGUsZXh0ZW5kOnt4OmZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10P3RoaXMuYXR0cihcInhcIik6dGhpcy5hdHRyKFwieFwiLHQpfSx5OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuYXR0cihcInlcIiksaT1cIm51bWJlclwiPT10eXBlb2YgZT9lLXRoaXMuYmJveCgpLnk6MDtyZXR1cm4gbnVsbD09dD9cIm51bWJlclwiPT10eXBlb2YgZT9lLWk6ZTp0aGlzLmF0dHIoXCJ5XCIsXCJudW1iZXJcIj09dHlwZW9mIHQudmFsdWVPZigpP3QraTp0KX0sY3g6ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/dGhpcy5iYm94KCkuY3g6dGhpcy54KHQtdGhpcy5iYm94KCkud2lkdGgvMil9LGN5OmZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10P3RoaXMuYmJveCgpLmN5OnRoaXMueSh0LXRoaXMuYmJveCgpLmhlaWdodC8yKX0sdGV4dDpmdW5jdGlvbih0KXtpZih2b2lkIDA9PT10KXtmb3IodmFyIHQ9XCJcIixlPXRoaXMubm9kZS5jaGlsZE5vZGVzLGk9MCxuPWUubGVuZ3RoO2k8bjsrK2kpMCE9aSYmMyE9ZVtpXS5ub2RlVHlwZSYmMT09Yi5hZG9wdChlW2ldKS5kb20ubmV3TGluZWQmJih0Kz1cIlxcblwiKSx0Kz1lW2ldLnRleHRDb250ZW50O3JldHVybiB0fWlmKHRoaXMuY2xlYXIoKS5idWlsZCghMCksXCJmdW5jdGlvblwiPT10eXBlb2YgdCl0LmNhbGwodGhpcyx0aGlzKTtlbHNle3Q9dC5zcGxpdChcIlxcblwiKTtmb3IodmFyIGk9MCxyPXQubGVuZ3RoO2k8cjtpKyspdGhpcy50c3Bhbih0W2ldKS5uZXdMaW5lKCl9cmV0dXJuIHRoaXMuYnVpbGQoITEpLnJlYnVpbGQoKX0sc2l6ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hdHRyKFwiZm9udC1zaXplXCIsdCkucmVidWlsZCgpfSxsZWFkaW5nOmZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10P3RoaXMuZG9tLmxlYWRpbmc6KHRoaXMuZG9tLmxlYWRpbmc9bmV3IGIuTnVtYmVyKHQpLHRoaXMucmVidWlsZCgpKX0sbGluZXM6ZnVuY3Rpb24oKXt2YXIgdD0odGhpcy50ZXh0UGF0aCYmdGhpcy50ZXh0UGF0aCgpfHx0aGlzKS5ub2RlLGU9Yi51dGlscy5tYXAoYi51dGlscy5maWx0ZXJTVkdFbGVtZW50cyh0LmNoaWxkTm9kZXMpLGZ1bmN0aW9uKHQpe3JldHVybiBiLmFkb3B0KHQpfSk7cmV0dXJuIG5ldyBiLlNldChlKX0scmVidWlsZDpmdW5jdGlvbih0KXtpZihcImJvb2xlYW5cIj09dHlwZW9mIHQmJih0aGlzLl9yZWJ1aWxkPXQpLHRoaXMuX3JlYnVpbGQpe3ZhciBlPXRoaXMsaT0wLG49dGhpcy5kb20ubGVhZGluZypuZXcgYi5OdW1iZXIodGhpcy5hdHRyKFwiZm9udC1zaXplXCIpKTt0aGlzLmxpbmVzKCkuZWFjaChmdW5jdGlvbigpe3RoaXMuZG9tLm5ld0xpbmVkJiYoZS50ZXh0UGF0aCgpfHx0aGlzLmF0dHIoXCJ4XCIsZS5hdHRyKFwieFwiKSksXCJcXG5cIj09dGhpcy50ZXh0KCk/aSs9bjoodGhpcy5hdHRyKFwiZHlcIixuK2kpLGk9MCkpfSksdGhpcy5maXJlKFwicmVidWlsZFwiKX1yZXR1cm4gdGhpc30sYnVpbGQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2J1aWxkPSEhdCx0aGlzfSxzZXREYXRhOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRvbT10LHRoaXMuZG9tLmxlYWRpbmc9bmV3IGIuTnVtYmVyKHQubGVhZGluZ3x8MS4zKSx0aGlzfX0sY29uc3RydWN0Ont0ZXh0OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnB1dChuZXcgYi5UZXh0KS50ZXh0KHQpfSxwbGFpbjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wdXQobmV3IGIuVGV4dCkucGxhaW4odCl9fX0pLGIuVHNwYW49Yi5pbnZlbnQoe2NyZWF0ZTpcInRzcGFuXCIsaW5oZXJpdDpiLlNoYXBlLGV4dGVuZDp7dGV4dDpmdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dD90aGlzLm5vZGUudGV4dENvbnRlbnQrKHRoaXMuZG9tLm5ld0xpbmVkP1wiXFxuXCI6XCJcIik6KFwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/dC5jYWxsKHRoaXMsdGhpcyk6dGhpcy5wbGFpbih0KSx0aGlzKX0sZHg6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYXR0cihcImR4XCIsdCl9LGR5OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmF0dHIoXCJkeVwiLHQpfSxuZXdMaW5lOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5wYXJlbnQoYi5UZXh0KTtyZXR1cm4gdGhpcy5kb20ubmV3TGluZWQ9ITAsdGhpcy5keSh0LmRvbS5sZWFkaW5nKnQuYXR0cihcImZvbnQtc2l6ZVwiKSkuYXR0cihcInhcIix0LngoKSl9fX0pLGIuZXh0ZW5kKGIuVGV4dCxiLlRzcGFuLHtwbGFpbjpmdW5jdGlvbih0KXtyZXR1cm4hMT09PXRoaXMuX2J1aWxkJiZ0aGlzLmNsZWFyKCksdGhpcy5ub2RlLmFwcGVuZENoaWxkKGUuY3JlYXRlVGV4dE5vZGUodCkpLHRoaXN9LHRzcGFuOmZ1bmN0aW9uKHQpe3ZhciBlPSh0aGlzLnRleHRQYXRoJiZ0aGlzLnRleHRQYXRoKCl8fHRoaXMpLm5vZGUsaT1uZXcgYi5Uc3BhbjtyZXR1cm4hMT09PXRoaXMuX2J1aWxkJiZ0aGlzLmNsZWFyKCksZS5hcHBlbmRDaGlsZChpLm5vZGUpLGkudGV4dCh0KX0sY2xlYXI6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9KHRoaXMudGV4dFBhdGgmJnRoaXMudGV4dFBhdGgoKXx8dGhpcykubm9kZTt0Lmhhc0NoaWxkTm9kZXMoKTspdC5yZW1vdmVDaGlsZCh0Lmxhc3RDaGlsZCk7cmV0dXJuIHRoaXN9LGxlbmd0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUuZ2V0Q29tcHV0ZWRUZXh0TGVuZ3RoKCl9fSksYi5UZXh0UGF0aD1iLmludmVudCh7Y3JlYXRlOlwidGV4dFBhdGhcIixpbmhlcml0OmIuUGFyZW50LHBhcmVudDpiLlRleHQsY29uc3RydWN0Onttb3JwaEFycmF5OmIuUGF0aEFycmF5LHBhdGg6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBiLlRleHRQYXRoLGk9dGhpcy5kb2MoKS5kZWZzKCkucGF0aCh0KTt0aGlzLm5vZGUuaGFzQ2hpbGROb2RlcygpOyllLm5vZGUuYXBwZW5kQ2hpbGQodGhpcy5ub2RlLmZpcnN0Q2hpbGQpO3JldHVybiB0aGlzLm5vZGUuYXBwZW5kQ2hpbGQoZS5ub2RlKSxlLmF0dHIoXCJocmVmXCIsXCIjXCIraSxiLnhsaW5rKSx0aGlzfSxhcnJheTpmdW5jdGlvbigpe3ZhciB0PXRoaXMudHJhY2soKTtyZXR1cm4gdD90LmFycmF5KCk6bnVsbH0scGxvdDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLnRyYWNrKCksaT1udWxsO3JldHVybiBlJiYoaT1lLnBsb3QodCkpLG51bGw9PXQ/aTp0aGlzfSx0cmFjazpmdW5jdGlvbigpe3ZhciB0PXRoaXMudGV4dFBhdGgoKTtpZih0KXJldHVybiB0LnJlZmVyZW5jZShcImhyZWZcIil9LHRleHRQYXRoOmZ1bmN0aW9uKCl7aWYodGhpcy5ub2RlLmZpcnN0Q2hpbGQmJlwidGV4dFBhdGhcIj09dGhpcy5ub2RlLmZpcnN0Q2hpbGQubm9kZU5hbWUpcmV0dXJuIGIuYWRvcHQodGhpcy5ub2RlLmZpcnN0Q2hpbGQpfX19KSxiLk5lc3RlZD1iLmludmVudCh7Y3JlYXRlOmZ1bmN0aW9uKCl7dGhpcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYi5jcmVhdGUoXCJzdmdcIikpLHRoaXMuc3R5bGUoXCJvdmVyZmxvd1wiLFwidmlzaWJsZVwiKX0saW5oZXJpdDpiLkNvbnRhaW5lcixjb25zdHJ1Y3Q6e25lc3RlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB1dChuZXcgYi5OZXN0ZWQpfX19KSxiLkE9Yi5pbnZlbnQoe2NyZWF0ZTpcImFcIixpbmhlcml0OmIuQ29udGFpbmVyLGV4dGVuZDp7dG86ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYXR0cihcImhyZWZcIix0LGIueGxpbmspfSxzaG93OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmF0dHIoXCJzaG93XCIsdCxiLnhsaW5rKX0sdGFyZ2V0OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmF0dHIoXCJ0YXJnZXRcIix0KX19LGNvbnN0cnVjdDp7bGluazpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wdXQobmV3IGIuQSkudG8odCl9fX0pLGIuZXh0ZW5kKGIuRWxlbWVudCx7bGlua1RvOmZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBiLkE7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgdD90LmNhbGwoZSxlKTplLnRvKHQpLHRoaXMucGFyZW50KCkucHV0KGUpLnB1dCh0aGlzKX19KSxiLk1hcmtlcj1iLmludmVudCh7Y3JlYXRlOlwibWFya2VyXCIsaW5oZXJpdDpiLkNvbnRhaW5lcixleHRlbmQ6e3dpZHRoOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmF0dHIoXCJtYXJrZXJXaWR0aFwiLHQpfSxoZWlnaHQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYXR0cihcIm1hcmtlckhlaWdodFwiLHQpfSxyZWY6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5hdHRyKFwicmVmWFwiLHQpLmF0dHIoXCJyZWZZXCIsZSl9LHVwZGF0ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jbGVhcigpLFwiZnVuY3Rpb25cIj09dHlwZW9mIHQmJnQuY2FsbCh0aGlzLHRoaXMpLHRoaXN9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuXCJ1cmwoI1wiK3RoaXMuaWQoKStcIilcIn19LGNvbnN0cnVjdDp7bWFya2VyOmZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gdGhpcy5kZWZzKCkubWFya2VyKHQsZSxpKX19fSksYi5leHRlbmQoYi5EZWZzLHttYXJrZXI6ZnVuY3Rpb24odCxlLGkpe3JldHVybiB0aGlzLnB1dChuZXcgYi5NYXJrZXIpLnNpemUodCxlKS5yZWYodC8yLGUvMikudmlld2JveCgwLDAsdCxlKS5hdHRyKFwib3JpZW50XCIsXCJhdXRvXCIpLnVwZGF0ZShpKX19KSxiLmV4dGVuZChiLkxpbmUsYi5Qb2x5bGluZSxiLlBvbHlnb24sYi5QYXRoLHttYXJrZXI6ZnVuY3Rpb24odCxlLGksbil7dmFyIHI9W1wibWFya2VyXCJdO3JldHVyblwiYWxsXCIhPXQmJnIucHVzaCh0KSxyPXIuam9pbihcIi1cIiksdD1hcmd1bWVudHNbMV1pbnN0YW5jZW9mIGIuTWFya2VyP2FyZ3VtZW50c1sxXTp0aGlzLmRvYygpLm1hcmtlcihlLGksbiksdGhpcy5hdHRyKHIsdCl9fSk7dmFyIFA9e3N0cm9rZTpbXCJjb2xvclwiLFwid2lkdGhcIixcIm9wYWNpdHlcIixcImxpbmVjYXBcIixcImxpbmVqb2luXCIsXCJtaXRlcmxpbWl0XCIsXCJkYXNoYXJyYXlcIixcImRhc2hvZmZzZXRcIl0sZmlsbDpbXCJjb2xvclwiLFwib3BhY2l0eVwiLFwicnVsZVwiXSxwcmVmaXg6ZnVuY3Rpb24odCxlKXtyZXR1cm5cImNvbG9yXCI9PWU/dDp0K1wiLVwiK2V9fTtbXCJmaWxsXCIsXCJzdHJva2VcIl0uZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgZSxpPXt9O2lbdF09ZnVuY3Rpb24oaSl7aWYodm9pZCAwPT09aSlyZXR1cm4gdGhpcztpZihcInN0cmluZ1wiPT10eXBlb2YgaXx8Yi5Db2xvci5pc1JnYihpKXx8aSYmXCJmdW5jdGlvblwiPT10eXBlb2YgaS5maWxsKXRoaXMuYXR0cih0LGkpO2Vsc2UgZm9yKGU9UFt0XS5sZW5ndGgtMTtlPj0wO2UtLSludWxsIT1pW1BbdF1bZV1dJiZ0aGlzLmF0dHIoUC5wcmVmaXgodCxQW3RdW2VdKSxpW1BbdF1bZV1dKTtyZXR1cm4gdGhpc30sYi5leHRlbmQoYi5FbGVtZW50LGIuRlgsaSl9KSxiLmV4dGVuZChiLkVsZW1lbnQsYi5GWCx7cm90YXRlOmZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gdGhpcy50cmFuc2Zvcm0oe3JvdGF0aW9uOnQsY3g6ZSxjeTppfSl9LHNrZXc6ZnVuY3Rpb24odCxlLGksbil7cmV0dXJuIDE9PWFyZ3VtZW50cy5sZW5ndGh8fDM9PWFyZ3VtZW50cy5sZW5ndGg/dGhpcy50cmFuc2Zvcm0oe3NrZXc6dCxjeDplLGN5Oml9KTp0aGlzLnRyYW5zZm9ybSh7c2tld1g6dCxza2V3WTplLGN4OmksY3k6bn0pfSxzY2FsZTpmdW5jdGlvbih0LGUsaSxuKXtyZXR1cm4gMT09YXJndW1lbnRzLmxlbmd0aHx8Mz09YXJndW1lbnRzLmxlbmd0aD90aGlzLnRyYW5zZm9ybSh7c2NhbGU6dCxjeDplLGN5Oml9KTp0aGlzLnRyYW5zZm9ybSh7c2NhbGVYOnQsc2NhbGVZOmUsY3g6aSxjeTpufSl9LHRyYW5zbGF0ZTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnRyYW5zZm9ybSh7eDp0LHk6ZX0pfSxmbGlwOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGU9XCJudW1iZXJcIj09dHlwZW9mIHQ/dDplLHRoaXMudHJhbnNmb3JtKHtmbGlwOnR8fFwiYm90aFwiLG9mZnNldDplfSl9LG1hdHJpeDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hdHRyKFwidHJhbnNmb3JtXCIsbmV3IGIuTWF0cml4KDY9PWFyZ3VtZW50cy5sZW5ndGg/W10uc2xpY2UuY2FsbChhcmd1bWVudHMpOnQpKX0sb3BhY2l0eTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hdHRyKFwib3BhY2l0eVwiLHQpfSxkeDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54KG5ldyBiLk51bWJlcih0KS5wbHVzKHRoaXMgaW5zdGFuY2VvZiBiLkZYPzA6dGhpcy54KCkpLCEwKX0sZHk6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMueShuZXcgYi5OdW1iZXIodCkucGx1cyh0aGlzIGluc3RhbmNlb2YgYi5GWD8wOnRoaXMueSgpKSwhMCl9LGRtb3ZlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuZHgodCkuZHkoZSl9fSksYi5leHRlbmQoYi5SZWN0LGIuRWxsaXBzZSxiLkNpcmNsZSxiLkdyYWRpZW50LGIuRlgse3JhZGl1czpmdW5jdGlvbih0LGUpe3ZhciBpPSh0aGlzLl90YXJnZXR8fHRoaXMpLnR5cGU7cmV0dXJuXCJyYWRpYWxcIj09aXx8XCJjaXJjbGVcIj09aT90aGlzLmF0dHIoXCJyXCIsbmV3IGIuTnVtYmVyKHQpKTp0aGlzLnJ4KHQpLnJ5KG51bGw9PWU/dDplKX19KSxiLmV4dGVuZChiLlBhdGgse2xlbmd0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUuZ2V0VG90YWxMZW5ndGgoKX0scG9pbnRBdDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5ub2RlLmdldFBvaW50QXRMZW5ndGgodCl9fSksYi5leHRlbmQoYi5QYXJlbnQsYi5UZXh0LGIuVHNwYW4sYi5GWCx7Zm9udDpmdW5jdGlvbih0LGUpe2lmKFwib2JqZWN0XCI9PXR5cGVvZiB0KWZvcihlIGluIHQpdGhpcy5mb250KGUsdFtlXSk7cmV0dXJuXCJsZWFkaW5nXCI9PXQ/dGhpcy5sZWFkaW5nKGUpOlwiYW5jaG9yXCI9PXQ/dGhpcy5hdHRyKFwidGV4dC1hbmNob3JcIixlKTpcInNpemVcIj09dHx8XCJmYW1pbHlcIj09dHx8XCJ3ZWlnaHRcIj09dHx8XCJzdHJldGNoXCI9PXR8fFwidmFyaWFudFwiPT10fHxcInN0eWxlXCI9PXQ/dGhpcy5hdHRyKFwiZm9udC1cIit0LGUpOnRoaXMuYXR0cih0LGUpfX0pLGIuU2V0PWIuaW52ZW50KHtjcmVhdGU6ZnVuY3Rpb24odCl7QXJyYXkuaXNBcnJheSh0KT90aGlzLm1lbWJlcnM9dDp0aGlzLmNsZWFyKCl9LGV4dGVuZDp7YWRkOmZ1bmN0aW9uKCl7dmFyIHQsZSxpPVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtmb3IodD0wLGU9aS5sZW5ndGg7dDxlO3QrKyl0aGlzLm1lbWJlcnMucHVzaChpW3RdKTtyZXR1cm4gdGhpc30scmVtb3ZlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuaW5kZXgodCk7cmV0dXJuIGU+LTEmJnRoaXMubWVtYmVycy5zcGxpY2UoZSwxKSx0aGlzfSxlYWNoOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLGk9dGhpcy5tZW1iZXJzLmxlbmd0aDtlPGk7ZSsrKXQuYXBwbHkodGhpcy5tZW1iZXJzW2VdLFtlLHRoaXMubWVtYmVyc10pO3JldHVybiB0aGlzfSxjbGVhcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1lbWJlcnM9W10sdGhpc30sbGVuZ3RoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWVtYmVycy5sZW5ndGh9LGhhczpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5pbmRleCh0KT49MH0saW5kZXg6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubWVtYmVycy5pbmRleE9mKHQpfSxnZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubWVtYmVyc1t0XX0sZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQoMCl9LGxhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQodGhpcy5tZW1iZXJzLmxlbmd0aC0xKX0sdmFsdWVPZjpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1lbWJlcnN9LGJib3g6ZnVuY3Rpb24oKXtpZigwPT10aGlzLm1lbWJlcnMubGVuZ3RoKXJldHVybiBuZXcgYi5SQm94O3ZhciB0PXRoaXMubWVtYmVyc1swXS5yYm94KHRoaXMubWVtYmVyc1swXS5kb2MoKSk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3Q9dC5tZXJnZSh0aGlzLnJib3godGhpcy5kb2MoKSkpfSksdH19LGNvbnN0cnVjdDp7c2V0OmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgYi5TZXQodCl9fX0pLGIuRlguU2V0PWIuaW52ZW50KHtjcmVhdGU6ZnVuY3Rpb24odCl7dGhpcy5zZXQ9dH19KSxiLlNldC5pbmhlcml0PWZ1bmN0aW9uKCl7XHJcbnZhciB0LGU9W107Zm9yKHZhciB0IGluIGIuU2hhcGUucHJvdG90eXBlKVwiZnVuY3Rpb25cIj09dHlwZW9mIGIuU2hhcGUucHJvdG90eXBlW3RdJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBiLlNldC5wcm90b3R5cGVbdF0mJmUucHVzaCh0KTtlLmZvckVhY2goZnVuY3Rpb24odCl7Yi5TZXQucHJvdG90eXBlW3RdPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPTAsaT10aGlzLm1lbWJlcnMubGVuZ3RoO2U8aTtlKyspdGhpcy5tZW1iZXJzW2VdJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLm1lbWJlcnNbZV1bdF0mJnRoaXMubWVtYmVyc1tlXVt0XS5hcHBseSh0aGlzLm1lbWJlcnNbZV0sYXJndW1lbnRzKTtyZXR1cm5cImFuaW1hdGVcIj09dD90aGlzLmZ4fHwodGhpcy5meD1uZXcgYi5GWC5TZXQodGhpcykpOnRoaXN9fSksZT1bXTtmb3IodmFyIHQgaW4gYi5GWC5wcm90b3R5cGUpXCJmdW5jdGlvblwiPT10eXBlb2YgYi5GWC5wcm90b3R5cGVbdF0mJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGIuRlguU2V0LnByb3RvdHlwZVt0XSYmZS5wdXNoKHQpO2UuZm9yRWFjaChmdW5jdGlvbih0KXtiLkZYLlNldC5wcm90b3R5cGVbdF09ZnVuY3Rpb24oKXtmb3IodmFyIGU9MCxpPXRoaXMuc2V0Lm1lbWJlcnMubGVuZ3RoO2U8aTtlKyspdGhpcy5zZXQubWVtYmVyc1tlXS5meFt0XS5hcHBseSh0aGlzLnNldC5tZW1iZXJzW2VdLmZ4LGFyZ3VtZW50cyk7cmV0dXJuIHRoaXN9fSl9LGIuZXh0ZW5kKGIuRWxlbWVudCx7ZGF0YTpmdW5jdGlvbih0LGUsaSl7aWYoXCJvYmplY3RcIj09dHlwZW9mIHQpZm9yKGUgaW4gdCl0aGlzLmRhdGEoZSx0W2VdKTtlbHNlIGlmKGFyZ3VtZW50cy5sZW5ndGg8Mil0cnl7cmV0dXJuIEpTT04ucGFyc2UodGhpcy5hdHRyKFwiZGF0YS1cIit0KSl9Y2F0Y2goZSl7cmV0dXJuIHRoaXMuYXR0cihcImRhdGEtXCIrdCl9ZWxzZSB0aGlzLmF0dHIoXCJkYXRhLVwiK3QsbnVsbD09PWU/bnVsbDohMD09PWl8fFwic3RyaW5nXCI9PXR5cGVvZiBlfHxcIm51bWJlclwiPT10eXBlb2YgZT9lOkpTT04uc3RyaW5naWZ5KGUpKTtyZXR1cm4gdGhpc319KSxiLmV4dGVuZChiLkVsZW1lbnQse3JlbWVtYmVyOmZ1bmN0aW9uKHQsZSl7aWYoXCJvYmplY3RcIj09dHlwZW9mIGFyZ3VtZW50c1swXSlmb3IodmFyIGUgaW4gdCl0aGlzLnJlbWVtYmVyKGUsdFtlXSk7ZWxzZXtpZigxPT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiB0aGlzLm1lbW9yeSgpW3RdO3RoaXMubWVtb3J5KClbdF09ZX1yZXR1cm4gdGhpc30sZm9yZ2V0OmZ1bmN0aW9uKCl7aWYoMD09YXJndW1lbnRzLmxlbmd0aCl0aGlzLl9tZW1vcnk9e307ZWxzZSBmb3IodmFyIHQ9YXJndW1lbnRzLmxlbmd0aC0xO3Q+PTA7dC0tKWRlbGV0ZSB0aGlzLm1lbW9yeSgpW2FyZ3VtZW50c1t0XV07cmV0dXJuIHRoaXN9LG1lbW9yeTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tZW1vcnl8fCh0aGlzLl9tZW1vcnk9e30pfX0pLGIuZ2V0PWZ1bmN0aW9uKHQpe3ZhciBpPWUuZ2V0RWxlbWVudEJ5SWQodih0KXx8dCk7cmV0dXJuIGIuYWRvcHQoaSl9LGIuc2VsZWN0PWZ1bmN0aW9uKHQsaSl7cmV0dXJuIG5ldyBiLlNldChiLnV0aWxzLm1hcCgoaXx8ZSkucXVlcnlTZWxlY3RvckFsbCh0KSxmdW5jdGlvbih0KXtyZXR1cm4gYi5hZG9wdCh0KX0pKX0sYi5leHRlbmQoYi5QYXJlbnQse3NlbGVjdDpmdW5jdGlvbih0KXtyZXR1cm4gYi5zZWxlY3QodCx0aGlzLm5vZGUpfX0pO3ZhciBrPVwiYWJjZGVmXCIuc3BsaXQoXCJcIik7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdC5DdXN0b21FdmVudCl7dmFyIFM9ZnVuY3Rpb24odCxpKXtpPWl8fHtidWJibGVzOiExLGNhbmNlbGFibGU6ITEsZGV0YWlsOnZvaWQgMH07dmFyIG49ZS5jcmVhdGVFdmVudChcIkN1c3RvbUV2ZW50XCIpO3JldHVybiBuLmluaXRDdXN0b21FdmVudCh0LGkuYnViYmxlcyxpLmNhbmNlbGFibGUsaS5kZXRhaWwpLG59O1MucHJvdG90eXBlPXQuRXZlbnQucHJvdG90eXBlLGIuQ3VzdG9tRXZlbnQ9U31lbHNlIGIuQ3VzdG9tRXZlbnQ9dC5DdXN0b21FdmVudDtyZXR1cm4gZnVuY3Rpb24oZSl7Zm9yKHZhciBpPTAsbj1bXCJtb3pcIixcIndlYmtpdFwiXSxyPTA7cjxuLmxlbmd0aCYmIXQucmVxdWVzdEFuaW1hdGlvbkZyYW1lOysrcillLnJlcXVlc3RBbmltYXRpb25GcmFtZT1lW25bcl0rXCJSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIl0sZS5jYW5jZWxBbmltYXRpb25GcmFtZT1lW25bcl0rXCJDYW5jZWxBbmltYXRpb25GcmFtZVwiXXx8ZVtuW3JdK1wiQ2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lXCJdO2UucmVxdWVzdEFuaW1hdGlvbkZyYW1lPWUucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbih0KXt2YXIgbj0obmV3IERhdGUpLmdldFRpbWUoKSxyPU1hdGgubWF4KDAsMTYtKG4taSkpLHM9ZS5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dChuK3IpfSxyKTtyZXR1cm4gaT1uK3Isc30sZS5jYW5jZWxBbmltYXRpb25GcmFtZT1lLmNhbmNlbEFuaW1hdGlvbkZyYW1lfHxlLmNsZWFyVGltZW91dH0odCksYn0pOyJdLCJmaWxlIjoibGlicy9zdmcubWluLmpzIn0=
